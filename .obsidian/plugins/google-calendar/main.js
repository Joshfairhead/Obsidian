/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var lL=Object.create;var cu=Object.defineProperty,uL=Object.defineProperties,cL=Object.getOwnPropertyDescriptor,fL=Object.getOwnPropertyDescriptors,dL=Object.getOwnPropertyNames,u_=Object.getOwnPropertySymbols,hL=Object.getPrototypeOf,c_=Object.prototype.hasOwnProperty,pL=Object.prototype.propertyIsEnumerable;var f_=(t,e,r)=>e in t?cu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fr=(t,e)=>{for(var r in e||(e={}))c_.call(e,r)&&f_(t,r,e[r]);if(u_)for(var r of u_(e))pL.call(e,r)&&f_(t,r,e[r]);return t},mn=(t,e)=>uL(t,fL(e)),d_=t=>cu(t,"__esModule",{value:!0});var EV=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var ce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gL=(t,e)=>{d_(t);for(var r in e)cu(t,r,{get:e[r],enumerable:!0})},mL=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of dL(e))!c_.call(t,n)&&n!=="default"&&cu(t,n,{get:()=>e[n],enumerable:!(r=cL(e,n))||r.enumerable});return t},xt=t=>mL(d_(cu(t!=null?lL(hL(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var M=(t,e,r)=>new Promise((n,i)=>{var a=u=>{try{l(r.next(u))}catch(f){i(f)}},s=u=>{try{l(r.throw(u))}catch(f){i(f)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);l((r=r.apply(t,e)).next())});var v0=ce((RV,C_)=>{"use strict";var Tf=Object.prototype.hasOwnProperty,g_=Object.prototype.toString,m_=Object.defineProperty,y_=Object.getOwnPropertyDescriptor,v_=function(e){return typeof Array.isArray=="function"?Array.isArray(e):g_.call(e)==="[object Array]"},__=function(e){if(!e||g_.call(e)!=="[object Object]")return!1;var r=Tf.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Tf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i=="undefined"||Tf.call(e,i)},w_=function(e,r){m_&&r.name==="__proto__"?m_(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},E_=function(e,r){if(r==="__proto__")if(Tf.call(e,r)){if(y_)return y_(e,r).value}else return;return e[r]};C_.exports=function t(){var e,r,n,i,a,s,l=arguments[0],u=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<f;++u)if(e=arguments[u],e!=null)for(r in e)n=E_(l,r),i=E_(e,r),l!==i&&(d&&i&&(__(i)||(a=v_(i)))?(a?(a=!1,s=n&&v_(n)?n:[]):s=n&&__(n)?n:{},w_(l,{name:r,newValue:t(d,s,i)})):typeof i!="undefined"&&w_(l,{name:r,newValue:i}));return l}});var _0=ce((Go,b_)=>{"use strict";var yL=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ca!="undefined")return Ca;throw new Error("unable to locate global object")},Ca=yL();b_.exports=Go=Ca.fetch;Ca.fetch&&(Go.default=Ca.fetch.bind(Ca));Go.Headers=Ca.Headers;Go.Request=Ca.Request;Go.Response=Ca.Response});var w0=ce((NV,x_)=>{"use strict";var Ki=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Ki.writable=t=>Ki(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Ki.readable=t=>Ki(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Ki.duplex=t=>Ki.writable(t)&&Ki.readable(t);Ki.transform=t=>Ki.duplex(t)&&typeof t._transform=="function";x_.exports=Ki});var E0=ce(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.GaxiosError=void 0;var S_=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};Af.GaxiosError=S_});var A_=ce(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.getRetryConfig=void 0;function vL(t){return M(this,null,function*(){var e;let r=T_(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||_L)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}kf.getRetryConfig=vL;function _L(t){let e=T_(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function T_(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var I_=ce((OV,k_)=>{var Vo=1e3,Ko=Vo*60,jo=Ko*60,Ms=jo*24,wL=Ms*7,EL=Ms*365.25;k_.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return CL(t);if(r==="number"&&isFinite(t))return e.long?xL(t):bL(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function CL(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*EL;case"weeks":case"week":case"w":return r*wL;case"days":case"day":case"d":return r*Ms;case"hours":case"hour":case"hrs":case"hr":case"h":return r*jo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ko;case"seconds":case"second":case"secs":case"sec":case"s":return r*Vo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function bL(t){var e=Math.abs(t);return e>=Ms?Math.round(t/Ms)+"d":e>=jo?Math.round(t/jo)+"h":e>=Ko?Math.round(t/Ko)+"m":e>=Vo?Math.round(t/Vo)+"s":t+"ms"}function xL(t){var e=Math.abs(t);return e>=Ms?If(t,e,Ms,"day"):e>=jo?If(t,e,jo,"hour"):e>=Ko?If(t,e,Ko,"minute"):e>=Vo?If(t,e,Vo,"second"):t+" ms"}function If(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var N_=ce((LV,R_)=>{function SL(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=I_(),r.destroy=f,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(d){let h,g=null,m,y;function _(...E){if(!_.enabled)return;let w=_,b=Number(new Date),I=b-(h||b);w.diff=I,w.prev=h,w.curr=b,h=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let R=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(O,ee)=>{if(O==="%%")return"%";R++;let G=r.formatters[ee];if(typeof G=="function"){let U=E[R];O=G.call(w,U),E.splice(R,1),R--}return O}),r.formatArgs.call(w,E),(w.log||r.log).apply(w,E)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==r.namespaces&&(m=r.namespaces,y=r.enabled(d)),y),set:E=>{g=E}}),typeof r.init=="function"&&r.init(_),_}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),m=g.length;for(h=0;h<m;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}R_.exports=SL});var Nf=ce((Vn,Rf)=>{Vn.formatArgs=AL;Vn.save=kL;Vn.load=IL;Vn.useColors=TL;Vn.storage=RL();Vn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Vn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function TL(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function AL(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Rf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Vn.log=console.debug||console.log||(()=>{});function kL(t){try{t?Vn.storage.setItem("debug",t):Vn.storage.removeItem("debug")}catch(e){}}function IL(){let t;try{t=Vn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function RL(){try{return localStorage}catch(t){}}Rf.exports=N_()(Vn);var{formatters:NL}=Rf.exports;NL.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var B_=ce(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});function BL(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(a,s)=>{a?i(a):n(s)})})}}C0.default=BL});var L_=ce((x0,O_)=>{"use strict";var D_=x0&&x0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},DL=require("events"),OL=D_(Nf()),LL=D_(B_()),du=OL.default("agent-base");function PL(t){return Boolean(t)&&typeof t.addRequest=="function"}function b0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Bf(t,e){return new Bf.Agent(t,e)}(function(t){class e extends DL.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:b0()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:b0()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=b0()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,u=a.timeout||this.timeout,f=m=>{n._hadError||(n.emit("error",m),n._hadError=!0)},d=()=>{l=null,s=!0;let m=new Error(`A "socket" was not created for HTTP request before ${u}ms`);m.code="ETIMEOUT",f(m)},h=m=>{s||(l!==null&&(clearTimeout(l),l=null),f(m))},g=m=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),PL(m)){du("Callback returned another Agent instance %o",m.constructor.name),m.addRequest(n,a);return}if(m){m.once("free",()=>{this.freeSocket(m,a)}),n.onSocket(m);return}let y=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(y)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(du("Converting legacy callback function to promise"),this.promisifiedCallback=LL.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(d,u)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{du("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(m){Promise.reject(m).catch(h)}}freeSocket(n,i){du("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){du("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(Bf||(Bf={}));O_.exports=Bf});var P_=ce(pu=>{"use strict";var ML=pu&&pu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pu,"__esModule",{value:!0});var UL=ML(Nf()),hu=UL.default("https-proxy-agent:parse-proxy-response");function FL(t){return new Promise((e,r)=>{let n=0,i=[];function a(){let h=t.read();h?d(h):t.once("readable",a)}function s(){t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",l),t.removeListener("readable",a)}function l(h){hu("onclose had error %o",h)}function u(){hu("onend")}function f(h){s(),hu("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){hu("have not received end of HTTP headers yet..."),a();return}let y=g.toString("ascii",0,g.indexOf(`\r
`)),_=+y.split(" ")[1];hu("got proxy server response: %o",y),e({statusCode:_,buffered:g})}t.on("error",f),t.on("close",l),t.on("end",u),a()})}pu.default=FL});var q_=ce(Us=>{"use strict";var qL=Us&&Us.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function u(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,u)}f((n=n.apply(t,e||[])).next())})},Ho=Us&&Us.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Us,"__esModule",{value:!0});var M_=Ho(require("net")),U_=Ho(require("tls")),GL=Ho(require("url")),VL=Ho(require("assert")),KL=Ho(Nf()),jL=L_(),HL=Ho(P_()),gu=KL.default("https-proxy-agent:agent"),F_=class extends jL.Agent{constructor(e){let r;if(typeof e=="string"?r=GL.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");gu("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||zL(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return qL(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(gu("Creating `tls.Socket`: %o",n),a=U_.default.connect(n)):(gu("Creating `net.Socket`: %o",n),a=M_.default.connect(n));let s=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;WL(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let E of Object.keys(s))u+=`${E}: ${s[E]}\r
`;let g=HL.default(a);a.write(`${u}\r
`);let{statusCode:m,buffered:y}=yield g;if(m===200){if(e.once("socket",YL),r.secureEndpoint){gu("Upgrading socket connection to TLS");let E=r.servername||r.host;return U_.default.connect(Object.assign(Object.assign({},QL(r,"host","hostname","path","port")),{socket:a,servername:E}))}return a}a.destroy();let _=new M_.default.Socket({writable:!1});return _.readable=!0,e.once("socket",E=>{gu("replaying proxy buffer for failed request"),VL.default(E.listenerCount("data")>0),E.push(y),E.push(null)}),_})}};Us.default=F_;function YL(t){t.resume()}function WL(t,e){return Boolean(!e&&t===80||e&&t===443)}function zL(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function QL(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var k0=ce((A0,G_)=>{"use strict";var XL=A0&&A0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},S0=XL(q_());function T0(t){return new S0.default(t)}(function(t){t.HttpsProxyAgent=S0.default,t.prototype=S0.default.prototype})(T0||(T0={}));G_.exports=T0});var W_=ce(Yo=>{"use strict";var Df=Yo&&Yo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.Gaxios=void 0;var JL=Df(v0()),ZL=require("https"),$L=Df(_0()),e4=Df(require("querystring")),t4=Df(w0()),V_=require("url"),r4=E0(),n4=A_(),i4=s4()?window.fetch:$L.default;function a4(){return typeof window!="undefined"&&!!window}function s4(){return a4()&&!!window.fetch}function o4(){return typeof Buffer!="undefined"}function K_(t,e){return!!j_(t,e)}function j_(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var I0;function H_(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(I0=k0()),i}H_();function l4(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new V_.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function u4(t){if(!l4(t))return H_()}var Y_=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return M(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return M(this,null,function*(){let n=yield(e.fetchImplementation||i4)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return M(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new r4.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield(0,n4.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return M(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=(0,JL.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;t4.default.readable(r.data)?r.body=r.data:o4()&&Buffer.isBuffer(r.data)?(r.body=r.data,K_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(j_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(K_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=u4(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new V_.URL(i);r.agent=new I0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new I0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new ZL.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return e4.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Yo.Gaxios=Y_});var Wo=ce(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.request=bi.instance=bi.Gaxios=bi.GaxiosError=void 0;var z_=W_();Object.defineProperty(bi,"Gaxios",{enumerable:!0,get:function(){return z_.Gaxios}});var c4=E0();Object.defineProperty(bi,"GaxiosError",{enumerable:!0,get:function(){return c4.GaxiosError}});bi.instance=new z_.Gaxios;function f4(t){return M(this,null,function*(){return bi.instance.request(t)})}bi.request=f4});var R0=ce((Q_,Of)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,u=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function m(D){var O,ee,G,U=fe.prototype={constructor:fe,toString:null,valueOf:null},le=new fe(1),se=20,_e=4,Oe=-7,Re=21,Se=-1e7,Ee=1e7,ve=!1,Je=1,Ke=0,Et={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},yt="0123456789abcdefghijklmnopqrstuvwxyz",Ze=!0;function fe(A,B){var L,Y,V,Q,J,H,X,ne,Z=this;if(!(Z instanceof fe))return new fe(A,B);if(B==null){if(A&&A._isBigNumber===!0){Z.s=A.s,!A.c||A.e>Ee?Z.c=Z.e=null:A.e<Se?Z.c=[Z.e=0]:(Z.e=A.e,Z.c=A.c.slice());return}if((H=typeof A=="number")&&A*0==0){if(Z.s=1/A<0?(A=-A,-1):1,A===~~A){for(Q=0,J=A;J>=10;J/=10,Q++);Q>Ee?Z.c=Z.e=null:(Z.e=Q,Z.c=[A]);return}ne=String(A)}else{if(!r.test(ne=String(A)))return G(Z,ne,H);Z.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(Q=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(J=ne.search(/e/i))>0?(Q<0&&(Q=J),Q+=+ne.slice(J+1),ne=ne.substring(0,J)):Q<0&&(Q=ne.length)}else{if(w(B,2,yt.length,"Base"),B==10&&Ze)return Z=new fe(A),tt(Z,se+Z.e+1,_e);if(ne=String(A),H=typeof A=="number"){if(A*0!=0)return G(Z,ne,H,B);if(Z.s=1/A<0?(ne=ne.slice(1),-1):1,fe.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(s+A)}else Z.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(L=yt.slice(0,B),Q=J=0,X=ne.length;J<X;J++)if(L.indexOf(Y=ne.charAt(J))<0){if(Y=="."){if(J>Q){Q=X;continue}}else if(!V&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){V=!0,J=-1,Q=0;continue}return G(Z,String(A),H,B)}H=!1,ne=ee(ne,B,10,Z.s),(Q=ne.indexOf("."))>-1?ne=ne.replace(".",""):Q=ne.length}for(J=0;ne.charCodeAt(J)===48;J++);for(X=ne.length;ne.charCodeAt(--X)===48;);if(ne=ne.slice(J,++X)){if(X-=J,H&&fe.DEBUG&&X>15&&(A>f||A!==i(A)))throw Error(s+Z.s*A);if((Q=Q-J-1)>Ee)Z.c=Z.e=null;else if(Q<Se)Z.c=[Z.e=0];else{if(Z.e=Q,Z.c=[],J=(Q+1)%u,Q<0&&(J+=u),J<X){for(J&&Z.c.push(+ne.slice(0,J)),X-=u;J<X;)Z.c.push(+ne.slice(J,J+=u));J=u-(ne=ne.slice(J)).length}else J-=X;for(;J--;ne+="0");Z.c.push(+ne)}}else Z.c=[Z.e=0]}fe.clone=m,fe.ROUND_UP=0,fe.ROUND_DOWN=1,fe.ROUND_CEIL=2,fe.ROUND_FLOOR=3,fe.ROUND_HALF_UP=4,fe.ROUND_HALF_DOWN=5,fe.ROUND_HALF_EVEN=6,fe.ROUND_HALF_CEIL=7,fe.ROUND_HALF_FLOOR=8,fe.EUCLID=9,fe.config=fe.set=function(A){var B,L;if(A!=null)if(typeof A=="object"){if(A.hasOwnProperty(B="DECIMAL_PLACES")&&(L=A[B],w(L,0,g,B),se=L),A.hasOwnProperty(B="ROUNDING_MODE")&&(L=A[B],w(L,0,8,B),_e=L),A.hasOwnProperty(B="EXPONENTIAL_AT")&&(L=A[B],L&&L.pop?(w(L[0],-g,0,B),w(L[1],0,g,B),Oe=L[0],Re=L[1]):(w(L,-g,g,B),Oe=-(Re=L<0?-L:L))),A.hasOwnProperty(B="RANGE"))if(L=A[B],L&&L.pop)w(L[0],-g,-1,B),w(L[1],1,g,B),Se=L[0],Ee=L[1];else if(w(L,-g,g,B),L)Se=-(Ee=L<0?-L:L);else throw Error(a+B+" cannot be zero: "+L);if(A.hasOwnProperty(B="CRYPTO"))if(L=A[B],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ve=L;else throw ve=!L,Error(a+"crypto unavailable");else ve=L;else throw Error(a+B+" not true or false: "+L);if(A.hasOwnProperty(B="MODULO_MODE")&&(L=A[B],w(L,0,9,B),Je=L),A.hasOwnProperty(B="POW_PRECISION")&&(L=A[B],w(L,0,g,B),Ke=L),A.hasOwnProperty(B="FORMAT"))if(L=A[B],typeof L=="object")Et=L;else throw Error(a+B+" not an object: "+L);if(A.hasOwnProperty(B="ALPHABET"))if(L=A[B],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))Ze=L.slice(0,10)=="0123456789",yt=L;else throw Error(a+B+" invalid: "+L)}else throw Error(a+"Object expected: "+A);return{DECIMAL_PLACES:se,ROUNDING_MODE:_e,EXPONENTIAL_AT:[Oe,Re],RANGE:[Se,Ee],CRYPTO:ve,MODULO_MODE:Je,POW_PRECISION:Ke,FORMAT:Et,ALPHABET:yt}},fe.isBigNumber=function(A){if(!A||A._isBigNumber!==!0)return!1;if(!fe.DEBUG)return!0;var B,L,Y=A.c,V=A.e,Q=A.s;e:if({}.toString.call(Y)=="[object Array]"){if((Q===1||Q===-1)&&V>=-g&&V<=g&&V===i(V)){if(Y[0]===0){if(V===0&&Y.length===1)return!0;break e}if(B=(V+1)%u,B<1&&(B+=u),String(Y[0]).length==B){for(B=0;B<Y.length;B++)if(L=Y[B],L<0||L>=l||L!==i(L))break e;if(L!==0)return!0}}}else if(Y===null&&V===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(a+"Invalid BigNumber: "+A)},fe.maximum=fe.max=function(){return it(arguments,U.lt)},fe.minimum=fe.min=function(){return it(arguments,U.gt)},fe.random=function(){var A=9007199254740992,B=Math.random()*A&2097151?function(){return i(Math.random()*A)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var Y,V,Q,J,H,X=0,ne=[],Z=new fe(le);if(L==null?L=se:w(L,0,g),J=n(L/u),ve)if(crypto.getRandomValues){for(Y=crypto.getRandomValues(new Uint32Array(J*=2));X<J;)H=Y[X]*131072+(Y[X+1]>>>11),H>=9e15?(V=crypto.getRandomValues(new Uint32Array(2)),Y[X]=V[0],Y[X+1]=V[1]):(ne.push(H%1e14),X+=2);X=J/2}else if(crypto.randomBytes){for(Y=crypto.randomBytes(J*=7);X<J;)H=(Y[X]&31)*281474976710656+Y[X+1]*1099511627776+Y[X+2]*4294967296+Y[X+3]*16777216+(Y[X+4]<<16)+(Y[X+5]<<8)+Y[X+6],H>=9e15?crypto.randomBytes(7).copy(Y,X):(ne.push(H%1e14),X+=7);X=J/7}else throw ve=!1,Error(a+"crypto unavailable");if(!ve)for(;X<J;)H=B(),H<9e15&&(ne[X++]=H%1e14);for(J=ne[--X],L%=u,J&&L&&(H=d[u-L],ne[X]=i(J/H)*H);ne[X]===0;ne.pop(),X--);if(X<0)ne=[Q=0];else{for(Q=-1;ne[0]===0;ne.splice(0,1),Q-=u);for(X=1,H=ne[0];H>=10;H/=10,X++);X<u&&(Q-=u-X)}return Z.e=Q,Z.c=ne,Z}}(),fe.sum=function(){for(var A=1,B=arguments,L=new fe(B[0]);A<B.length;)L=L.plus(B[A++]);return L},ee=function(){var A="0123456789";function B(L,Y,V,Q){for(var J,H=[0],X,ne=0,Z=L.length;ne<Z;){for(X=H.length;X--;H[X]*=Y);for(H[0]+=Q.indexOf(L.charAt(ne++)),J=0;J<H.length;J++)H[J]>V-1&&(H[J+1]==null&&(H[J+1]=0),H[J+1]+=H[J]/V|0,H[J]%=V)}return H.reverse()}return function(L,Y,V,Q,J){var H,X,ne,Z,de,Ue,qe,ct,Qt=L.indexOf("."),Xt=se,at=_e;for(Qt>=0&&(Z=Ke,Ke=0,L=L.replace(".",""),ct=new fe(Y),Ue=ct.pow(L.length-Qt),Ke=Z,ct.c=B(R(_(Ue.c),Ue.e,"0"),10,V,A),ct.e=ct.c.length),qe=B(L,Y,V,J?(H=yt,A):(H=A,yt)),ne=Z=qe.length;qe[--Z]==0;qe.pop());if(!qe[0])return H.charAt(0);if(Qt<0?--ne:(Ue.c=qe,Ue.e=ne,Ue.s=Q,Ue=O(Ue,ct,Xt,at,V),qe=Ue.c,de=Ue.r,ne=Ue.e),X=ne+Xt+1,Qt=qe[X],Z=V/2,de=de||X<0||qe[X+1]!=null,de=at<4?(Qt!=null||de)&&(at==0||at==(Ue.s<0?3:2)):Qt>Z||Qt==Z&&(at==4||de||at==6&&qe[X-1]&1||at==(Ue.s<0?8:7)),X<1||!qe[0])L=de?R(H.charAt(1),-Xt,H.charAt(0)):H.charAt(0);else{if(qe.length=X,de)for(--V;++qe[--X]>V;)qe[X]=0,X||(++ne,qe=[1].concat(qe));for(Z=qe.length;!qe[--Z];);for(Qt=0,L="";Qt<=Z;L+=H.charAt(qe[Qt++]));L=R(L,ne,H.charAt(0))}return L}}(),O=function(){function A(Y,V,Q){var J,H,X,ne,Z=0,de=Y.length,Ue=V%h,qe=V/h|0;for(Y=Y.slice();de--;)X=Y[de]%h,ne=Y[de]/h|0,J=qe*X+ne*Ue,H=Ue*X+J%h*h+Z,Z=(H/Q|0)+(J/h|0)+qe*ne,Y[de]=H%Q;return Z&&(Y=[Z].concat(Y)),Y}function B(Y,V,Q,J){var H,X;if(Q!=J)X=Q>J?1:-1;else for(H=X=0;H<Q;H++)if(Y[H]!=V[H]){X=Y[H]>V[H]?1:-1;break}return X}function L(Y,V,Q,J){for(var H=0;Q--;)Y[Q]-=H,H=Y[Q]<V[Q]?1:0,Y[Q]=H*J+Y[Q]-V[Q];for(;!Y[0]&&Y.length>1;Y.splice(0,1));}return function(Y,V,Q,J,H){var X,ne,Z,de,Ue,qe,ct,Qt,Xt,at,Bt,gr,qa,Ss,Ts,Sn,fa,sn=Y.s==V.s?1:-1,Nr=Y.c,cr=V.c;if(!Nr||!Nr[0]||!cr||!cr[0])return new fe(!Y.s||!V.s||(Nr?cr&&Nr[0]==cr[0]:!cr)?NaN:Nr&&Nr[0]==0||!cr?sn*0:sn/0);for(Qt=new fe(sn),Xt=Qt.c=[],ne=Y.e-V.e,sn=Q+ne+1,H||(H=l,ne=y(Y.e/u)-y(V.e/u),sn=sn/u|0),Z=0;cr[Z]==(Nr[Z]||0);Z++);if(cr[Z]>(Nr[Z]||0)&&ne--,sn<0)Xt.push(1),de=!0;else{for(Ss=Nr.length,Sn=cr.length,Z=0,sn+=2,Ue=i(H/(cr[0]+1)),Ue>1&&(cr=A(cr,Ue,H),Nr=A(Nr,Ue,H),Sn=cr.length,Ss=Nr.length),qa=Sn,at=Nr.slice(0,Sn),Bt=at.length;Bt<Sn;at[Bt++]=0);fa=cr.slice(),fa=[0].concat(fa),Ts=cr[0],cr[1]>=H/2&&Ts++;do{if(Ue=0,X=B(cr,at,Sn,Bt),X<0){if(gr=at[0],Sn!=Bt&&(gr=gr*H+(at[1]||0)),Ue=i(gr/Ts),Ue>1)for(Ue>=H&&(Ue=H-1),qe=A(cr,Ue,H),ct=qe.length,Bt=at.length;B(qe,at,ct,Bt)==1;)Ue--,L(qe,Sn<ct?fa:cr,ct,H),ct=qe.length,X=1;else Ue==0&&(X=Ue=1),qe=cr.slice(),ct=qe.length;if(ct<Bt&&(qe=[0].concat(qe)),L(at,qe,Bt,H),Bt=at.length,X==-1)for(;B(cr,at,Sn,Bt)<1;)Ue++,L(at,Sn<Bt?fa:cr,Bt,H),Bt=at.length}else X===0&&(Ue++,at=[0]);Xt[Z++]=Ue,at[0]?at[Bt++]=Nr[qa]||0:(at=[Nr[qa]],Bt=1)}while((qa++<Ss||at[0]!=null)&&sn--);de=at[0]!=null,Xt[0]||Xt.splice(0,1)}if(H==l){for(Z=1,sn=Xt[0];sn>=10;sn/=10,Z++);tt(Qt,Q+(Qt.e=Z+ne*u-1)+1,J,de)}else Qt.e=ne,Qt.r=+de;return Qt}}();function vt(A,B,L,Y){var V,Q,J,H,X;if(L==null?L=_e:w(L,0,8),!A.c)return A.toString();if(V=A.c[0],J=A.e,B==null)X=_(A.c),X=Y==1||Y==2&&(J<=Oe||J>=Re)?I(X,J):R(X,J,"0");else if(A=tt(new fe(A),B,L),Q=A.e,X=_(A.c),H=X.length,Y==1||Y==2&&(B<=Q||Q<=Oe)){for(;H<B;X+="0",H++);X=I(X,Q)}else if(B-=J,X=R(X,Q,"0"),Q+1>H){if(--B>0)for(X+=".";B--;X+="0");}else if(B+=Q-H,B>0)for(Q+1==H&&(X+=".");B--;X+="0");return A.s<0&&V?"-"+X:X}function it(A,B){for(var L,Y=1,V=new fe(A[0]);Y<A.length;Y++)if(L=new fe(A[Y]),L.s)B.call(V,L)&&(V=L);else{V=L;break}return V}function Ct(A,B,L){for(var Y=1,V=B.length;!B[--V];B.pop());for(V=B[0];V>=10;V/=10,Y++);return(L=Y+L*u-1)>Ee?A.c=A.e=null:L<Se?A.c=[A.e=0]:(A.e=L,A.c=B),A}G=function(){var A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,L=/^\.([^.]+)$/,Y=/^-?(Infinity|NaN)$/,V=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,J,H,X){var ne,Z=H?J:J.replace(V,"");if(Y.test(Z))Q.s=isNaN(Z)?null:Z<0?-1:1;else{if(!H&&(Z=Z.replace(A,function(de,Ue,qe){return ne=(qe=qe.toLowerCase())=="x"?16:qe=="b"?2:8,!X||X==ne?Ue:de}),X&&(ne=X,Z=Z.replace(B,"$1").replace(L,"0.$1")),J!=Z))return new fe(Z,ne);if(fe.DEBUG)throw Error(a+"Not a"+(X?" base "+X:"")+" number: "+J);Q.s=null}Q.c=Q.e=null}}();function tt(A,B,L,Y){var V,Q,J,H,X,ne,Z,de=A.c,Ue=d;if(de){e:{for(V=1,H=de[0];H>=10;H/=10,V++);if(Q=B-V,Q<0)Q+=u,J=B,X=de[ne=0],Z=X/Ue[V-J-1]%10|0;else if(ne=n((Q+1)/u),ne>=de.length)if(Y){for(;de.length<=ne;de.push(0));X=Z=0,V=1,Q%=u,J=Q-u+1}else break e;else{for(X=H=de[ne],V=1;H>=10;H/=10,V++);Q%=u,J=Q-u+V,Z=J<0?0:X/Ue[V-J-1]%10|0}if(Y=Y||B<0||de[ne+1]!=null||(J<0?X:X%Ue[V-J-1]),Y=L<4?(Z||Y)&&(L==0||L==(A.s<0?3:2)):Z>5||Z==5&&(L==4||Y||L==6&&(Q>0?J>0?X/Ue[V-J]:0:de[ne-1])%10&1||L==(A.s<0?8:7)),B<1||!de[0])return de.length=0,Y?(B-=A.e+1,de[0]=Ue[(u-B%u)%u],A.e=-B||0):de[0]=A.e=0,A;if(Q==0?(de.length=ne,H=1,ne--):(de.length=ne+1,H=Ue[u-Q],de[ne]=J>0?i(X/Ue[V-J]%Ue[J])*H:0),Y)for(;;)if(ne==0){for(Q=1,J=de[0];J>=10;J/=10,Q++);for(J=de[0]+=H,H=1;J>=10;J/=10,H++);Q!=H&&(A.e++,de[0]==l&&(de[0]=1));break}else{if(de[ne]+=H,de[ne]!=l)break;de[ne--]=0,H=1}for(Q=de.length;de[--Q]===0;de.pop());}A.e>Ee?A.c=A.e=null:A.e<Se&&(A.c=[A.e=0])}return A}function Ce(A){var B,L=A.e;return L===null?A.toString():(B=_(A.c),B=L<=Oe||L>=Re?I(B,L):R(B,L,"0"),A.s<0?"-"+B:B)}return U.absoluteValue=U.abs=function(){var A=new fe(this);return A.s<0&&(A.s=1),A},U.comparedTo=function(A,B){return E(this,new fe(A,B))},U.decimalPlaces=U.dp=function(A,B){var L,Y,V,Q=this;if(A!=null)return w(A,0,g),B==null?B=_e:w(B,0,8),tt(new fe(Q),A+Q.e+1,B);if(!(L=Q.c))return null;if(Y=((V=L.length-1)-y(this.e/u))*u,V=L[V])for(;V%10==0;V/=10,Y--);return Y<0&&(Y=0),Y},U.dividedBy=U.div=function(A,B){return O(this,new fe(A,B),se,_e)},U.dividedToIntegerBy=U.idiv=function(A,B){return O(this,new fe(A,B),0,1)},U.exponentiatedBy=U.pow=function(A,B){var L,Y,V,Q,J,H,X,ne,Z,de=this;if(A=new fe(A),A.c&&!A.isInteger())throw Error(a+"Exponent not an integer: "+Ce(A));if(B!=null&&(B=new fe(B)),H=A.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!A.c||!A.c[0])return Z=new fe(Math.pow(+Ce(de),H?2-b(A):+Ce(A))),B?Z.mod(B):Z;if(X=A.s<0,B){if(B.c?!B.c[0]:!B.s)return new fe(NaN);Y=!X&&de.isInteger()&&B.isInteger(),Y&&(de=de.mod(B))}else{if(A.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||H&&de.c[1]>=24e7:de.c[0]<8e13||H&&de.c[0]<=9999975e7)))return Q=de.s<0&&b(A)?-0:0,de.e>-1&&(Q=1/Q),new fe(X?1/Q:Q);Ke&&(Q=n(Ke/u+2))}for(H?(L=new fe(.5),X&&(A.s=1),ne=b(A)):(V=Math.abs(+Ce(A)),ne=V%2),Z=new fe(le);;){if(ne){if(Z=Z.times(de),!Z.c)break;Q?Z.c.length>Q&&(Z.c.length=Q):Y&&(Z=Z.mod(B))}if(V){if(V=i(V/2),V===0)break;ne=V%2}else if(A=A.times(L),tt(A,A.e+1,1),A.e>14)ne=b(A);else{if(V=+Ce(A),V===0)break;ne=V%2}de=de.times(de),Q?de.c&&de.c.length>Q&&(de.c.length=Q):Y&&(de=de.mod(B))}return Y?Z:(X&&(Z=le.div(Z)),B?Z.mod(B):Q?tt(Z,Ke,_e,J):Z)},U.integerValue=function(A){var B=new fe(this);return A==null?A=_e:w(A,0,8),tt(B,B.e+1,A)},U.isEqualTo=U.eq=function(A,B){return E(this,new fe(A,B))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(A,B){return E(this,new fe(A,B))>0},U.isGreaterThanOrEqualTo=U.gte=function(A,B){return(B=E(this,new fe(A,B)))===1||B===0},U.isInteger=function(){return!!this.c&&y(this.e/u)>this.c.length-2},U.isLessThan=U.lt=function(A,B){return E(this,new fe(A,B))<0},U.isLessThanOrEqualTo=U.lte=function(A,B){return(B=E(this,new fe(A,B)))===-1||B===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(A,B){var L,Y,V,Q,J=this,H=J.s;if(A=new fe(A,B),B=A.s,!H||!B)return new fe(NaN);if(H!=B)return A.s=-B,J.plus(A);var X=J.e/u,ne=A.e/u,Z=J.c,de=A.c;if(!X||!ne){if(!Z||!de)return Z?(A.s=-B,A):new fe(de?J:NaN);if(!Z[0]||!de[0])return de[0]?(A.s=-B,A):new fe(Z[0]?J:_e==3?-0:0)}if(X=y(X),ne=y(ne),Z=Z.slice(),H=X-ne){for((Q=H<0)?(H=-H,V=Z):(ne=X,V=de),V.reverse(),B=H;B--;V.push(0));V.reverse()}else for(Y=(Q=(H=Z.length)<(B=de.length))?H:B,H=B=0;B<Y;B++)if(Z[B]!=de[B]){Q=Z[B]<de[B];break}if(Q&&(V=Z,Z=de,de=V,A.s=-A.s),B=(Y=de.length)-(L=Z.length),B>0)for(;B--;Z[L++]=0);for(B=l-1;Y>H;){if(Z[--Y]<de[Y]){for(L=Y;L&&!Z[--L];Z[L]=B);--Z[L],Z[Y]+=l}Z[Y]-=de[Y]}for(;Z[0]==0;Z.splice(0,1),--ne);return Z[0]?Ct(A,Z,ne):(A.s=_e==3?-1:1,A.c=[A.e=0],A)},U.modulo=U.mod=function(A,B){var L,Y,V=this;return A=new fe(A,B),!V.c||!A.s||A.c&&!A.c[0]?new fe(NaN):!A.c||V.c&&!V.c[0]?new fe(V):(Je==9?(Y=A.s,A.s=1,L=O(V,A,0,3),A.s=Y,L.s*=Y):L=O(V,A,0,Je),A=V.minus(L.times(A)),!A.c[0]&&Je==1&&(A.s=V.s),A)},U.multipliedBy=U.times=function(A,B){var L,Y,V,Q,J,H,X,ne,Z,de,Ue,qe,ct,Qt,Xt,at=this,Bt=at.c,gr=(A=new fe(A,B)).c;if(!Bt||!gr||!Bt[0]||!gr[0])return!at.s||!A.s||Bt&&!Bt[0]&&!gr||gr&&!gr[0]&&!Bt?A.c=A.e=A.s=null:(A.s*=at.s,!Bt||!gr?A.c=A.e=null:(A.c=[0],A.e=0)),A;for(Y=y(at.e/u)+y(A.e/u),A.s*=at.s,X=Bt.length,de=gr.length,X<de&&(ct=Bt,Bt=gr,gr=ct,V=X,X=de,de=V),V=X+de,ct=[];V--;ct.push(0));for(Qt=l,Xt=h,V=de;--V>=0;){for(L=0,Ue=gr[V]%Xt,qe=gr[V]/Xt|0,J=X,Q=V+J;Q>V;)ne=Bt[--J]%Xt,Z=Bt[J]/Xt|0,H=qe*ne+Z*Ue,ne=Ue*ne+H%Xt*Xt+ct[Q]+L,L=(ne/Qt|0)+(H/Xt|0)+qe*Z,ct[Q--]=ne%Qt;ct[Q]=L}return L?++Y:ct.splice(0,1),Ct(A,ct,Y)},U.negated=function(){var A=new fe(this);return A.s=-A.s||null,A},U.plus=function(A,B){var L,Y=this,V=Y.s;if(A=new fe(A,B),B=A.s,!V||!B)return new fe(NaN);if(V!=B)return A.s=-B,Y.minus(A);var Q=Y.e/u,J=A.e/u,H=Y.c,X=A.c;if(!Q||!J){if(!H||!X)return new fe(V/0);if(!H[0]||!X[0])return X[0]?A:new fe(H[0]?Y:V*0)}if(Q=y(Q),J=y(J),H=H.slice(),V=Q-J){for(V>0?(J=Q,L=X):(V=-V,L=H),L.reverse();V--;L.push(0));L.reverse()}for(V=H.length,B=X.length,V-B<0&&(L=X,X=H,H=L,B=V),V=0;B;)V=(H[--B]=H[B]+X[B]+V)/l|0,H[B]=l===H[B]?0:H[B]%l;return V&&(H=[V].concat(H),++J),Ct(A,H,J)},U.precision=U.sd=function(A,B){var L,Y,V,Q=this;if(A!=null&&A!==!!A)return w(A,1,g),B==null?B=_e:w(B,0,8),tt(new fe(Q),A,B);if(!(L=Q.c))return null;if(V=L.length-1,Y=V*u+1,V=L[V]){for(;V%10==0;V/=10,Y--);for(V=L[0];V>=10;V/=10,Y++);}return A&&Q.e+1>Y&&(Y=Q.e+1),Y},U.shiftedBy=function(A){return w(A,-f,f),this.times("1e"+A)},U.squareRoot=U.sqrt=function(){var A,B,L,Y,V,Q=this,J=Q.c,H=Q.s,X=Q.e,ne=se+4,Z=new fe("0.5");if(H!==1||!J||!J[0])return new fe(!H||H<0&&(!J||J[0])?NaN:J?Q:1/0);if(H=Math.sqrt(+Ce(Q)),H==0||H==1/0?(B=_(J),(B.length+X)%2==0&&(B+="0"),H=Math.sqrt(+B),X=y((X+1)/2)-(X<0||X%2),H==1/0?B="5e"+X:(B=H.toExponential(),B=B.slice(0,B.indexOf("e")+1)+X),L=new fe(B)):L=new fe(H+""),L.c[0]){for(X=L.e,H=X+ne,H<3&&(H=0);;)if(V=L,L=Z.times(V.plus(O(Q,V,ne,1))),_(V.c).slice(0,H)===(B=_(L.c)).slice(0,H))if(L.e<X&&--H,B=B.slice(H-3,H+1),B=="9999"||!Y&&B=="4999"){if(!Y&&(tt(V,V.e+se+2,0),V.times(V).eq(Q))){L=V;break}ne+=4,H+=4,Y=1}else{(!+B||!+B.slice(1)&&B.charAt(0)=="5")&&(tt(L,L.e+se+2,1),A=!L.times(L).eq(Q));break}}return tt(L,L.e+se+1,_e,A)},U.toExponential=function(A,B){return A!=null&&(w(A,0,g),A++),vt(this,A,B,1)},U.toFixed=function(A,B){return A!=null&&(w(A,0,g),A=A+this.e+1),vt(this,A,B)},U.toFormat=function(A,B,L){var Y,V=this;if(L==null)A!=null&&B&&typeof B=="object"?(L=B,B=null):A&&typeof A=="object"?(L=A,A=B=null):L=Et;else if(typeof L!="object")throw Error(a+"Argument not an object: "+L);if(Y=V.toFixed(A,B),V.c){var Q,J=Y.split("."),H=+L.groupSize,X=+L.secondaryGroupSize,ne=L.groupSeparator||"",Z=J[0],de=J[1],Ue=V.s<0,qe=Ue?Z.slice(1):Z,ct=qe.length;if(X&&(Q=H,H=X,X=Q,ct-=Q),H>0&&ct>0){for(Q=ct%H||H,Z=qe.substr(0,Q);Q<ct;Q+=H)Z+=ne+qe.substr(Q,H);X>0&&(Z+=ne+qe.slice(Q)),Ue&&(Z="-"+Z)}Y=de?Z+(L.decimalSeparator||"")+((X=+L.fractionGroupSize)?de.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):de):Z}return(L.prefix||"")+Y+(L.suffix||"")},U.toFraction=function(A){var B,L,Y,V,Q,J,H,X,ne,Z,de,Ue,qe=this,ct=qe.c;if(A!=null&&(H=new fe(A),!H.isInteger()&&(H.c||H.s!==1)||H.lt(le)))throw Error(a+"Argument "+(H.isInteger()?"out of range: ":"not an integer: ")+Ce(H));if(!ct)return new fe(qe);for(B=new fe(le),ne=L=new fe(le),Y=X=new fe(le),Ue=_(ct),Q=B.e=Ue.length-qe.e-1,B.c[0]=d[(J=Q%u)<0?u+J:J],A=!A||H.comparedTo(B)>0?Q>0?B:ne:H,J=Ee,Ee=1/0,H=new fe(Ue),X.c[0]=0;Z=O(H,B,0,1),V=L.plus(Z.times(Y)),V.comparedTo(A)!=1;)L=Y,Y=V,ne=X.plus(Z.times(V=ne)),X=V,B=H.minus(Z.times(V=B)),H=V;return V=O(A.minus(L),Y,0,1),X=X.plus(V.times(ne)),L=L.plus(V.times(Y)),X.s=ne.s=qe.s,Q=Q*2,de=O(ne,Y,Q,_e).minus(qe).abs().comparedTo(O(X,L,Q,_e).minus(qe).abs())<1?[ne,Y]:[X,L],Ee=J,de},U.toNumber=function(){return+Ce(this)},U.toPrecision=function(A,B){return A!=null&&w(A,1,g),vt(this,A,B,2)},U.toString=function(A){var B,L=this,Y=L.s,V=L.e;return V===null?Y?(B="Infinity",Y<0&&(B="-"+B)):B="NaN":(A==null?B=V<=Oe||V>=Re?I(_(L.c),V):R(_(L.c),V,"0"):A===10&&Ze?(L=tt(new fe(L),se+V+1,_e),B=R(_(L.c),L.e,"0")):(w(A,2,yt.length,"Base"),B=ee(R(_(L.c),V,"0"),10,A,Y,!0)),Y<0&&L.c[0]&&(B="-"+B)),B},U.valueOf=U.toJSON=function(){return Ce(this)},U._isBigNumber=!0,D!=null&&fe.set(D),fe}function y(D){var O=D|0;return D>0||D===O?O:O-1}function _(D){for(var O,ee,G=1,U=D.length,le=D[0]+"";G<U;){for(O=D[G++]+"",ee=u-O.length;ee--;O="0"+O);le+=O}for(U=le.length;le.charCodeAt(--U)===48;);return le.slice(0,U+1||1)}function E(D,O){var ee,G,U=D.c,le=O.c,se=D.s,_e=O.s,Oe=D.e,Re=O.e;if(!se||!_e)return null;if(ee=U&&!U[0],G=le&&!le[0],ee||G)return ee?G?0:-_e:se;if(se!=_e)return se;if(ee=se<0,G=Oe==Re,!U||!le)return G?0:!U^ee?1:-1;if(!G)return Oe>Re^ee?1:-1;for(_e=(Oe=U.length)<(Re=le.length)?Oe:Re,se=0;se<_e;se++)if(U[se]!=le[se])return U[se]>le[se]^ee?1:-1;return Oe==Re?0:Oe>Re^ee?1:-1}function w(D,O,ee,G){if(D<O||D>ee||D!==i(D))throw Error(a+(G||"Argument")+(typeof D=="number"?D<O||D>ee?" out of range: ":" not an integer: ":" not a primitive number: ")+String(D))}function b(D){var O=D.c.length-1;return y(D.e/u)==O&&D.c[O]%2!=0}function I(D,O){return(D.length>1?D.charAt(0)+"."+D.slice(1):D)+(O<0?"e":"e+")+O}function R(D,O,ee){var G,U;if(O<0){for(U=ee+".";++O;U+=ee);D=U+D}else if(G=D.length,++O>G){for(U=ee,O-=G;--O;U+=ee);D+=U}else O<G&&(D=D.slice(0,O)+"."+D.slice(O));return D}e=m(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Of!="undefined"&&Of.exports?Of.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(Q_)});var $_=ce((GV,Z_)=>{var X_=R0(),J_=Z_.exports;(function(){"use strict";function t(f){return f<10?"0"+f:f}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function u(f,d){var h,g,m,y,_=n,E,w=d[f],b=w!=null&&(w instanceof X_||X_.isBigNumber(w));switch(w&&typeof w=="object"&&typeof w.toJSON=="function"&&(w=w.toJSON(f)),typeof s=="function"&&(w=s.call(d,f,w)),typeof w){case"string":return b?w:l(w);case"number":return isFinite(w)?String(w):"null";case"boolean":case"null":case"bigint":return String(w);case"object":if(!w)return"null";if(n+=i,E=[],Object.prototype.toString.apply(w)==="[object Array]"){for(y=w.length,h=0;h<y;h+=1)E[h]=u(h,w)||"null";return m=E.length===0?"[]":n?`[
`+n+E.join(`,
`+n)+`
`+_+"]":"["+E.join(",")+"]",n=_,m}if(s&&typeof s=="object")for(y=s.length,h=0;h<y;h+=1)typeof s[h]=="string"&&(g=s[h],m=u(g,w),m&&E.push(l(g)+(n?": ":":")+m));else Object.keys(w).forEach(function(I){var R=u(I,w);R&&E.push(l(I)+(n?": ":":")+R)});return m=E.length===0?"{}":n?`{
`+n+E.join(`,
`+n)+`
`+_+"}":"{"+E.join(",")+"}",n=_,m}}typeof J_.stringify!="function"&&(J_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return u("",{"":f})})})()});var tw=ce((VV,ew)=>{var Lf=null,d4=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,h4=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,p4=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction!="undefined")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction!="undefined")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(_){throw{name:"SyntaxError",message:_,at:r,text:a}},l=function(_){return _&&_!==n&&s("Expected '"+_+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},u=function(){var _,E="";for(n==="-"&&(E="-",l("-"));n>="0"&&n<="9";)E+=n,l();if(n===".")for(E+=".";l()&&n>="0"&&n<="9";)E+=n;if(n==="e"||n==="E")for(E+=n,l(),(n==="-"||n==="+")&&(E+=n,l());n>="0"&&n<="9";)E+=n,l();if(_=+E,!isFinite(_))s("Bad number");else return Lf==null&&(Lf=R0()),E.length>15?e.storeAsString?E:e.useNativeBigInt?BigInt(E):new Lf(E):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(_):new Lf(_):_},f=function(){var _,E,w="",b;if(n==='"')for(var I=r;l();){if(n==='"')return r-1>I&&(w+=a.substring(I,r-1)),l(),w;if(n==="\\"){if(r-1>I&&(w+=a.substring(I,r-1)),l(),n==="u"){for(b=0,E=0;E<4&&(_=parseInt(l(),16),!!isFinite(_));E+=1)b=b*16+_;w+=String.fromCharCode(b)}else if(typeof i[n]=="string")w+=i[n];else break;I=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,m=function(){var _=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),_;for(;n;){if(_.push(g()),d(),n==="]")return l("]"),_;l(","),d()}}s("Bad array")},y=function(){var _,E=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),E;for(;n;){if(_=f(),d(),l(":"),e.strict===!0&&Object.hasOwnProperty.call(E,_)&&s('Duplicate key "'+_+'"'),d4.test(_)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?g():E[_]=g():h4.test(_)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?g():E[_]=g():E[_]=g(),d(),n==="}")return l("}"),E;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return y();case"[":return m();case'"':return f();case"-":return u();default:return n>="0"&&n<="9"?u():h()}},function(_,E){var w;return a=_+"",r=0,n=" ",w=g(),d(),n&&s("Syntax error"),typeof E=="function"?function b(I,R){var D,O,ee=I[R];return ee&&typeof ee=="object"&&Object.keys(ee).forEach(function(G){O=b(ee,G),O!==void 0?ee[G]=O:delete ee[G]}),E.call(I,R,ee)}({"":w},""):w}};ew.exports=p4});var iw=ce((KV,Pf)=>{var rw=$_().stringify,nw=tw();Pf.exports=function(t){return{parse:nw(t),stringify:rw}};Pf.exports.parse=nw();Pf.exports.stringify=rw});var Uf=ce(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.requestTimeout=Ut.resetIsAvailableCache=Ut.isAvailable=Ut.project=Ut.instance=Ut.HEADERS=Ut.HEADER_VALUE=Ut.HEADER_NAME=Ut.SECONDARY_HOST_ADDRESS=Ut.HOST_ADDRESS=Ut.BASE_PATH=void 0;var N0=Wo(),g4=iw();Ut.BASE_PATH="/computeMetadata/v1";Ut.HOST_ADDRESS="http://169.254.169.254";Ut.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ut.HEADER_NAME="Metadata-Flavor";Ut.HEADER_VALUE="Google";Ut.HEADERS=Object.freeze({[Ut.HEADER_NAME]:Ut.HEADER_VALUE});function B0(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ut.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(Ut.BASE_PATH,t).href}function m4(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}function D0(t,e,r=3,n=!1){return M(this,null,function*(){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),m4(e);try{let s=yield(n?y4:N0.request)({url:`${B0()}/${t}${i}`,headers:Object.assign({},Ut.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:aw()});if(s.headers[Ut.HEADER_NAME.toLowerCase()]!==Ut.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Ut.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return g4.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function y4(t){return M(this,null,function*(){let e=mn(Fr({},t),{url:t.url.replace(B0(),B0(Ut.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,N0.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,N0.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function v4(t){return D0("instance",t)}Ut.instance=v4;function _4(t){return D0("project",t)}Ut.project=_4;function w4(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var Mf;function E4(){return M(this,null,function*(){try{return Mf===void 0&&(Mf=D0("instance",void 0,w4(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield Mf,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Ut.isAvailable=E4;function C4(){Mf=void 0}Ut.resetIsAvailableCache=C4;function aw(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Ut.requestTimeout=aw});var lw=ce(Ff=>{"use strict";Ff.byteLength=x4;Ff.toByteArray=T4;Ff.fromByteArray=I4;var ji=[],ri=[],b4=typeof Uint8Array!="undefined"?Uint8Array:Array,O0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Fs=0,sw=O0.length;Fs<sw;++Fs)ji[Fs]=O0[Fs],ri[O0.charCodeAt(Fs)]=Fs;var Fs,sw;ri["-".charCodeAt(0)]=62;ri["_".charCodeAt(0)]=63;function ow(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function x4(t){var e=ow(t),r=e[0],n=e[1];return(r+n)*3/4-n}function S4(t,e,r){return(e+r)*3/4-r}function T4(t){var e,r=ow(t),n=r[0],i=r[1],a=new b4(S4(t,n,i)),s=0,l=i>0?n-4:n,u;for(u=0;u<l;u+=4)e=ri[t.charCodeAt(u)]<<18|ri[t.charCodeAt(u+1)]<<12|ri[t.charCodeAt(u+2)]<<6|ri[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=ri[t.charCodeAt(u)]<<2|ri[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=ri[t.charCodeAt(u)]<<10|ri[t.charCodeAt(u+1)]<<4|ri[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function A4(t){return ji[t>>18&63]+ji[t>>12&63]+ji[t>>6&63]+ji[t&63]}function k4(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(A4(n));return i.join("")}function I4(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(k4(t,s,s+a>l?l:s+a));return n===1?(e=t[r-1],i.push(ji[e>>2]+ji[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ji[e>>10]+ji[e>>4&63]+ji[e<<2&63]+"=")),i.join("")}});var cw=ce(uw=>{(function(t){function e(){}function r(u,f){if(u=u===void 0?"utf-8":u,f=f===void 0?{fatal:!1}:f,s.indexOf(u.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+u+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString("utf-8")}function i(u){var f=URL.createObjectURL(new Blob([u],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(u)}finally{URL.revokeObjectURL(f)}}function a(u){for(var f=0,d=Math.min(65536,u.length+1),h=new Uint16Array(d),g=[],m=0;;){var y=f<u.length;if(!y||m>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,m))),!y)return g.join("");u=u.subarray(f),m=f=0}if(y=u[f++],(y&128)==0)h[m++]=y;else if((y&224)==192){var _=u[f++]&63;h[m++]=(y&31)<<6|_}else if((y&240)==224){_=u[f++]&63;var E=u[f++]&63;h[m++]=(y&31)<<12|_<<6|E}else if((y&248)==240){_=u[f++]&63,E=u[f++]&63;var w=u[f++]&63;y=(y&7)<<18|_<<12|E<<6|w,65535<y&&(y-=65536,h[m++]=y>>>10&1023|55296,y=56320|y&1023),h[m++]=y}}}if(t.TextEncoder&&t.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=u.length,h=0,g=Math.max(32,d+(d>>>1)+7),m=new Uint8Array(g>>>3<<3);f<d;){var y=u.charCodeAt(f++);if(55296<=y&&56319>=y){if(f<d){var _=u.charCodeAt(f);(_&64512)==56320&&(++f,y=((y&1023)<<10)+(_&1023)+65536)}if(55296<=y&&56319>=y)continue}if(h+4>m.length&&(g+=8,g*=1+f/u.length*2,g=g>>>3<<3,_=new Uint8Array(g),_.set(m),m=_),(y&4294967168)==0)m[h++]=y;else{if((y&4294965248)==0)m[h++]=y>>>6&31|192;else if((y&4294901760)==0)m[h++]=y>>>12&15|224,m[h++]=y>>>6&63|128;else if((y&4292870144)==0)m[h++]=y>>>18&7|240,m[h++]=y>>>12&63|128,m[h++]=y>>>6&63|128;else continue;m[h++]=y&63|128}}return m.slice?m.slice(0,h):m.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return u=u instanceof Uint8Array?u:u.buffer instanceof ArrayBuffer?new Uint8Array(u.buffer):new Uint8Array(u),l(u)},t.TextEncoder=e,t.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:uw)});var fw=ce(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.BrowserCrypto=void 0;var zo=lw();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&cw();var R4=Qo(),mu=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(e){return M(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return zo.fromByteArray(new Uint8Array(n))})}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),zo.fromByteArray(r)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}verify(e,r,n){return M(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=zo.toByteArray(mu.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(e,r){return M(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return zo.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(e){let r=zo.toByteArray(mu.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return zo.fromByteArray(r)}sha256DigestHex(e){return M(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,R4.fromArrayBufferToHex)(n)})}signWithHmacSha256(e,r){return M(this,null,function*(){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};qf.BrowserCrypto=mu});var hw=ce(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.NodeCrypto=void 0;var Xo=require("crypto"),dw=class{sha256DigestBase64(e){return M(this,null,function*(){return Xo.createHash("sha256").update(e).digest("base64")})}randomBytesBase64(e){return Xo.randomBytes(e).toString("base64")}verify(e,r,n){return M(this,null,function*(){let i=Xo.createVerify("sha256");return i.update(r),i.end(),i.verify(e,n,"base64")})}sign(e,r){return M(this,null,function*(){let n=Xo.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")})}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}sha256DigestHex(e){return M(this,null,function*(){return Xo.createHash("sha256").update(e).digest("hex")})}signWithHmacSha256(e,r){return M(this,null,function*(){let n=typeof e=="string"?e:B4(e);return N4(Xo.createHmac("sha256",n).update(r).digest())})}};Gf.NodeCrypto=dw;function N4(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function B4(t){return Buffer.from(t)}});var Qo=ce($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.fromArrayBufferToHex=$a.hasBrowserCrypto=$a.createCrypto=void 0;var D4=fw(),O4=hw();function L4(){return pw()?new D4.BrowserCrypto:new O4.NodeCrypto}$a.createCrypto=L4;function pw(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}$a.hasBrowserCrypto=pw;function P4(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}$a.fromArrayBufferToHex=P4});var gw=ce(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.validate=void 0;function M4(t){let e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of e)if(t[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}Vf.validate=M4});var mw=ce((JV,U4)=>{U4.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var yu=ce(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.DefaultTransporter=void 0;var yw=Wo(),F4=gw(),vw=mw(),_w="google-api-nodejs-client",Jo=class{configure(e={}){if(e.headers=e.headers||{},typeof window=="undefined"){let r=e.headers["User-Agent"];r?r.includes(`${_w}/`)||(e.headers["User-Agent"]=`${r} ${Jo.USER_AGENT}`):e.headers["User-Agent"]=Jo.USER_AGENT;let n=`auth/${vw.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return e}request(e,r){e=this.configure(e);try{(0,F4.validate)(e)}catch(n){if(r)return r(n);throw n}if(r)(0,yw.request)(e).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,yw.request)(e).catch(n=>{throw this.processError(n)})}processError(e){let r=e.response,n=e,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};Kf.DefaultTransporter=Jo;Jo.USER_AGENT=`${_w}/${vw.version}`});var Ew=ce(($V,ww)=>{"use strict";var q4=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t];ww.exports=q4});var Zo=ce((L0,bw)=>{var jf=require("buffer"),Hi=jf.Buffer;function Cw(t,e){for(var r in t)e[r]=t[r]}Hi.from&&Hi.alloc&&Hi.allocUnsafe&&Hi.allocUnsafeSlow?bw.exports=jf:(Cw(jf,L0),L0.Buffer=qs);function qs(t,e,r){return Hi(t,e,r)}qs.prototype=Object.create(Hi.prototype);Cw(Hi,qs);qs.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Hi(t,e,r)};qs.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Hi(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};qs.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Hi(t)};qs.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return jf.SlowBuffer(t)}});var Sw=ce((e7,xw)=>{"use strict";function P0(t){var e=(t/8|0)+(t%8==0?0:1);return e}var G4={ES256:P0(256),ES384:P0(384),ES512:P0(521)};function V4(t){var e=G4[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}xw.exports=V4});var M0=ce((t7,Nw)=>{"use strict";var Hf=Zo().Buffer,Tw=Sw(),Yf=128,Aw=0,K4=32,j4=16,H4=2,kw=j4|K4|Aw<<6,Wf=H4|Aw<<6;function Y4(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Iw(t){if(Hf.isBuffer(t))return t;if(typeof t=="string")return Hf.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function W4(t,e){t=Iw(t);var r=Tw(e),n=r+1,i=t.length,a=0;if(t[a++]!==kw)throw new Error('Could not find expected "seq"');var s=t[a++];if(s===(Yf|1)&&(s=t[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(t[a++]!==Wf)throw new Error('Could not find expected "int" for "r"');var l=t[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=a;if(a+=l,t[a++]!==Wf)throw new Error('Could not find expected "int" for "s"');var f=t[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,m=Hf.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)m[a]=0;t.copy(m,a,u+Math.max(-h,0),u+l),a=r;for(var y=a;a<y+g;++a)m[a]=0;return t.copy(m,a,d+Math.max(-g,0),d+f),m=m.toString("base64"),m=Y4(m),m}function Rw(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=Yf;return i&&--n,n}function z4(t,e){t=Iw(t);var r=Tw(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=Rw(t,0,r),a=Rw(t,r,t.length),s=r-i,l=r-a,u=1+1+s+1+1+l,f=u<Yf,d=Hf.allocUnsafe((f?2:3)+u),h=0;return d[h++]=kw,f?d[h++]=u:(d[h++]=Yf|1,d[h++]=u&255),d[h++]=Wf,d[h++]=s,i<0?(d[h++]=0,h+=t.copy(d,h,0,r)):h+=t.copy(d,h,i,r),d[h++]=Wf,d[h++]=l,a<0?(d[h++]=0,t.copy(d,h,r)):t.copy(d,h,r+a),d}Nw.exports={derToJose:W4,joseToDer:z4}});var vu=ce(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.AuthClient=void 0;var Q4=require("events"),X4=yu(),Bw=class extends Q4.EventEmitter{constructor(){super(...arguments);this.transporter=new X4.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e["x-goog-user-project"]&&this.quotaProjectId&&(e["x-goog-user-project"]=this.quotaProjectId),e}};zf.AuthClient=Bw});var U0=ce(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.LoginTicket=void 0;var Dw=class{constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};Qf.LoginTicket=Dw});var Gs=ce(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.OAuth2Client=Yi.CertificateFormat=Yi.CodeChallengeMethod=void 0;var Xf=require("querystring"),J4=require("stream"),Z4=M0(),F0=Qo(),$4=vu(),eP=U0(),tP;(function(t){t.Plain="plain",t.S256="S256"})(tP=Yi.CodeChallengeMethod||(Yi.CodeChallengeMethod={}));var es;(function(t){t.PEM="PEM",t.JWK="JWK"})(es=Yi.CertificateFormat||(Yi.CertificateFormat={}));var rr=class extends $4.AuthClient{constructor(e,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=es.PEM,this.refreshTokenPromises=new Map;let i=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,e.scope instanceof Array&&(e.scope=e.scope.join(" ")),rr.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+Xf.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return M(this,null,function*(){let e=(0,F0.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(e){return M(this,null,function*(){let r=rr.GOOGLE_OAUTH2_TOKEN_URL_,n={code:e.code,client_id:e.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:e.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:e.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:Xf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(e){return M(this,null,function*(){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r})}refreshTokenNoCache(e){return M(this,null,function*(){if(!e)throw new Error("No refresh token is set.");let r=rr.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:Xf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return M(this,null,function*(){let e=yield this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}})}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return M(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(e){return M(this,null,function*(){return(yield this.getRequestMetadataAsync(e)).headers})}getRequestMetadataAsync(e){return M(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let u={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let u=l;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(e){let r=Xf.stringify({token:e});return`${rr.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(e,r){let n={url:rr.getRevokeTokenUrl(e),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return M(this,null,function*(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(e.url);e.headers=e.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(e.headers.Authorization=i.headers.Authorization),this.apiKey&&(e.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),u=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof J4.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&d&&!f&&u){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(e,!0)}}throw i}return n})}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}verifyIdTokenAsync(e){return M(this,null,function*(){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,rr.ISSUERS_,e.maxExpiry)})}getTokenInfo(e){return M(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${e}`},url:rr.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return M(this,null,function*(){let e=new Date().getTime(),r=(0,F0.hasBrowserCrypto)()?es.JWK:es.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case es.PEM:i=rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case es.JWK:i=rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case es.PEM:l=n.data;break;case es.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=s===-1?null:new Date(u.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return M(this,null,function*(){let e,r=rr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{e=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(e,r,n,i,a){return M(this,null,function*(){let s=(0,F0.createCrypto)();a||(a=rr.MAX_TOKEN_LIFETIME_SECS_);let l=e.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(I){throw I instanceof Error&&(I.message=`Can't parse token envelope: ${l[0]}': ${I.message}`),I}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(I){throw I instanceof Error&&(I.message=`Can't parse token payload '${l[0]}`),I}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=Z4.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,u,f)))throw new Error("Invalid token signature: "+e);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let y=Number(h.iat);if(isNaN(y))throw new Error("iat field using invalid format");let _=Number(h.exp);if(isNaN(_))throw new Error("exp field using invalid format");let E=new Date().getTime()/1e3;if(_>=E+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let w=y-rr.CLOCK_SKEW_SECS_,b=_+rr.CLOCK_SKEW_SECS_;if(E<w)throw new Error("Token used too early, "+E+" < "+w+": "+JSON.stringify(h));if(E>b)throw new Error("Token used too late, "+E+" > "+b+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let I=h.aud,R=!1;if(n.constructor===Array?R=n.indexOf(I)>-1:R=I===n,!R)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new eP.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return M(this,null,function*(){if(this.refreshHandler){let e=yield this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}})}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Yi.OAuth2Client=rr;rr.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";rr.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";rr.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";rr.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";rr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";rr.CLOCK_SKEW_SECS_=300;rr.MAX_TOKEN_LIFETIME_SECS_=86400;rr.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var q0=ce(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.Compute=void 0;var rP=Ew(),nP=Wo(),Ow=Uf(),iP=Gs(),Lw=class extends iP.OAuth2Client{constructor(e={}){super(e);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=rP(e.scopes)}refreshTokenNoCache(e){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield Ow.instance(a)}catch(a){throw a instanceof nP.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(e){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=yield Ow.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(e){let r=e.response;r&&r.status&&(e.code=r.status.toString(),r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};Jf.Compute=Lw});var G0=ce(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.IdTokenClient=void 0;var aP=Gs(),Pw=class extends aP.OAuth2Client{constructor(e){super();this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}getRequestMetadataAsync(e){return M(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};Zf.IdTokenClient=Pw});var V0=ce(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.getEnv=ba.clear=ba.GCPEnv=void 0;var Mw=Uf(),ts;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.NONE="NONE"})(ts=ba.GCPEnv||(ba.GCPEnv={}));var _u;function sP(){_u=void 0}ba.clear=sP;function oP(){return M(this,null,function*(){return _u||(_u=lP(),_u)})}ba.getEnv=oP;function lP(){return M(this,null,function*(){let t=ts.NONE;return uP()?t=ts.APP_ENGINE:cP()?t=ts.CLOUD_FUNCTIONS:(yield hP())?(yield dP())?t=ts.KUBERNETES_ENGINE:fP()?t=ts.CLOUD_RUN:t=ts.COMPUTE_ENGINE:t=ts.NONE,t})}function uP(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function cP(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function fP(){return!!process.env.K_CONFIGURATION}function dP(){return M(this,null,function*(){try{return yield Mw.instance("attributes/cluster-name"),!0}catch(t){return!1}})}function hP(){return M(this,null,function*(){return Mw.isAvailable()})}});var K0=ce($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.GaxiosError=void 0;var Uw=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};$f.GaxiosError=Uw});var qw=ce(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.getRetryConfig=void 0;function pP(t){return M(this,null,function*(){var e;let r=Fw(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||gP)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}ed.getRetryConfig=pP;function gP(t){let e=Fw(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function Fw(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var Yw=ce($o=>{"use strict";var td=$o&&$o.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($o,"__esModule",{value:!0});$o.Gaxios=void 0;var mP=td(v0()),yP=require("https"),vP=td(_0()),_P=td(require("querystring")),wP=td(w0()),Gw=require("url"),EP=K0(),CP=qw(),bP=SP()?window.fetch:vP.default;function xP(){return typeof window!="undefined"&&!!window}function SP(){return xP()&&!!window.fetch}function TP(){return typeof Buffer!="undefined"}function Vw(t,e){return!!Kw(t,e)}function Kw(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var j0;function jw(){let t=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return t&&(j0=k0()),t}jw();function AP(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new Gw.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function kP(t){if(!AP(t))return jw()}var Hw=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return M(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return M(this,null,function*(){let n=yield(e.fetchImplementation||bP)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return M(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new EP.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield CP.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return M(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=mP.default(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;wP.default.readable(r.data)?r.body=r.data:TP()&&Buffer.isBuffer(r.data)?(r.body=r.data,Vw(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(Kw(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Vw(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=kP(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new Gw.URL(i);r.agent=new j0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new j0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new yP.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return _P.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};$o.Gaxios=Hw});var zw=ce(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.request=Wi.instance=Wi.Gaxios=void 0;var Ww=Yw();Object.defineProperty(Wi,"Gaxios",{enumerable:!0,get:function(){return Ww.Gaxios}});var IP=K0();Object.defineProperty(Wi,"GaxiosError",{enumerable:!0,get:function(){return IP.GaxiosError}});Wi.instance=new Ww.Gaxios;function RP(t){return M(this,null,function*(){return Wi.instance.request(t)})}Wi.request=RP});var H0=ce((d7,Qw)=>{var rd=Zo().Buffer,NP=require("stream"),BP=require("util");function nd(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=rd.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=rd.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}BP.inherits(nd,NP);nd.prototype.write=function(e){this.buffer=rd.concat([this.buffer,rd.from(e)]),this.emit("data",e)};nd.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};Qw.exports=nd});var Jw=ce((h7,Xw)=>{"use strict";var wu=require("buffer").Buffer,Y0=require("buffer").SlowBuffer;Xw.exports=id;function id(t,e){if(!wu.isBuffer(t)||!wu.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}id.install=function(){wu.prototype.equal=Y0.prototype.equal=function(e){return id(this,e)}};var DP=wu.prototype.equal,OP=Y0.prototype.equal;id.restore=function(){wu.prototype.equal=DP,Y0.prototype.equal=OP}});var Q0=ce((p7,sE)=>{var LP=Jw(),el=Zo().Buffer,zi=require("crypto"),Zw=M0(),$w=require("util"),PP=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Eu="secret must be a string or buffer",tl="key must be a string or a buffer",MP="key must be a string, a buffer or an object",W0=typeof zi.createPublicKey=="function";W0&&(tl+=" or a KeyObject",Eu+="or a KeyObject");function eE(t){if(!el.isBuffer(t)&&typeof t!="string"&&(!W0||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw xi(tl)}function tE(t){if(!el.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw xi(MP)}function UP(t){if(!el.isBuffer(t)){if(typeof t=="string")return t;if(!W0||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw xi(Eu)}}function z0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rE(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function xi(t){var e=[].slice.call(arguments,1),r=$w.format.bind($w,t).apply(null,e);return new TypeError(r)}function FP(t){return el.isBuffer(t)||typeof t=="string"}function Cu(t){return FP(t)||(t=JSON.stringify(t)),t}function nE(t){return function(r,n){UP(n),r=Cu(r);var i=zi.createHmac("sha"+t,n),a=(i.update(r),i.digest("base64"));return z0(a)}}function qP(t){return function(r,n,i){var a=nE(t)(r,i);return LP(el.from(n),el.from(a))}}function iE(t){return function(r,n){tE(n),r=Cu(r);var i=zi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign(n,"base64"));return z0(a)}}function aE(t){return function(r,n,i){eE(i),r=Cu(r),n=rE(n);var a=zi.createVerify("RSA-SHA"+t);return a.update(r),a.verify(i,n,"base64")}}function GP(t){return function(r,n){tE(n),r=Cu(r);var i=zi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign({key:n,padding:zi.constants.RSA_PKCS1_PSS_PADDING,saltLength:zi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return z0(a)}}function VP(t){return function(r,n,i){eE(i),r=Cu(r),n=rE(n);var a=zi.createVerify("RSA-SHA"+t);return a.update(r),a.verify({key:i,padding:zi.constants.RSA_PKCS1_PSS_PADDING,saltLength:zi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function KP(t){var e=iE(t);return function(){var n=e.apply(null,arguments);return n=Zw.derToJose(n,"ES"+t),n}}function jP(t){var e=aE(t);return function(n,i,a){i=Zw.joseToDer(i,"ES"+t).toString("base64");var s=e(n,i,a);return s}}function HP(){return function(){return""}}function YP(){return function(e,r){return r===""}}sE.exports=function(e){var r={hs:nE,rs:iE,ps:GP,es:KP,none:HP},n={hs:qP,rs:aE,ps:VP,es:jP,none:YP},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw xi(PP,e);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var X0=ce((g7,oE)=>{var WP=require("buffer").Buffer;oE.exports=function(e){return typeof e=="string"?e:typeof e=="number"||WP.isBuffer(e)?e.toString():JSON.stringify(e)}});var hE=ce((m7,dE)=>{var zP=Zo().Buffer,lE=H0(),QP=Q0(),XP=require("stream"),uE=X0(),J0=require("util");function cE(t,e){return zP.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function JP(t,e,r){r=r||"utf8";var n=cE(uE(t),"binary"),i=cE(uE(e),r);return J0.format("%s.%s",n,i)}function fE(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,a=QP(e.alg),s=JP(e,r,i),l=a.sign(s,n);return J0.format("%s.%s",s,l)}function ad(t){var e=t.secret||t.privateKey||t.key,r=new lE(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new lE(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}J0.inherits(ad,XP);ad.prototype.sign=function(){try{var e=fE({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};ad.sign=fE;dE.exports=ad});var bE=ce((y7,CE)=>{var pE=Zo().Buffer,gE=H0(),ZP=Q0(),$P=require("stream"),mE=X0(),e6=require("util"),t6=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function r6(t){return Object.prototype.toString.call(t)==="[object Object]"}function n6(t){if(r6(t))return t;try{return JSON.parse(t)}catch(e){return}}function yE(t){var e=t.split(".",1)[0];return n6(pE.from(e,"base64").toString("binary"))}function i6(t){return t.split(".",2).join(".")}function vE(t){return t.split(".")[2]}function a6(t,e){e=e||"utf8";var r=t.split(".")[1];return pE.from(r,"base64").toString(e)}function _E(t){return t6.test(t)&&!!yE(t)}function wE(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=mE(t);var i=vE(t),a=i6(t),s=ZP(e);return s.verify(a,i,r)}function EE(t,e){if(e=e||{},t=mE(t),!_E(t))return null;var r=yE(t);if(!r)return null;var n=a6(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:vE(t)}}function rl(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new gE(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new gE(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}e6.inherits(rl,$P);rl.prototype.verify=function(){try{var e=wE(this.signature.buffer,this.algorithm,this.key.buffer),r=EE(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};rl.decode=EE;rl.isValid=_E;rl.verify=wE;CE.exports=rl});var Z0=ce(rs=>{var xE=hE(),sd=bE(),s6=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];rs.ALGORITHMS=s6;rs.sign=xE.sign;rs.verify=sd.verify;rs.decode=sd.decode;rs.isValid=sd.isValid;rs.createSign=function(e){return new xE(e)};rs.createVerify=function(e){return new sd(e)}});var gt=ce((_7,SE)=>{SE.exports={options:{usePureJavaScript:!1}}});var kE=ce((w7,AE)=>{var $0={};AE.exports=$0;var TE={};$0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=o6(t,e);else{var i=0,a=e.length,s=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var u=0,f=t[i];u<l.length;++u)f+=l[u]<<8,l[u]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};$0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=TE[e];if(!r){r=TE[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,a=e.charAt(0),s=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,f=l;u<s.length;++u)f+=s[u]*i,s[u]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function o6(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,l=t.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}});var Ft=ce((E7,BE)=>{var IE=gt(),RE=kE(),j=BE.exports=IE.util=IE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){j.nextTick=process.nextTick,typeof setImmediate=="function"?j.setImmediate=setImmediate:j.setImmediate=j.nextTick;return}if(typeof setImmediate=="function"){j.setImmediate=function(){return setImmediate.apply(void 0,arguments)},j.nextTick=function(l){return setImmediate(l)};return}if(j.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(d){d()})}};var s=l,t="forge.setImmediate",e=[];j.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=j.setImmediate;j.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}j.nextTick=j.setImmediate})();j.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;j.globalScope=function(){return j.isNodejs?global:typeof self=="undefined"?window:self}();j.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};j.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};j.isArrayBufferView=function(t){return t&&j.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function bu(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}j.ByteBuffer=eg;function eg(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(j.isArrayBuffer(t)||j.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof eg||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}j.ByteStringBuffer=eg;var l6=4096;j.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>l6&&(this.data.substr(0,1),this._constructedStringLength=0)};j.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};j.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};j.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};j.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};j.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};j.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(j.encodeUtf8(t))};j.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};j.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};j.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};j.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};j.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};j.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};j.ByteStringBuffer.prototype.putInt=function(t,e){bu(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};j.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};j.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};j.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};j.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};j.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};j.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};j.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};j.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};j.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};j.ByteStringBuffer.prototype.getInt=function(t){bu(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};j.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};j.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};j.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};j.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};j.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};j.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};j.ByteStringBuffer.prototype.copy=function(){var t=j.createBuffer(this.data);return t.read=this.read,t};j.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};j.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};j.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};j.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};j.ByteStringBuffer.prototype.toString=function(){return j.decodeUtf8(this.bytes())};function u6(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=j.isArrayBuffer(t),n=j.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}j.DataBuffer=u6;j.DataBuffer.prototype.length=function(){return this.write-this.read};j.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};j.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};j.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};j.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};j.DataBuffer.prototype.putBytes=function(t,e){if(j.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(j.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof j.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&j.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof j.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=j.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=j.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};j.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};j.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};j.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};j.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};j.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};j.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};j.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};j.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};j.DataBuffer.prototype.putInt=function(t,e){bu(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};j.DataBuffer.prototype.putSignedInt=function(t,e){return bu(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};j.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};j.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};j.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};j.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};j.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};j.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};j.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};j.DataBuffer.prototype.getInt=function(t){bu(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};j.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};j.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};j.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};j.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};j.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};j.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};j.DataBuffer.prototype.copy=function(){return new j.DataBuffer(this)};j.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};j.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};j.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};j.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};j.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return j.binary.raw.encode(e);if(t==="hex")return j.binary.hex.encode(e);if(t==="base64")return j.binary.base64.encode(e);if(t==="utf8")return j.text.utf8.decode(e);if(t==="utf16")return j.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};j.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=j.encodeUtf8(t)),new j.ByteBuffer(t)};j.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};j.xorBytes=function(t,e,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};j.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};j.bytesToHex=function(t){return j.createBuffer(t).toHex()};j.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",is=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],NE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";j.encode64=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.length;)i=t.charCodeAt(l++),a=t.charCodeAt(l++),s=t.charCodeAt(l++),r+=ns.charAt(i>>2),r+=ns.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=ns.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":ns.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};j.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,a,s=0;s<t.length;)r=is[t.charCodeAt(s++)-43],n=is[t.charCodeAt(s++)-43],i=is[t.charCodeAt(s++)-43],a=is[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(e+=String.fromCharCode((i&3)<<6|a)));return e};j.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};j.decodeUtf8=function(t){return decodeURIComponent(escape(t))};j.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:RE.encode,decode:RE.decode}};j.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};j.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};j.binary.hex.encode=j.bytesToHex;j.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(t.length&1&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n};j.binary.base64.encode=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.byteLength;)i=t[l++],a=t[l++],s=t[l++],r+=ns.charAt(i>>2),r+=ns.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=ns.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":ns.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};j.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,u=0,f=r;u<t.length;)i=is[t.charCodeAt(u++)-43],a=is[t.charCodeAt(u++)-43],s=is[t.charCodeAt(u++)-43],l=is[t.charCodeAt(u++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return e?f-r:n.subarray(0,f)};j.binary.base58.encode=function(t,e){return j.binary.baseN.encode(t,NE,e)};j.binary.base58.decode=function(t,e){return j.binary.baseN.decode(t,NE,e)};j.text={utf8:{},utf16:{}};j.text.utf8.encode=function(t,e,r){t=j.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};j.text.utf8.decode=function(t){return j.decodeUtf8(String.fromCharCode.apply(null,t))};j.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<t.length;++l)i[s++]=t.charCodeAt(l),a+=2;return e?a-r:n};j.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};j.deflate=function(t,e,r){if(e=j.decode64(t.deflate(j.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};j.inflate=function(t,e,r){var n=t.inflate(j.encode64(e)).rval;return n===null?null:j.decode64(n)};var tg=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=j.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},rg=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(j.decode64(r))),r},c6=function(t,e,r,n){var i=rg(t,e);i===null&&(i={}),i[r]=n,tg(t,e,i)},f6=function(t,e,r){var n=rg(t,e);return n!==null&&(n=r in n?n[r]:null),n},d6=function(t,e,r){var n=rg(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),tg(t,e,n)}},h6=function(t,e){tg(t,e,null)},od=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),a=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};j.setItem=function(t,e,r,n,i){od(c6,arguments,i)};j.getItem=function(t,e,r,n){return od(f6,arguments,n)};j.removeItem=function(t,e,r,n){od(d6,arguments,n)};j.clearItems=function(t,e,r){od(h6,arguments,r)};j.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};j.format=function(t){for(var e=/%./g,r,n,i=0,a=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&a.push(n),s=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(t.substring(s)),a.join("")};j.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,l=n===void 0?".":n,u=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return u+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};j.formatSize=function(t){return t>=1073741824?t=j.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=j.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=j.formatNumber(t/1024,0)+" KiB":t=j.formatNumber(t,0)+" bytes",t};j.bytesFromIP=function(t){return t.indexOf(".")!==-1?j.bytesFromIPv4(t):t.indexOf(":")!==-1?j.bytesFromIPv6(t):null};j.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=j.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};j.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=j.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=j.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};j.bytesToIP=function(t){return t.length===4?j.bytesToIPv4(t):t.length===16?j.bytesToIPv6(t):null};j.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};j.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=j.bytesToHex(t[i]+t[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=e.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};j.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in j&&!t.update)return e(null,j.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return j.cores=navigator.hardwareConcurrency,e(null,j.cores);if(typeof Worker=="undefined")return j.cores=1,e(null,j.cores);if(typeof Blob=="undefined")return j.cores=2,e(null,j.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,u){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return j.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,j.cores)}i(u,function(d,h){s.push(a(u,h)),n(s,l-1,u)})}function i(s,l){for(var u=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var m=0;m<s;++m)u[m].terminate();l(null,f)}}),u.push(h)}for(var d=0;d<s;++d)u[d].postMessage(d)}function a(s,l){for(var u=[],f=0;f<s;++f)for(var d=l[f],h=u[f]=[],g=0;g<s;++g)if(f!==g){var m=l[g];(d.st>m.st&&d.st<m.et||m.st>d.st&&m.st<d.et)&&h.push(g)}return u.reduce(function(y,_){return Math.max(y,_.length)},0)}}});var ld=ce((C7,DE)=>{var qr=gt();Ft();DE.exports=qr.cipher=qr.cipher||{};qr.cipher.algorithms=qr.cipher.algorithms||{};qr.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=qr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new qr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};qr.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=qr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new qr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};qr.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),qr.cipher.algorithms[t]=e};qr.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in qr.cipher.algorithms?qr.cipher.algorithms[t]:null};var ng=qr.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};ng.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=qr.util.createBuffer(),this.output=t.output||qr.util.createBuffer(),this.mode.start(e)};ng.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ng.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var ag=ce((b7,OE)=>{var Gr=gt();Ft();Gr.cipher=Gr.cipher||{};var St=OE.exports=Gr.cipher.modes=Gr.cipher.modes||{};St.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};St.ecb.prototype.start=function(t){};St.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};St.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};St.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};St.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};St.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};St.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=ud(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};St.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};St.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};St.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};St.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};St.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};St.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ud(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};St.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};St.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};St.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};St.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ud(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};St.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};St.ofb.prototype.decrypt=St.ofb.prototype.encrypt;St.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};St.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ud(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};St.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}cd(this._inBlock)};St.ctr.prototype.decrypt=St.ctr.prototype.encrypt;St.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};St.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Gr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Gr.util.createBuffer(t.additionalData):r=Gr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Gr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ig(n*8)))}this._inBlock=this._j0.slice(0),cd(this._inBlock),this._partialBytes=0,r=Gr.util.createBuffer(r),this._aDataLength=ig(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};St.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),cd(this._inBlock)};St.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),cd(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};St.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Gr.util.createBuffer();var n=this._aDataLength.concat(ig(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};St.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var a=t[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};St.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};St.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};St.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};St.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],u=s/n|0,f=(n-1-s%n)*e;l[u]=1<<e-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,t),e)}return a};St.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],u=i[s];i[a+s]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function ud(t,e){if(typeof t=="string"&&(t=Gr.util.createBuffer(t)),Gr.util.isArray(t)&&t.length>4){var r=t;t=Gr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Gr.util.isArray(t)){for(var i=[],a=e/4,n=0;n<a;++n)i.push(t.getInt32());t=i}return t}function cd(t){t[t.length-1]=t[t.length-1]+1&4294967295}function ig(t){return[t/4294967296|0,t&4294967295]}});var as=ce((x7,UE)=>{var nr=gt();ld();ag();Ft();UE.exports=nr.aes=nr.aes||{};nr.aes.startEncrypting=function(t,e,r,n){var i=fd({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};nr.aes.createEncryptionCipher=function(t,e){return fd({key:t,output:null,decrypt:!1,mode:e})};nr.aes.startDecrypting=function(t,e,r,n){var i=fd({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};nr.aes.createDecryptionCipher=function(t,e){return fd({key:t,output:null,decrypt:!0,mode:e})};nr.aes.Algorithm=function(t,e){sg||PE();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return lg(r._w,n,i,!1)},decrypt:function(n,i){return lg(r._w,n,i,!0)}}}),r._init=!1};nr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=nr.util.createBuffer(e);else if(nr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=nr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!nr.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!nr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=ME(e,t.decrypt&&!s),this._init=!0}};nr.aes._expandKey=function(t,e){return sg||PE(),ME(t,e)};nr.aes._updateBlock=lg;nl("AES-ECB",nr.cipher.modes.ecb);nl("AES-CBC",nr.cipher.modes.cbc);nl("AES-CFB",nr.cipher.modes.cfb);nl("AES-OFB",nr.cipher.modes.ofb);nl("AES-CTR",nr.cipher.modes.ctr);nl("AES-GCM",nr.cipher.modes.gcm);function nl(t,e){var r=function(){return new nr.aes.Algorithm(t,e)};nr.cipher.registerAlgorithm(t,r)}var sg=!1,il=4,yn,og,LE,Vs,Si;function PE(){sg=!0,LE=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;yn=new Array(256),og=new Array(256),Vs=new Array(4),Si=new Array(4);for(var e=0;e<4;++e)Vs[e]=new Array(256),Si[e]=new Array(256);for(var r=0,n=0,i,a,s,l,u,f,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,yn[r]=l,og[l]=r,u=t[l],i=t[r],a=t[i],s=t[a],f=u<<24^l<<16^l<<8^(l^u),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Vs[h][r]=f,Si[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function ME(t,e){for(var r=t.slice(0),n,i=1,a=r.length,s=a+6+1,l=il*s,u=a;u<l;++u)n=r[u-1],u%a==0?(n=yn[n>>>16&255]<<24^yn[n>>>8&255]<<16^yn[n&255]<<8^yn[n>>>24]^LE[i]<<24,i++):a>6&&u%a==4&&(n=yn[n>>>24]<<24^yn[n>>>16&255]<<16^yn[n>>>8&255]<<8^yn[n&255]),r[u]=r[u-a]^n;if(e){var f,d=Si[0],h=Si[1],g=Si[2],m=Si[3],y=r.slice(0);l=r.length;for(var u=0,_=l-il;u<l;u+=il,_-=il)if(u===0||u===l-il)y[u]=r[_],y[u+1]=r[_+3],y[u+2]=r[_+2],y[u+3]=r[_+1];else for(var E=0;E<il;++E)f=r[_+E],y[u+(3&-E)]=d[yn[f>>>24]]^h[yn[f>>>16&255]]^g[yn[f>>>8&255]]^m[yn[f&255]];r=y}return r}function lg(t,e,r,n){var i=t.length/4-1,a,s,l,u,f;n?(a=Si[0],s=Si[1],l=Si[2],u=Si[3],f=og):(a=Vs[0],s=Vs[1],l=Vs[2],u=Vs[3],f=yn);var d,h,g,m,y,_,E;d=e[0]^t[0],h=e[n?3:1]^t[1],g=e[2]^t[2],m=e[n?1:3]^t[3];for(var w=3,b=1;b<i;++b)y=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^u[m&255]^t[++w],_=a[h>>>24]^s[g>>>16&255]^l[m>>>8&255]^u[d&255]^t[++w],E=a[g>>>24]^s[m>>>16&255]^l[d>>>8&255]^u[h&255]^t[++w],m=a[m>>>24]^s[d>>>16&255]^l[h>>>8&255]^u[g&255]^t[++w],d=y,h=_,g=E;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[m&255]^t[++w],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[m>>>8&255]<<8^f[d&255]^t[++w],r[2]=f[g>>>24]<<24^f[m>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^t[++w],r[n?1:3]=f[m>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^t[++w]}function fd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=nr.cipher.createDecipher(r,t.key):n=nr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof nr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var ss=ce((S7,FE)=>{var xu=gt();xu.pki=xu.pki||{};var ug=FE.exports=xu.pki.oids=xu.oids=xu.oids||{};function we(t,e){ug[t]=e,ug[e]=t}function jt(t,e){ug[t]=e}we("1.2.840.113549.1.1.1","rsaEncryption");we("1.2.840.113549.1.1.4","md5WithRSAEncryption");we("1.2.840.113549.1.1.5","sha1WithRSAEncryption");we("1.2.840.113549.1.1.7","RSAES-OAEP");we("1.2.840.113549.1.1.8","mgf1");we("1.2.840.113549.1.1.9","pSpecified");we("1.2.840.113549.1.1.10","RSASSA-PSS");we("1.2.840.113549.1.1.11","sha256WithRSAEncryption");we("1.2.840.113549.1.1.12","sha384WithRSAEncryption");we("1.2.840.113549.1.1.13","sha512WithRSAEncryption");we("1.3.101.112","EdDSA25519");we("1.2.840.10040.4.3","dsa-with-sha1");we("1.3.14.3.2.7","desCBC");we("1.3.14.3.2.26","sha1");we("1.3.14.3.2.29","sha1WithRSASignature");we("2.16.840.1.101.3.4.2.1","sha256");we("2.16.840.1.101.3.4.2.2","sha384");we("2.16.840.1.101.3.4.2.3","sha512");we("2.16.840.1.101.3.4.2.4","sha224");we("2.16.840.1.101.3.4.2.5","sha512-224");we("2.16.840.1.101.3.4.2.6","sha512-256");we("1.2.840.113549.2.2","md2");we("1.2.840.113549.2.5","md5");we("1.2.840.113549.1.7.1","data");we("1.2.840.113549.1.7.2","signedData");we("1.2.840.113549.1.7.3","envelopedData");we("1.2.840.113549.1.7.4","signedAndEnvelopedData");we("1.2.840.113549.1.7.5","digestedData");we("1.2.840.113549.1.7.6","encryptedData");we("1.2.840.113549.1.9.1","emailAddress");we("1.2.840.113549.1.9.2","unstructuredName");we("1.2.840.113549.1.9.3","contentType");we("1.2.840.113549.1.9.4","messageDigest");we("1.2.840.113549.1.9.5","signingTime");we("1.2.840.113549.1.9.6","counterSignature");we("1.2.840.113549.1.9.7","challengePassword");we("1.2.840.113549.1.9.8","unstructuredAddress");we("1.2.840.113549.1.9.14","extensionRequest");we("1.2.840.113549.1.9.20","friendlyName");we("1.2.840.113549.1.9.21","localKeyId");we("1.2.840.113549.1.9.22.1","x509Certificate");we("1.2.840.113549.1.12.10.1.1","keyBag");we("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");we("1.2.840.113549.1.12.10.1.3","certBag");we("1.2.840.113549.1.12.10.1.4","crlBag");we("1.2.840.113549.1.12.10.1.5","secretBag");we("1.2.840.113549.1.12.10.1.6","safeContentsBag");we("1.2.840.113549.1.5.13","pkcs5PBES2");we("1.2.840.113549.1.5.12","pkcs5PBKDF2");we("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");we("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");we("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");we("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");we("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");we("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");we("1.2.840.113549.2.7","hmacWithSHA1");we("1.2.840.113549.2.8","hmacWithSHA224");we("1.2.840.113549.2.9","hmacWithSHA256");we("1.2.840.113549.2.10","hmacWithSHA384");we("1.2.840.113549.2.11","hmacWithSHA512");we("1.2.840.113549.3.7","des-EDE3-CBC");we("2.16.840.1.101.3.4.1.2","aes128-CBC");we("2.16.840.1.101.3.4.1.22","aes192-CBC");we("2.16.840.1.101.3.4.1.42","aes256-CBC");we("2.5.4.3","commonName");we("2.5.4.4","surname");we("2.5.4.5","serialNumber");we("2.5.4.6","countryName");we("2.5.4.7","localityName");we("2.5.4.8","stateOrProvinceName");we("2.5.4.9","streetAddress");we("2.5.4.10","organizationName");we("2.5.4.11","organizationalUnitName");we("2.5.4.12","title");we("2.5.4.13","description");we("2.5.4.15","businessCategory");we("2.5.4.17","postalCode");we("2.5.4.42","givenName");we("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");we("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");we("2.16.840.1.113730.1.1","nsCertType");we("2.16.840.1.113730.1.13","nsComment");jt("2.5.29.1","authorityKeyIdentifier");jt("2.5.29.2","keyAttributes");jt("2.5.29.3","certificatePolicies");jt("2.5.29.4","keyUsageRestriction");jt("2.5.29.5","policyMapping");jt("2.5.29.6","subtreesConstraint");jt("2.5.29.7","subjectAltName");jt("2.5.29.8","issuerAltName");jt("2.5.29.9","subjectDirectoryAttributes");jt("2.5.29.10","basicConstraints");jt("2.5.29.11","nameConstraints");jt("2.5.29.12","policyConstraints");jt("2.5.29.13","basicConstraints");we("2.5.29.14","subjectKeyIdentifier");we("2.5.29.15","keyUsage");jt("2.5.29.16","privateKeyUsagePeriod");we("2.5.29.17","subjectAltName");we("2.5.29.18","issuerAltName");we("2.5.29.19","basicConstraints");jt("2.5.29.20","cRLNumber");jt("2.5.29.21","cRLReason");jt("2.5.29.22","expirationDate");jt("2.5.29.23","instructionCode");jt("2.5.29.24","invalidityDate");jt("2.5.29.25","cRLDistributionPoints");jt("2.5.29.26","issuingDistributionPoint");jt("2.5.29.27","deltaCRLIndicator");jt("2.5.29.28","issuingDistributionPoint");jt("2.5.29.29","certificateIssuer");jt("2.5.29.30","nameConstraints");we("2.5.29.31","cRLDistributionPoints");we("2.5.29.32","certificatePolicies");jt("2.5.29.33","policyMappings");jt("2.5.29.34","policyConstraints");we("2.5.29.35","authorityKeyIdentifier");jt("2.5.29.36","policyConstraints");we("2.5.29.37","extKeyUsage");jt("2.5.29.46","freshestCRL");jt("2.5.29.54","inhibitAnyPolicy");we("1.3.6.1.4.1.11129.2.4.2","timestampList");we("1.3.6.1.5.5.7.1.1","authorityInfoAccess");we("1.3.6.1.5.5.7.3.1","serverAuth");we("1.3.6.1.5.5.7.3.2","clientAuth");we("1.3.6.1.5.5.7.3.3","codeSigning");we("1.3.6.1.5.5.7.3.4","emailProtection");we("1.3.6.1.5.5.7.3.8","timeStamping")});var Ti=ce((T7,GE)=>{var lr=gt();Ft();ss();var Ie=GE.exports=lr.asn1=lr.asn1||{};Ie.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ie.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ie.create=function(t,e,r,n,i){if(lr.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:t,type:e,constructed:r,composed:r||lr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=Ie.copy(l)),l};Ie.copy=function(t,e){var r;if(lr.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(Ie.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Ie.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Ie.equals=function(t,e,r){if(lr.util.isArray(t)){if(!lr.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Ie.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Ie.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};Ie.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Su(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var p6=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Su(t,e,a),n=t.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Ie.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=lr.util.createBuffer(t));var r=t.length(),n=dd(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function dd(t,e,r,n){var i;Su(t,e,2);var a=t.getByte();e--;var s=a&192,l=a&31;i=t.length();var u=p6(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=u,f}u=e}var d,h,g=(a&32)==32;if(g)if(d=[],u===void 0)for(;;){if(Su(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),d.push(dd(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),d.push(dd(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(d===void 0&&s===Ie.Class.UNIVERSAL&&l===Ie.Type.BITSTRING&&(h=t.bytes(u)),d===void 0&&n.decodeBitStrings&&s===Ie.Class.UNIVERSAL&&l===Ie.Type.BITSTRING&&u>1){var m=t.read,y=e,_=0;if(l===Ie.Type.BITSTRING&&(Su(t,e,1),_=t.getByte(),e--),_===0)try{i=t.length();var E={strict:!0,decodeBitStrings:!0},w=dd(t,e,r+1,E),b=i-t.length();e-=b,l==Ie.Type.BITSTRING&&b++;var I=w.tagClass;b===u&&(I===Ie.Class.UNIVERSAL||I===Ie.Class.CONTEXT_SPECIFIC)&&(d=[w])}catch(D){}d===void 0&&(t.read=m,e=y)}if(d===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===Ie.Type.BMPSTRING)for(d="";u>0;u-=2)Su(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(u),e-=u}var R=h===void 0?null:{bitStringContents:h};return Ie.create(s,l,g,d,R)}Ie.toDer=function(t){var e=lr.util.createBuffer(),r=t.tagClass|t.type,n=lr.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=Ie.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&n.putBuffer(Ie.toDer(t.value[a]))}else if(t.type===Ie.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)n.putInt16(t.value.charCodeAt(a));else t.type===Ie.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)e.putByte(l.charCodeAt(a))}return e.putBuffer(n),e};Ie.oidToDer=function(t){var e=t.split("."),r=lr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,a,s,l=2;l<e.length;++l){n=!0,i=[],a=parseInt(e[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};Ie.derToOid=function(t){var e;typeof t=="string"&&(t=lr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};Ie.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),f=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,0),f&&(u=t.charAt(f),u==="+"||u==="-")){var d=parseInt(t.substr(f+1,2),10),h=parseInt(t.substr(f+4,2),10),g=d*60+h;g*=6e4,u==="+"?e.setTime(+e-g):e.setTime(+e+g)}return e};Ie.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,f=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var h=t.length-5,g=t.charAt(h);if(g==="+"||g==="-"){var m=parseInt(t.substr(h+1,2),10),y=parseInt(t.substr(h+4,2),10);f=m*60+y,f*=6e4,g==="+"&&(f*=-1),d=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,u),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(a,s,l,u)),e};Ie.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ie.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ie.integerToDer=function(t){var e=lr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Ie.derToInteger=function(t){typeof t=="string"&&(t=lr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Ie.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&lr.util.isArray(e.value))for(var a=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[a]&&(i=Ie.validate(t.value[a],e.value[s],r,n),i?++a:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var qE=/[^\\u0000-\\u00ff]/;Ie.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",a=0;a<e*r;++a)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case Ie.Class.UNIVERSAL:n+="Universal:";break;case Ie.Class.APPLICATION:n+="Application:";break;case Ie.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Ie.Class.PRIVATE:n+="Private:";break}if(t.tagClass===Ie.Class.UNIVERSAL)switch(n+=t.type,t.type){case Ie.Type.NONE:n+=" (None)";break;case Ie.Type.BOOLEAN:n+=" (Boolean)";break;case Ie.Type.INTEGER:n+=" (Integer)";break;case Ie.Type.BITSTRING:n+=" (Bit string)";break;case Ie.Type.OCTETSTRING:n+=" (Octet string)";break;case Ie.Type.NULL:n+=" (Null)";break;case Ie.Type.OID:n+=" (Object Identifier)";break;case Ie.Type.ODESC:n+=" (Object Descriptor)";break;case Ie.Type.EXTERNAL:n+=" (External or Instance of)";break;case Ie.Type.REAL:n+=" (Real)";break;case Ie.Type.ENUMERATED:n+=" (Enumerated)";break;case Ie.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Ie.Type.UTF8:n+=" (UTF8)";break;case Ie.Type.ROID:n+=" (Relative Object Identifier)";break;case Ie.Type.SEQUENCE:n+=" (Sequence)";break;case Ie.Type.SET:n+=" (Set)";break;case Ie.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Ie.Type.IA5String:n+=" (IA5String (ASCII))";break;case Ie.Type.UTCTIME:n+=" (UTC time)";break;case Ie.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Ie.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,l="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,l+=Ie.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",t.type===Ie.Type.OID){var u=Ie.derToOid(t.value);n+=u,lr.pki&&lr.pki.oids&&u in lr.pki.oids&&(n+=" ("+lr.pki.oids[u]+") ")}if(t.type===Ie.Type.INTEGER)try{n+=Ie.derToInteger(t.value)}catch(d){n+="0x"+lr.util.bytesToHex(t.value)}else if(t.type===Ie.Type.BITSTRING){if(t.value.length>1?n+="0x"+lr.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(t.type===Ie.Type.OCTETSTRING)qE.test(t.value)||(n+="("+t.value+") "),n+="0x"+lr.util.bytesToHex(t.value);else if(t.type===Ie.Type.UTF8)try{n+=lr.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+lr.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===Ie.Type.PRINTABLESTRING||t.type===Ie.Type.IA5String?n+=t.value:qE.test(t.value)?n+="0x"+lr.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Qi=ce((A7,VE)=>{var hd=gt();VE.exports=hd.md=hd.md||{};hd.md.algorithms=hd.md.algorithms||{}});var al=ce((k7,KE)=>{var xa=gt();Qi();Ft();var g6=KE.exports=xa.hmac=xa.hmac||{};g6.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in xa.md.algorithms)e=xa.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=xa.util.createBuffer(s);else if(xa.util.isArray(s)){var l=s;s=xa.util.createBuffer();for(var u=0;u<l.length;++u)s.putByte(l[u])}var f=s.length();f>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=xa.util.createBuffer(),n=xa.util.createBuffer(),f=s.length();for(var u=0;u<f;++u){var l=s.at(u);r.putByte(54^l),n.putByte(92^l)}if(f<e.blockLength)for(var l=e.blockLength-f,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(a){e.update(a)},i.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(n),e.update(a),e.digest()},i.digest=i.getMac,i}});var gd=ce((I7,WE)=>{var Xi=gt();Qi();Ft();var jE=WE.exports=Xi.md5=Xi.md5||{};Xi.md.md5=Xi.md.algorithms.md5=jE;jE.create=function(){HE||m6();var t=null,e=Xi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Xi.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Xi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),YE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Xi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(cg.substr(0,n.blockLength-s));for(var l,u=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+u,u=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};YE(d,r,i);var h=Xi.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var cg=null,pd=null,Tu=null,sl=null,HE=!1;function m6(){cg=String.fromCharCode(128),cg+=Xi.util.fillString(String.fromCharCode(0),64),pd=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Tu=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],sl=new Array(64);for(var t=0;t<64;++t)sl[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);HE=!0}function YE(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),u=l^a&(s^l),n=i+u+sl[d]+e[d],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)u=s^l&(a^s),n=i+u+sl[d]+e[pd[d]],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)u=a^s^l,n=i+u+sl[d]+e[pd[d]],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)u=s^(a|~l),n=i+u+sl[d]+e[pd[d]],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,h-=64}}});var Ks=ce((R7,QE)=>{var md=gt();Ft();var zE=QE.exports=md.pem=md.pem||{};zE.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=yd(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=yd(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=yd(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=yd(t.headers[i]);return t.procType&&(r+=`\r
`),r+=md.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};zE.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(t),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:md.util.decode64(a[3])};if(e.push(l),!!a[2]){for(var u=a[2].split(i),f=0;a&&f<u.length;){for(var d=u[f].replace(/\s+$/,""),h=f+1;h<u.length;++h){var g=u[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var m={name:a[1],values:[]},y=a[2].split(","),_=0;_<y.length;++_)m.values.push(y6(y[_]));if(l.procType)if(!l.contentDomain&&m.name==="Content-Domain")l.contentDomain=y[0]||"";else if(!l.dekInfo&&m.name==="DEK-Info"){if(m.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:y[0],parameters:y[1]||null}}else l.headers.push(m);else{if(m.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(m.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:y[0],type:y[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function yd(t){for(var e=t.name+": ",r=[],n=function(u,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<e.length;++i,++a)if(a>65&&s!==-1){var l=e[s];l===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+l+e.substr(s+1),a=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function y6(t){return t.replace(/^\s+/,"")}});var Au=ce((N7,JE)=>{var dr=gt();ld();ag();Ft();JE.exports=dr.des=dr.des||{};dr.des.startEncrypting=function(t,e,r,n){var i=vd({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};dr.des.createEncryptionCipher=function(t,e){return vd({key:t,output:null,decrypt:!1,mode:e})};dr.des.startDecrypting=function(t,e,r,n){var i=vd({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};dr.des.createDecryptionCipher=function(t,e){return vd({key:t,output:null,decrypt:!0,mode:e})};dr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return XE(r._keys,n,i,!1)},decrypt:function(n,i){return XE(r._keys,n,i,!0)}}}),r._init=!1};dr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=dr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=T6(e),this._init=!0}};Ji("DES-ECB",dr.cipher.modes.ecb);Ji("DES-CBC",dr.cipher.modes.cbc);Ji("DES-CFB",dr.cipher.modes.cfb);Ji("DES-OFB",dr.cipher.modes.ofb);Ji("DES-CTR",dr.cipher.modes.ctr);Ji("3DES-ECB",dr.cipher.modes.ecb);Ji("3DES-CBC",dr.cipher.modes.cbc);Ji("3DES-CFB",dr.cipher.modes.cfb);Ji("3DES-OFB",dr.cipher.modes.ofb);Ji("3DES-CTR",dr.cipher.modes.ctr);function Ji(t,e){var r=function(){return new dr.des.Algorithm(t,e)};dr.cipher.registerAlgorithm(t,r)}var v6=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],_6=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],w6=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],E6=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],C6=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],b6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],x6=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],S6=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function T6(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],m=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=t.length()>8?3:1,E=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,I,R=0;R<_;R++){var D=t.getInt32(),O=t.getInt32();I=(D>>>4^O)&252645135,O^=I,D^=I<<4,I=(O>>>-16^D)&65535,D^=I,O^=I<<-16,I=(D>>>2^O)&858993459,O^=I,D^=I<<2,I=(O>>>-16^D)&65535,D^=I,O^=I<<-16,I=(D>>>1^O)&1431655765,O^=I,D^=I<<1,I=(O>>>8^D)&16711935,D^=I,O^=I<<8,I=(D>>>1^O)&1431655765,O^=I,D^=I<<1,I=D<<8|O>>>20&240,D=O<<24|O<<8&16711680|O>>>8&65280|O>>>24&240,O=I;for(var ee=0;ee<w.length;++ee){w[ee]?(D=D<<2|D>>>26,O=O<<2|O>>>26):(D=D<<1|D>>>27,O=O<<1|O>>>27),D&=-15,O&=-15;var G=e[D>>>28]|r[D>>>24&15]|n[D>>>20&15]|i[D>>>16&15]|a[D>>>12&15]|s[D>>>8&15]|l[D>>>4&15],U=u[O>>>28]|f[O>>>24&15]|d[O>>>20&15]|h[O>>>16&15]|g[O>>>12&15]|m[O>>>8&15]|y[O>>>4&15];I=(U>>>16^G)&65535,E[b++]=G^I,E[b++]=U^I<<16}}return E}function XE(t,e,r,n){var i=t.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=e[0],u=e[1];s=(l>>>4^u)&252645135,u^=s,l^=s<<4,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var m=u^t[g],y=(u>>>4|u<<28)^t[g+1];s=l,l=u,u=s^(_6[m>>>24&63]|E6[m>>>16&63]|b6[m>>>8&63]|S6[m&63]|v6[y>>>24&63]|w6[y>>>16&63]|C6[y>>>8&63]|x6[y&63])}s=l,l=u,u=s}l=l>>>1|l<<31,u=u>>>1|u<<31,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(l>>>4^u)&252645135,u^=s,l^=s<<4,r[0]=l,r[1]=u}function vd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=dr.cipher.createDecipher(r,t.key):n=dr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof dr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var _d=ce((B7,ZE)=>{var vn=gt();al();Qi();Ft();var A6=vn.pkcs5=vn.pkcs5||{},Sa;vn.util.isNodejs&&!vn.options.usePureJavaScript&&(Sa=require("crypto"));ZE.exports=vn.pbkdf2=A6.pbkdf2=function(t,e,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),vn.util.isNodejs&&!vn.options.usePureJavaScript&&Sa.pbkdf2&&(i===null||typeof i!="object")&&(Sa.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?Sa.pbkdf2Sync.length===4?Sa.pbkdf2(t,e,r,n,function(I,R){if(I)return a(I);a(null,R.toString("binary"))}):Sa.pbkdf2(t,e,r,n,i,function(I,R){if(I)return a(I);a(null,R.toString("binary"))}):Sa.pbkdf2Sync.length===4?Sa.pbkdf2Sync(t,e,r,n).toString("binary"):Sa.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in vn.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=vn.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var u=Math.ceil(n/s),f=n-(u-1)*s,d=vn.hmac.create();d.start(i,t);var h="",g,m,y;if(!a){for(var _=1;_<=u;++_){d.start(null,null),d.update(e),d.update(vn.util.int32ToBytes(_)),g=y=d.digest().getBytes();for(var E=2;E<=r;++E)d.start(null,null),d.update(y),m=d.digest().getBytes(),g=vn.util.xorBytes(g,m,s),y=m;h+=_<u?g:g.substr(0,f)}return h}var _=1,E;function w(){if(_>u)return a(null,h);d.start(null,null),d.update(e),d.update(vn.util.int32ToBytes(_)),g=y=d.digest().getBytes(),E=2,b()}function b(){if(E<=r)return d.start(null,null),d.update(y),m=d.digest().getBytes(),g=vn.util.xorBytes(g,m,s),y=m,++E,vn.util.setImmediate(b);h+=_<u?g:g.substr(0,f),++_,w()}w()}});var dg=ce((D7,nC)=>{var Zi=gt();Qi();Ft();var $E=nC.exports=Zi.sha256=Zi.sha256||{};Zi.md.sha256=Zi.md.algorithms.sha256=$E;$E.create=function(){eC||k6();var t=null,e=Zi.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Zi.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Zi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),rC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Zi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(fg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};rC(h,r,i);var g=Zi.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var fg=null,eC=!1,tC=null;function k6(){fg=String.fromCharCode(128),fg+=Zi.util.fillString(String.fromCharCode(0),64),tC=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],eC=!0}function rC(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,m,y,_,E,w,b=r.length();b>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(d=t.h0,h=t.h1,g=t.h2,m=t.h3,y=t.h4,_=t.h5,E=t.h6,w=t.h7,f=0;f<64;++f)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),l=E^y&(_^E),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),u=d&h|g&(d^h),n=w+s+l+tC[f]+e[f],i=a+u,w=E,E=_,_=y,y=m+n>>>0,m=g,g=h,h=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+h|0,t.h2=t.h2+g|0,t.h3=t.h3+m|0,t.h4=t.h4+y|0,t.h5=t.h5+_|0,t.h6=t.h6+E|0,t.h7=t.h7+w|0,b-=64}}});var hg=ce((O7,iC)=>{var $i=gt();Ft();var wd=null;$i.util.isNodejs&&!$i.options.usePureJavaScript&&!process.versions["node-webkit"]&&(wd=require("crypto"));var I6=iC.exports=$i.prng=$i.prng||{};I6.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,d){if(!d)return e.generateSync(f);var h=e.plugin.cipher,g=e.plugin.increment,m=e.plugin.formatKey,y=e.plugin.formatSeed,_=$i.util.createBuffer();e.key=null,E();function E(w){if(w)return d(w);if(_.length()>=f)return d(null,_.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return $i.util.nextTick(function(){a(E)});var b=h(e.key,e.seed);e.generated+=b.length,_.putBytes(b),e.key=m(h(e.key,g(e.seed))),e.seed=y(h(e.key,e.seed)),$i.util.setImmediate(E)}},e.generateSync=function(f){var d=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,m=e.plugin.formatSeed;e.key=null;for(var y=$i.util.createBuffer();y.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&s();var _=d(e.key,e.seed);e.generated+=_.length,y.putBytes(_),e.key=g(d(e.key,h(e.seed))),e.seed=m(d(e.key,e.seed))}return y.getBytes(f)};function a(f){if(e.pools[0].messageLength>=32)return l(),f();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(h,g){if(h)return f(h);e.collect(g),l(),f()})}function s(){if(e.pools[0].messageLength>=32)return l();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),l()}function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var d=1,h=0;h<32;++h)e.reseeds%d==0&&(f.update(e.pools[h].digest().getBytes()),e.pools[h].start()),d=d<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var g=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(g),e.generated=0}function u(f){var d=null,h=$i.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(D){return g.getRandomValues(D)});var m=$i.util.createBuffer();if(d)for(;m.length()<f;){var y=Math.max(1,Math.min(f-m.length(),65536)/4),_=new Uint32Array(Math.floor(y));try{d(_);for(var E=0;E<_.length;++E)m.putInt32(_[E])}catch(D){if(!(typeof QuotaExceededError!="undefined"&&D instanceof QuotaExceededError))throw D}}if(m.length()<f)for(var w,b,I,R=Math.floor(Math.random()*65536);m.length()<f;){b=16807*(R&65535),w=16807*(R>>16),b+=(w&32767)<<16,b+=w>>15,b=(b&2147483647)+(b>>31),R=b&4294967295;for(var E=0;E<3;++E)I=R>>>(E<<3),I^=Math.floor(Math.random()*256),m.putByte(I&255)}return m.getBytes(f)}return wd?(e.seedFile=function(f,d){wd.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},e.seedFileSync=function(f){return wd.randomBytes(f).toString()}):(e.seedFile=function(f,d){try{d(null,u(f))}catch(h){d(h)}},e.seedFileSync=u),e.collect=function(f){for(var d=f.length,h=0;h<d;++h)e.pools[e.pool].update(f.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);e.collect(h)},e.registerWorker=function(f){if(f===self)e.seedFile=function(h,g){function m(y){var _=y.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",m),g(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",m),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&e.seedFile(g.forge.prng.needed,function(m,y){f.postMessage({forge:{prng:{err:m,bytes:y}}})})};f.addEventListener("message",d)}},e}});var ni=ce((L7,pg)=>{var Vr=gt();as();dg();hg();Ft();(function(){if(Vr.random&&Vr.random.getBytes){pg.exports=Vr.random;return}(function(t){var e={},r=new Array(4),n=Vr.util.createBuffer();e.formatKey=function(h){var g=Vr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),Vr.aes._expandKey(h,!1)},e.formatSeed=function(h){var g=Vr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},e.cipher=function(h,g){return Vr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=Vr.md.sha256;function i(){var h=Vr.prng.create(e);return h.getBytes=function(g,m){return h.generate(g,m)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=Vr.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(s=function(h){return u.getRandomValues(h)}),Vr.options.usePureJavaScript||!Vr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}t&&(t().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),t().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!Vr.random)Vr.random=a;else for(var d in a)Vr.random[d]=a[d];Vr.random.createInstance=i,pg.exports=Vr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var mg=ce((P7,oC)=>{var Rn=gt();Ft();var gg=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],aC=[1,2,3,5],R6=function(t,e){return t<<e&65535|(t&65535)>>16-e},N6=function(t,e){return(t&65535)>>e|t<<16-e&65535};oC.exports=Rn.rc2=Rn.rc2||{};Rn.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Rn.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(gg[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,gg[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,gg[r.at(l+1)^r.at(l+a)]);return r};var sC=function(t,e,r){var n=!1,i=null,a=null,s=null,l,u,f,d,h=[];for(t=Rn.rc2.expandKey(t,e),f=0;f<64;f++)h.push(t.getInt16Le());r?(l=function(y){for(f=0;f<4;f++)y[f]+=h[d]+(y[(f+3)%4]&y[(f+2)%4])+(~y[(f+3)%4]&y[(f+1)%4]),y[f]=R6(y[f],aC[f]),d++},u=function(y){for(f=0;f<4;f++)y[f]+=h[y[(f+3)%4]&63]}):(l=function(y){for(f=3;f>=0;f--)y[f]=N6(y[f],aC[f]),y[f]-=h[d]+(y[(f+3)%4]&y[(f+2)%4])+(~y[(f+3)%4]&y[(f+1)%4]),d--},u=function(y){for(f=3;f>=0;f--)y[f]-=h[y[(f+3)%4]&63]});var g=function(y){var _=[];for(f=0;f<4;f++){var E=i.getInt16Le();s!==null&&(r?E^=s.getInt16Le():s.putInt16Le(E)),_.push(E&65535)}d=r?0:63;for(var w=0;w<y.length;w++)for(var b=0;b<y[w][0];b++)y[w][1](_);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(_[f]):_[f]^=s.getInt16Le()),a.putInt16Le(_[f])},m=null;return m={start:function(y,_){y&&typeof y=="string"&&(y=Rn.util.createBuffer(y)),n=!1,i=Rn.util.createBuffer(),a=_||new Rn.util.createBuffer,s=y,m.output=a},update:function(y){for(n||i.putBuffer(y);i.length()>=8;)g([[5,l],[1,u],[6,l],[1,u],[5,l]])},finish:function(y){var _=!0;if(r)if(y)_=y(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(_&&(n=!0,m.update()),!r&&(_=i.length()===0,_))if(y)_=y(8,a,!r);else{var w=a.length(),b=a.at(w-1);b>w?_=!1:a.truncate(b)}return _}},m};Rn.rc2.startEncrypting=function(t,e,r){var n=Rn.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Rn.rc2.createEncryptionCipher=function(t,e){return sC(t,e,!0)};Rn.rc2.startDecrypting=function(t,e,r){var n=Rn.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Rn.rc2.createDecryptionCipher=function(t,e){return sC(t,e,!1)}});var Iu=ce((M7,gC)=>{var yg=gt();gC.exports=yg.jsbn=yg.jsbn||{};var Ta,B6=244837814094590,lC=(B6&16777215)==15715070;function ge(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}yg.jsbn.BigInteger=ge;function qt(){return new ge(null)}function D6(t,e,r,n,i,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function O6(t,e,r,n,i,a){for(var s=e&32767,l=e>>15;--a>=0;){var u=this.data[t]&32767,f=this.data[t++]>>15,d=l*u+f*s;u=s*u+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=u&1073741823}return i}function uC(t,e,r,n,i,a){for(var s=e&16383,l=e>>14;--a>=0;){var u=this.data[t]&16383,f=this.data[t++]>>14,d=l*u+f*s;u=s*u+((d&16383)<<14)+r.data[n]+i,i=(u>>28)+(d>>14)+l*f,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(ge.prototype.am=uC,Ta=28):lC&&navigator.appName=="Microsoft Internet Explorer"?(ge.prototype.am=O6,Ta=30):lC&&navigator.appName!="Netscape"?(ge.prototype.am=D6,Ta=26):(ge.prototype.am=uC,Ta=28);ge.prototype.DB=Ta;ge.prototype.DM=(1<<Ta)-1;ge.prototype.DV=1<<Ta;var vg=52;ge.prototype.FV=Math.pow(2,vg);ge.prototype.F1=vg-Ta;ge.prototype.F2=2*Ta-vg;var L6="0123456789abcdefghijklmnopqrstuvwxyz",Ed=new Array,ol,ii;ol="0".charCodeAt(0);for(ii=0;ii<=9;++ii)Ed[ol++]=ii;ol="a".charCodeAt(0);for(ii=10;ii<36;++ii)Ed[ol++]=ii;ol="A".charCodeAt(0);for(ii=10;ii<36;++ii)Ed[ol++]=ii;function cC(t){return L6.charAt(t)}function fC(t,e){var r=Ed[t.charCodeAt(e)];return r==null?-1:r}function P6(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function M6(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function os(t){var e=qt();return e.fromInt(t),e}function U6(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,a=0;--n>=0;){var s=r==8?t[n]&255:fC(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ge.ZERO.subTo(this,this)}function F6(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function q6(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=cC(n));s>=0;)l<e?(n=(this.data[s]&(1<<l)-1)<<e-l,n|=this.data[--s]>>(l+=this.DB-e)):(n=this.data[s]>>(l-=e)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=cC(n));return i?a:"0"}function G6(){var t=qt();return ge.ZERO.subTo(this,t),t}function V6(){return this.s<0?this.negate():this}function K6(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Cd(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function j6(){return this.t<=0?0:this.DB*(this.t-1)+Cd(this.data[this.t-1]^this.s&this.DM)}function H6(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Y6(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function W6(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)e.data[l]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function z6(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function Q6(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function X6(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ge.ZERO.subTo(e,e)}function J6(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Z6(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=qt());var a=qt(),s=this.s,l=t.s,u=this.DB-Cd(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,m=(1<<this.F1)/h,y=1<<this.F2,_=r.t,E=_-f,w=e==null?qt():e;for(a.dlShiftTo(E,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),ge.ONE.dlShiftTo(f,w),w.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--E>=0;){var b=r.data[--_]==d?this.DM:Math.floor(r.data[_]*g+(r.data[_-1]+y)*m);if((r.data[_]+=a.am(0,b,r,E,0,f))<b)for(a.dlShiftTo(E,w),r.subTo(w,r);r.data[_]<--b;)r.subTo(w,r)}e!=null&&(r.drShiftTo(f,e),s!=l&&ge.ZERO.subTo(e,e)),r.t=f,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&ge.ZERO.subTo(r,r)}}}function $6(t){var e=qt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ge.ZERO)>0&&t.subTo(e,e),e}function js(t){this.m=t}function e5(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function t5(t){return t}function r5(t){t.divRemTo(this.m,null,t)}function n5(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function i5(t,e){t.squareTo(e),this.reduce(e)}js.prototype.convert=e5;js.prototype.revert=t5;js.prototype.reduce=r5;js.prototype.mulTo=n5;js.prototype.sqrTo=i5;function a5(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Hs(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function s5(t){var e=qt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ge.ZERO)>0&&this.m.subTo(e,e),e}function o5(t){var e=qt();return t.copyTo(e),this.reduce(e),e}function l5(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function u5(t,e){t.squareTo(e),this.reduce(e)}function c5(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Hs.prototype.convert=s5;Hs.prototype.revert=o5;Hs.prototype.reduce=l5;Hs.prototype.mulTo=c5;Hs.prototype.sqrTo=u5;function f5(){return(this.t>0?this.data[0]&1:this.s)==0}function d5(t,e){if(t>4294967295||t<1)return ge.ONE;var r=qt(),n=qt(),i=e.convert(this),a=Cd(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function h5(t,e){var r;return t<256||e.isEven()?r=new js(e):r=new Hs(e),this.exp(t,r)}ge.prototype.copyTo=P6;ge.prototype.fromInt=M6;ge.prototype.fromString=U6;ge.prototype.clamp=F6;ge.prototype.dlShiftTo=H6;ge.prototype.drShiftTo=Y6;ge.prototype.lShiftTo=W6;ge.prototype.rShiftTo=z6;ge.prototype.subTo=Q6;ge.prototype.multiplyTo=X6;ge.prototype.squareTo=J6;ge.prototype.divRemTo=Z6;ge.prototype.invDigit=a5;ge.prototype.isEven=f5;ge.prototype.exp=d5;ge.prototype.toString=q6;ge.prototype.negate=G6;ge.prototype.abs=V6;ge.prototype.compareTo=K6;ge.prototype.bitLength=j6;ge.prototype.mod=$6;ge.prototype.modPowInt=h5;ge.ZERO=os(0);ge.ONE=os(1);function p5(){var t=qt();return this.copyTo(t),t}function g5(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function m5(){return this.t==0?this.s:this.data[0]<<24>>24}function y5(){return this.t==0?this.s:this.data[0]<<16>>16}function v5(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function _5(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function w5(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=os(r),i=qt(),a=qt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(t)+s}function E5(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,a=0,s=0,l=0;l<t.length;++l){var u=fC(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&ge.ZERO.subTo(this,this)}function C5(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ge.ONE.shiftLeft(t-1),_g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ge.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function b5(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function x5(t){return this.compareTo(t)==0}function S5(t){return this.compareTo(t)<0?this:t}function T5(t){return this.compareTo(t)>0?this:t}function A5(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function k5(t,e){return t&e}function I5(t){var e=qt();return this.bitwiseTo(t,k5,e),e}function _g(t,e){return t|e}function R5(t){var e=qt();return this.bitwiseTo(t,_g,e),e}function dC(t,e){return t^e}function N5(t){var e=qt();return this.bitwiseTo(t,dC,e),e}function hC(t,e){return t&~e}function B5(t){var e=qt();return this.bitwiseTo(t,hC,e),e}function D5(){for(var t=qt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function O5(t){var e=qt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function L5(t){var e=qt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function P5(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function M5(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+P5(this.data[t]);return this.s<0?this.t*this.DB:-1}function U5(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function F5(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=U5(this.data[r]^e);return t}function q5(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function G5(t,e){var r=ge.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function V5(t){return this.changeBit(t,_g)}function K5(t){return this.changeBit(t,hC)}function j5(t){return this.changeBit(t,dC)}function H5(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Y5(t){var e=qt();return this.addTo(t,e),e}function W5(t){var e=qt();return this.subTo(t,e),e}function z5(t){var e=qt();return this.multiplyTo(t,e),e}function Q5(t){var e=qt();return this.divRemTo(t,e,null),e}function X5(t){var e=qt();return this.divRemTo(t,null,e),e}function J5(t){var e=qt(),r=qt();return this.divRemTo(t,e,r),new Array(e,r)}function Z5(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function $5(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function ku(){}function pC(t){return t}function eM(t,e,r){t.multiplyTo(e,r)}function tM(t,e){t.squareTo(e)}ku.prototype.convert=pC;ku.prototype.revert=pC;ku.prototype.mulTo=eM;ku.prototype.sqrTo=tM;function rM(t){return this.exp(t,new ku)}function nM(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function iM(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function ll(t){this.r2=qt(),this.q3=qt(),ge.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function aM(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=qt();return t.copyTo(e),this.reduce(e),e}function sM(t){return t}function oM(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function lM(t,e){t.squareTo(e),this.reduce(e)}function uM(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ll.prototype.convert=aM;ll.prototype.revert=sM;ll.prototype.reduce=oM;ll.prototype.mulTo=uM;ll.prototype.sqrTo=lM;function cM(t,e){var r=t.bitLength(),n,i=os(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new js(e):e.isEven()?a=new ll(e):a=new Hs(e);var s=new Array,l=3,u=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=qt();for(a.sqrTo(s[1],d);l<=f;)s[l]=qt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=t.t-1,g,m=!0,y=qt(),_;for(r=Cd(t.data[h])-1;h>=0;){for(r>=u?g=t.data[h]>>r-u&f:(g=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(g|=t.data[h-1]>>this.DB+r-u)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),m)s[g].copyTo(i),m=!1;else{for(;l>1;)a.sqrTo(i,y),a.sqrTo(y,i),l-=2;l>0?a.sqrTo(i,y):(_=i,i=y,y=_),a.mulTo(y,s[g],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)a.sqrTo(i,y),_=i,i=y,y=_,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function fM(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function dM(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function hM(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ge.ZERO;for(var r=t.clone(),n=this.clone(),i=os(1),a=os(0),s=os(0),l=os(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),e&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ge.ONE)!=0)return ge.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}var Ai=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],pM=(1<<26)/Ai[Ai.length-1];function gM(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ai[Ai.length-1]){for(e=0;e<Ai.length;++e)if(r.data[0]==Ai[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ai.length;){for(var n=Ai[e],i=e+1;i<Ai.length&&n<pM;)n*=Ai[i++];for(n=r.modInt(n);e<i;)if(n%Ai[e++]==0)return!1}return r.millerRabin(t)}function mM(t){var e=this.subtract(ge.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=yM(),a,s=0;s<t;++s){do a=new ge(this.bitLength(),i);while(a.compareTo(ge.ONE)<=0||a.compareTo(e)>=0);var l=a.modPow(n,this);if(l.compareTo(ge.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ge.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}function yM(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ge.prototype.chunkSize=v5;ge.prototype.toRadix=w5;ge.prototype.fromRadix=E5;ge.prototype.fromNumber=C5;ge.prototype.bitwiseTo=A5;ge.prototype.changeBit=G5;ge.prototype.addTo=H5;ge.prototype.dMultiply=Z5;ge.prototype.dAddOffset=$5;ge.prototype.multiplyLowerTo=nM;ge.prototype.multiplyUpperTo=iM;ge.prototype.modInt=dM;ge.prototype.millerRabin=mM;ge.prototype.clone=p5;ge.prototype.intValue=g5;ge.prototype.byteValue=m5;ge.prototype.shortValue=y5;ge.prototype.signum=_5;ge.prototype.toByteArray=b5;ge.prototype.equals=x5;ge.prototype.min=S5;ge.prototype.max=T5;ge.prototype.and=I5;ge.prototype.or=R5;ge.prototype.xor=N5;ge.prototype.andNot=B5;ge.prototype.not=D5;ge.prototype.shiftLeft=O5;ge.prototype.shiftRight=L5;ge.prototype.getLowestSetBit=M5;ge.prototype.bitCount=F5;ge.prototype.testBit=q5;ge.prototype.setBit=V5;ge.prototype.clearBit=K5;ge.prototype.flipBit=j5;ge.prototype.add=Y5;ge.prototype.subtract=W5;ge.prototype.multiply=z5;ge.prototype.divide=Q5;ge.prototype.remainder=X5;ge.prototype.divideAndRemainder=J5;ge.prototype.modPow=cM;ge.prototype.modInverse=hM;ge.prototype.pow=rM;ge.prototype.gcd=fM;ge.prototype.isProbablePrime=gM});var ul=ce((U7,_C)=>{var ea=gt();Qi();Ft();var mC=_C.exports=ea.sha1=ea.sha1||{};ea.md.sha1=ea.md.algorithms.sha1=mC;mC.create=function(){yC||vM();var t=null,e=ea.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=ea.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=ea.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),vC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=ea.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(wg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};vC(h,r,i);var g=ea.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var wg=null,yC=!1;function vM(){wg=String.fromCharCode(128),wg+=ea.util.fillString(String.fromCharCode(0),64),yC=!0}function vC(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,u=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+u+2400959708+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+3395469782+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,h-=64}}});var Eg=ce((F7,EC)=>{var ta=gt();Ft();ni();ul();var wC=EC.exports=ta.pkcs1=ta.pkcs1||{};wC.encode_rsa_oaep=function(t,e,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=ta.md.sha1.create(),s||(s=a);var l=Math.ceil(t.n.bitLength()/8),u=l-2*a.digestLength-2;if(e.length>u){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=u,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=u-e.length,m=0;m<g;m++)h+="\0";var y=d.getBytes()+h+""+e;if(!i)i=ta.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var _=bd(i,l-a.digestLength-1,s),E=ta.util.xorBytes(y,_,y.length),w=bd(E,a.digestLength,s),b=ta.util.xorBytes(i,w,i.length);return"\0"+b+E};wC.decode_rsa_oaep=function(t,e,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=e.length,E.expectedLength=s,E}if(i===void 0?i=ta.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),u=e.charAt(0),f=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),h=bd(d,i.digestLength,a),g=ta.util.xorBytes(f,h,f.length),m=bd(g,s-i.digestLength-1,a),y=ta.util.xorBytes(d,m,d.length),_=y.substring(0,i.digestLength),E=u!=="\0",w=0;w<i.digestLength;++w)E|=l.charAt(w)!==_.charAt(w);for(var b=1,I=i.digestLength,R=i.digestLength;R<y.length;R++){var D=y.charCodeAt(R),O=D&1^1,ee=b?65534:0;E|=D&ee,b=b&O,I+=b}if(E||y.charCodeAt(I)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(I+1)};function bd(t,e,r){r||(r=ta.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var bg=ce((q7,Cg)=>{var ls=gt();Ft();Iu();ni();(function(){if(ls.prime){Cg.exports=ls.prime;return}var t=Cg.exports=ls.prime=ls.prime||{},e=ls.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,g){return h|g};t.generateProbablePrime=function(h,g,m){typeof g=="function"&&(m=g,g={}),g=g||{};var y=g.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var _=g.prng||ls.random,E={nextBytes:function(w){for(var b=_.getBytesSync(w.length),I=0;I<w.length;++I)w[I]=b.charCodeAt(I)}};if(y.name==="PRIMEINC")return a(h,E,y.options,m);throw new Error("Invalid prime generation algorithm: "+y.name)};function a(h,g,m,y){return"workers"in m?u(h,g,m,y):s(h,g,m,y)}function s(h,g,m,y){var _=f(h,g),E=0,w=d(_.bitLength());"millerRabinTests"in m&&(w=m.millerRabinTests);var b=10;"maxBlockTime"in m&&(b=m.maxBlockTime),l(_,h,g,E,w,b,y)}function l(h,g,m,y,_,E,w){var b=+new Date;do{if(h.bitLength()>g&&(h=f(g,m)),h.isProbablePrime(_))return w(null,h);h.dAddOffset(r[y++%8],0)}while(E<0||+new Date-b<E);ls.util.setImmediate(function(){l(h,g,m,y,_,E,w)})}function u(h,g,m,y){if(typeof Worker=="undefined")return s(h,g,m,y);var _=f(h,g),E=m.workers,w=m.workLoad||100,b=w*30/8,I=m.workerScript||"forge/prime.worker.js";if(E===-1)return ls.util.estimateCores(function(D,O){D&&(O=2),E=O-1,R()});R();function R(){E=Math.max(1,E);for(var D=[],O=0;O<E;++O)D[O]=new Worker(I);for(var ee=E,O=0;O<E;++O)D[O].addEventListener("message",U);var G=!1;function U(le){if(!G){--ee;var se=le.data;if(se.found){for(var _e=0;_e<D.length;++_e)D[_e].terminate();return G=!0,y(null,new e(se.prime,16))}_.bitLength()>h&&(_=f(h,g));var Oe=_.toString(16);le.target.postMessage({hex:Oe,workLoad:w}),_.dAddOffset(b,0)}}}}function f(h,g){var m=new e(h,g),y=h-1;return m.testBit(y)||m.bitwiseTo(e.ONE.shiftLeft(y),i,m),m.dAddOffset(31-m.mod(n).byteValue(),0),m}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Ru=ce((G7,kC)=>{var Ge=gt();Ti();Iu();ss();Eg();bg();ni();Ft();typeof Pt=="undefined"&&(Pt=Ge.jsbn.BigInteger);var Pt,xg=Ge.util.isNodejs?require("crypto"):null,$=Ge.asn1,ai=Ge.util;Ge.pki=Ge.pki||{};kC.exports=Ge.pki.rsa=Ge.rsa=Ge.rsa||{};var ot=Ge.pki,_M=[6,4,2,4,2,4,6,2],wM={name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},EM={name:"RSAPrivateKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},CM={name:"RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},bM=Ge.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},xM={name:"DigestInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,type:$.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},SM=function(t){var e;if(t.algorithm in ot.oids)e=ot.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=$.oidToDer(e).getBytes(),i=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]),a=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]);a.value.push($.create($.Class.UNIVERSAL,$.Type.OID,!1,n)),a.value.push($.create($.Class.UNIVERSAL,$.Type.NULL,!1,""));var s=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(s),$.toDer(i).getBytes()},CC=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Pt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Pt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Pt(Ge.util.bytesToHex(Ge.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Pt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var s=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};ot.rsa.encrypt=function(t,e,r){var n=r,i,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=bC(t,e,r)):(i=Ge.util.createBuffer(),i.putBytes(t));for(var s=new Pt(i.toHex(),16),l=CC(s,e,n),u=l.toString(16),f=Ge.util.createBuffer(),d=a-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(Ge.util.hexToBytes(u)),f.getBytes()};ot.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=i,a}var s=new Pt(Ge.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=CC(s,e,r),u=l.toString(16),f=Ge.util.createBuffer(),d=i-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(Ge.util.hexToBytes(u)),n!==!1?xd(f.getBytes(),e,r):f.getBytes()};ot.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Ge.random,i={nextBytes:function(l){for(var u=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=u.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:i,eInt:e||65537,e:new Pt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};ot.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Pt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,f=u-1;t.pqState===0?(t.num=new Pt(u,t.rng),t.num.testBit(f)||t.num.bitwiseTo(Pt.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(AM(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(_M[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Pt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:ot.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:ot.rsa.setPublicKey(t.n,t.e)}}s=+new Date,l+=s-a,a=s}return t.keys!==null};ot.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Ge.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(xC("generateKeyPair"))return xg.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,f){if(l)return n(l);n(null,{privateKey:ot.privateKeyFromPem(f),publicKey:ot.publicKeyFromPem(u)})});if(SC("generateKey")&&SC("exportKey"))return ai.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:AC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return ai.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=ot.privateKeyFromAsn1($.fromDer(Ge.util.createBuffer(l)));n(null,{privateKey:u,publicKey:ot.setRsaPublicKey(u.n,u.e)})}});if(TC("generateKey")&&TC("exportKey")){var i=ai.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:AC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var u=l.target.result,f=ai.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);f.oncomplete=function(d){var h=d.target.result,g=ot.privateKeyFromAsn1($.fromDer(Ge.util.createBuffer(h)));n(null,{privateKey:g,publicKey:ot.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(xC("generateKeyPairSync")){var a=xg.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ot.privateKeyFromPem(a.privateKey),publicKey:ot.publicKeyFromPem(a.publicKey)}}}var s=ot.rsa.createKeyPairGenerationState(t,e,r);if(!n)return ot.rsa.stepKeyPairGenerationState(s,0),s.keys;TM(s,r,n)};ot.setRsaPublicKey=ot.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,u,f){return bC(l,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,u){return Ge.pkcs1.encode_rsa_oaep(u,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return ot.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(u,f){f=xd(f,r,!0);var d=$.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!$.validate(d,xM,h,g)){var m=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw m.errors=g,m}var y=$.derToOid(h.algorithmIdentifier);if(!(y===Ge.oids.md2||y===Ge.oids.md5||y===Ge.oids.sha1||y===Ge.oids.sha224||y===Ge.oids.sha256||y===Ge.oids.sha384||y===Ge.oids.sha512||y===Ge.oids["sha512-224"]||y===Ge.oids["sha512-256"])){var m=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw m.oid=y,m}if((y===Ge.oids.md2||y===Ge.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(u,f){return f=xd(f,r,!0),u===f}});var l=ot.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};ot.setRsaPrivateKey=ot.rsa.setPrivateKey=function(t,e,r,n,i,a,s,l){var u={n:t,e,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return u.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=ot.rsa.decrypt(f,u,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:xd};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(m,y){return Ge.pkcs1.decode_rsa_oaep(y,m,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(m){return m}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,u,!1)},u.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:SM},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,u.n.bitLength());return ot.rsa.encrypt(g,u,h)},u};ot.wrapRsaPrivateKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(ot.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(t).getBytes())])};ot.privateKeyFromAsn1=function(t){var e={},r=[];if($.validate(t,wM,e,r)&&(t=$.fromDer(Ge.util.createBuffer(e.privateKey))),e={},r=[],!$.validate(t,EM,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,u,f,d,h;return i=Ge.util.createBuffer(e.privateKeyModulus).toHex(),a=Ge.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=Ge.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Ge.util.createBuffer(e.privateKeyPrime1).toHex(),u=Ge.util.createBuffer(e.privateKeyPrime2).toHex(),f=Ge.util.createBuffer(e.privateKeyExponent1).toHex(),d=Ge.util.createBuffer(e.privateKeyExponent2).toHex(),h=Ge.util.createBuffer(e.privateKeyCoefficient).toHex(),ot.setRsaPrivateKey(new Pt(i,16),new Pt(a,16),new Pt(s,16),new Pt(l,16),new Pt(u,16),new Pt(f,16),new Pt(d,16),new Pt(h,16))};ot.privateKeyToAsn1=ot.privateKeyToRSAPrivateKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.e)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.d)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.p)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.q)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.dP)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.dQ)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.qInv))])};ot.publicKeyFromAsn1=function(t){var e={},r=[];if($.validate(t,bM,e,r)){var n=$.derToOid(e.publicKeyOid);if(n!==ot.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!$.validate(t,CM,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=Ge.util.createBuffer(e.publicKeyModulus).toHex(),s=Ge.util.createBuffer(e.publicKeyExponent).toHex();return ot.setRsaPublicKey(new Pt(a,16),new Pt(s,16))};ot.publicKeyToAsn1=ot.publicKeyToSubjectPublicKeyInfo=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(ot.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.BITSTRING,!1,[ot.publicKeyToRSAPublicKey(t)])])};ot.publicKeyToRSAPublicKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.e))])};function bC(t,e,r){var n=Ge.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<s;++u)n.putByte(l)}else for(;s>0;){for(var f=0,d=Ge.random.getBytes(s),u=0;u<s;++u)l=d.charCodeAt(u),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(t),n}function xd(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=Ge.util.createBuffer(t),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=i-3-n;for(var f=0;f<u;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(l===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var d=a.getByte();if(d!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function TM(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){a(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return s(l,t.q);a(t.qBits,s)})}function a(l,u){Ge.prime.generateProbablePrime(l,n,u)}function s(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Pt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:ot.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:ot.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function ra(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Ge.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function AM(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function xC(t){return Ge.util.isNodejs&&typeof xg[t]=="function"}function SC(t){return typeof ai.globalScope!="undefined"&&typeof ai.globalScope.crypto=="object"&&typeof ai.globalScope.crypto.subtle=="object"&&typeof ai.globalScope.crypto.subtle[t]=="function"}function TC(t){return typeof ai.globalScope!="undefined"&&typeof ai.globalScope.msCrypto=="object"&&typeof ai.globalScope.msCrypto.subtle=="object"&&typeof ai.globalScope.msCrypto.subtle[t]=="function"}function AC(t){for(var e=Ge.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Sg=ce((V7,DC)=>{var Be=gt();as();Ti();Au();Qi();ss();_d();Ks();ni();mg();Ru();Ft();typeof IC=="undefined"&&(IC=Be.jsbn.BigInteger);var IC,oe=Be.asn1,dt=Be.pki=Be.pki||{};DC.exports=dt.pbe=Be.pbe=Be.pbe||{};var Ys=dt.oids,kM={name:"EncryptedPrivateKeyInfo",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},IM={name:"PBES2Algorithms",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},RM={name:"pkcs-12PbeParams",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"iterations"}]};dt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Be.random.getBytesSync(r.saltSize),i=r.count,a=oe.integerToDer(i),s,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=Ys["aes128-CBC"],h=Be.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=Ys["aes192-CBC"],h=Be.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=Ys["aes256-CBC"],h=Be.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=Ys.desCBC,h=Be.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),y=BC(m),_=Be.pkcs5.pbkdf2(e,n,i,s,y),E=Be.random.getBytesSync(f),w=h(_);w.start(E),w.update(oe.toDer(t)),w.finish(),u=w.output.getBytes();var b=NM(n,a,s,m);l=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Ys.pkcs5PBES2).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Ys.pkcs5PBKDF2).getBytes()),b]),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(d).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){s=24;var I=new Be.util.ByteBuffer(n),_=dt.pbe.generatePkcs12Key(e,I,1,i,s),E=dt.pbe.generatePkcs12Key(e,I,2,i,s),w=Be.des.createEncryptionCipher(_);w.start(E),w.update(oe.toDer(t)),w.finish(),u=w.output.getBytes(),l=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Ys["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,n),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var R=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[l,oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,u)]);return R};dt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!oe.validate(t,kM,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=oe.derToOid(n.encryptionOid),l=dt.pbe.getCipher(s,n.encryptionParams,e),u=Be.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=oe.fromDer(l.output)),r};dt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:oe.toDer(t).getBytes()};return Be.pem.encode(r,{maxline:e})};dt.encryptedPrivateKeyFromPem=function(t){var e=Be.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return oe.fromDer(e.body)};dt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=dt.wrapRsaPrivateKey(dt.privateKeyToAsn1(t));return n=dt.encryptPrivateKeyInfo(n,e,r),dt.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Be.random.getBytesSync(16),l=Be.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Be.random.getBytesSync(16),l=Be.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Be.random.getBytesSync(16),l=Be.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Be.random.getBytesSync(8),l=Be.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Be.random.getBytesSync(8),l=Be.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var f=Be.pbe.opensslDeriveBytes(e,a.substr(0,8),s),d=l(f);d.start(a),d.update(oe.toDer(dt.privateKeyToAsn1(t))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Be.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return Be.pem.encode(h)};dt.decryptRsaPrivateKey=function(t,e){var r=null,n=Be.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=Be.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Be.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Be.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Be.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Be.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return Be.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return Be.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return Be.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=Be.util.hexToBytes(n.dekInfo.parameters),u=Be.pbe.opensslDeriveBytes(e,l.substr(0,8),a),f=s(u);if(f.start(l),f.update(Be.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=dt.decryptPrivateKeyInfo(oe.fromDer(r),e):r=oe.fromDer(r),r!==null&&(r=dt.privateKeyFromAsn1(r)),r};dt.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in Be.md))throw new Error('"sha1" hash algorithm unavailable.');a=Be.md.sha1.create()}var u=a.digestLength,f=a.blockLength,d=new Be.util.ByteBuffer,h=new Be.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)h.putInt16(t.charCodeAt(l));h.putInt16(0)}var g=h.length(),m=e.length(),y=new Be.util.ByteBuffer;y.fillWithByte(r,f);var _=f*Math.ceil(m/f),E=new Be.util.ByteBuffer;for(l=0;l<_;l++)E.putByte(e.at(l%m));var w=f*Math.ceil(g/f),b=new Be.util.ByteBuffer;for(l=0;l<w;l++)b.putByte(h.at(l%g));var I=E;I.putBuffer(b);for(var R=Math.ceil(i/u),D=1;D<=R;D++){var O=new Be.util.ByteBuffer;O.putBytes(y.bytes()),O.putBytes(I.bytes());for(var ee=0;ee<n;ee++)a.start(),a.update(O.getBytes()),O=a.digest();var G=new Be.util.ByteBuffer;for(l=0;l<f;l++)G.putByte(O.at(l%u));var U=Math.ceil(m/f)+Math.ceil(g/f),le=new Be.util.ByteBuffer;for(s=0;s<U;s++){var se=new Be.util.ByteBuffer(I.getBytes(f)),_e=511;for(l=G.length()-1;l>=0;l--)_e=_e>>8,_e+=G.at(l)+se.at(l),se.setAt(l,_e&255);le.putBuffer(se)}I=le,d.putBuffer(O)}return d.truncate(d.length()-i),d};dt.pbe.getCipher=function(t,e,r){switch(t){case dt.oids.pkcs5PBES2:return dt.pbe.getCipherForPBES2(t,e,r);case dt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case dt.oids["pbewithSHAAnd40BitRC2-CBC"]:return dt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};dt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!oe.validate(e,IM,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(t=oe.derToOid(n.kdfOid),t!==dt.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=oe.derToOid(n.encOid),t!==dt.oids["aes128-CBC"]&&t!==dt.oids["aes192-CBC"]&&t!==dt.oids["aes256-CBC"]&&t!==dt.oids["des-EDE3-CBC"]&&t!==dt.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=Be.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,f;switch(dt.oids[t]){case"aes128-CBC":u=16,f=Be.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,f=Be.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,f=Be.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,f=Be.des.createDecryptionCipher;break;case"desCBC":u=8,f=Be.des.createDecryptionCipher;break}var d=NC(n.prfOid),h=Be.pkcs5.pbkdf2(r,s,l,u,d),g=n.encIv,m=f(h);return m.start(g),m};dt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!oe.validate(e,RM,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Be.util.createBuffer(n.salt),l=Be.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,f,d;switch(t){case dt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,f=8,d=Be.des.startDecrypting;break;case dt.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,f=8,d=function(_,E){var w=Be.rc2.createDecryptionCipher(_,40);return w.start(E,null),w};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var h=NC(n.prfOid),g=dt.pbe.generatePkcs12Key(r,s,1,l,u,h);h.start();var m=dt.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,m)};dt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Be.md))throw new Error('"md5" hash algorithm unavailable.');n=Be.md.md5.create()}e===null&&(e="");for(var i=[RC(n,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(RC(n,i[s-1]+t+e));return i.join("").substr(0,r)};function RC(t,e){return t.start().update(e).digest().getBytes()}function NC(t){var e;if(!t)e="hmacWithSHA1";else if(e=dt.oids[oe.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return BC(e)}function BC(t){var e=Be.md;switch(t){case"hmacWithSHA224":e=Be.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function NM(t,e,r,n){var i=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,t),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,Be.util.hexToBytes(r.toString(16))),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(dt.oids[n]).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])),i}});var Tg=ce((K7,PC)=>{var cl=gt();Ti();Ft();var Ne=cl.asn1,fl=PC.exports=cl.pkcs7asn1=cl.pkcs7asn1||{};cl.pkcs7=cl.pkcs7||{};cl.pkcs7.asn1=fl;var OC={name:"ContentInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};fl.contentInfoValidator=OC;var LC={name:"EncryptedContentInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};fl.envelopedDataValidator={name:"EnvelopedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(LC)};fl.encryptedDataValidator={name:"EncryptedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"}].concat(LC)};var BM={name:"SignerInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};fl.signedDataValidator={name:"SignedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},OC,{name:"SignedData.Certificates",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,capture:"signerInfos",optional:!0,value:[BM]}]};fl.recipientInfoValidator={name:"RecipientInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Ag=ce((j7,MC)=>{var Ws=gt();Ft();Ws.mgf=Ws.mgf||{};var DM=MC.exports=Ws.mgf.mgf1=Ws.mgf1=Ws.mgf1||{};DM.create=function(t){var e={generate:function(r,n){for(var i=new Ws.util.ByteBuffer,a=Math.ceil(n/t.digestLength),s=0;s<a;s++){var l=new Ws.util.ByteBuffer;l.putInt32(s),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var FC=ce((H7,UC)=>{var Sd=gt();Ag();UC.exports=Sd.mgf=Sd.mgf||{};Sd.mgf.mgf1=Sd.mgf1});var Td=ce((Y7,qC)=>{var zs=gt();ni();Ft();var OM=qC.exports=zs.pss=zs.pss||{};OM.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=zs.util.createBuffer(i));var a;if("saltLength"in t)a=t.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||zs.random,l={};return l.encode=function(u,f){var d,h=f-1,g=Math.ceil(h/8),m=u.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var y;i===null?y=s.getBytesSync(a):y=i.bytes();var _=new zs.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(m),_.putBytes(y),e.start(),e.update(_.getBytes());var E=e.digest().getBytes(),w=new zs.util.ByteBuffer;w.fillWithByte(0,g-a-n-2),w.putByte(1),w.putBytes(y);var b=w.getBytes(),I=g-n-1,R=r.generate(E,I),D="";for(d=0;d<I;d++)D+=String.fromCharCode(b.charCodeAt(d)^R.charCodeAt(d));var O=65280>>8*g-h&255;return D=String.fromCharCode(D.charCodeAt(0)&~O)+D.substr(1),D+E+String.fromCharCode(188)},l.verify=function(u,f,d){var h,g=d-1,m=Math.ceil(g/8);if(f=f.substr(-m),m<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(m-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var y=m-n-1,_=f.substr(0,y),E=f.substr(y,n),w=65280>>8*m-g&255;if((_.charCodeAt(0)&w)!=0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(E,y),I="";for(h=0;h<y;h++)I+=String.fromCharCode(_.charCodeAt(h)^b.charCodeAt(h));I=String.fromCharCode(I.charCodeAt(0)&~w)+I.substr(1);var R=m-n-a-2;for(h=0;h<R;h++)if(I.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(I.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var D=I.substr(-a),O=new zs.util.ByteBuffer;O.fillWithByte(0,8),O.putBytes(u),O.putBytes(D),e.start(),e.update(O.getBytes());var ee=e.digest().getBytes();return E===ee},l}});var Id=ce((W7,HC)=>{var Ve=gt();as();Ti();Au();Qi();FC();ss();Ks();Td();Ru();Ft();var x=Ve.asn1,Te=HC.exports=Ve.pki=Ve.pki||{},Mt=Te.oids,wr={};wr.CN=Mt.commonName;wr.commonName="CN";wr.C=Mt.countryName;wr.countryName="C";wr.L=Mt.localityName;wr.localityName="L";wr.ST=Mt.stateOrProvinceName;wr.stateOrProvinceName="ST";wr.O=Mt.organizationName;wr.organizationName="O";wr.OU=Mt.organizationalUnitName;wr.organizationalUnitName="OU";wr.E=Mt.emailAddress;wr.emailAddress="E";var GC=Ve.pki.rsa.publicKeyValidator,LM={name:"Certificate",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:x.Class.UNIVERSAL,type:x.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:x.Class.UNIVERSAL,type:x.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:x.Class.UNIVERSAL,type:x.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:x.Class.UNIVERSAL,type:x.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},GC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:x.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:x.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:x.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},PM={name:"rsapss",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:x.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:x.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:x.Class.UNIVERSAL,type:x.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:x.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:x.Class.UNIVERSAL,type:x.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},MM={name:"CertificationRequestInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},GC,{name:"CertificationRequestInfo.attributes",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:x.Class.UNIVERSAL,type:x.Type.SET,constructed:!0}]}]}]},UM={name:"CertificationRequest",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[MM,{name:"CertificationRequest.signatureAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Te.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,a,s=0;s<t.value.length;++s){n=t.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=x.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Mt&&(a.name=Mt[a.type],a.name in wr&&(a.shortName=wr[a.name])),e&&(e.update(a.type),e.update(a.value)),r.push(a)}return r};Te.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=x.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Mt&&(l.name=Mt[l.type],l.name in wr&&(l.shortName=wr[l.name])),l.type===Mt.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(Te.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function us(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var Ad=function(t,e,r){var n={};if(t!==Mt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Mt.sha1},mgf:{algorithmOid:Mt.mgf1,hash:{algorithmOid:Mt.sha1}},saltLength:20});var i={},a=[];if(!x.validate(e,PM,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=x.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=x.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=x.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},kd=function(t){switch(Mt[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ve.md.sha1.create();case"md5WithRSAEncryption":return Ve.md.md5.create();case"sha256WithRSAEncryption":return Ve.md.sha256.create();case"sha384WithRSAEncryption":return Ve.md.sha384.create();case"sha512WithRSAEncryption":return Ve.md.sha512.create();case"RSASSA-PSS":return Ve.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},VC=function(t){var e=t.certificate,r;switch(e.signatureOid){case Mt.sha1WithRSAEncryption:case Mt.sha1WithRSASignature:break;case Mt["RSASSA-PSS"]:var n,i;if(n=Mt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||Ve.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Mt[e.signatureParameters.mgf.algorithmOid],i===void 0||Ve.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Ve.mgf[i].create(Ve.md[n].create()),n=Mt[e.signatureParameters.hash.algorithmOid],n===void 0||Ve.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=e.signatureParameters.hash.algorithmOid,a.name=n,a}r=Ve.pss.create(Ve.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Te.certificateFromPem=function(t,e,r){var n=Ve.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=x.fromDer(n.body,r);return Te.certificateFromAsn1(a,e)};Te.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:x.toDer(Te.certificateToAsn1(t)).getBytes()};return Ve.pem.encode(r,{maxline:e})};Te.publicKeyFromPem=function(t){var e=Ve.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=x.fromDer(e.body);return Te.publicKeyFromAsn1(n)};Te.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:x.toDer(Te.publicKeyToAsn1(t)).getBytes()};return Ve.pem.encode(r,{maxline:e})};Te.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:x.toDer(Te.publicKeyToRSAPublicKey(t)).getBytes()};return Ve.pem.encode(r,{maxline:e})};Te.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Ve.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=x.toDer(Te.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=x.toDer(Te.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};Te.certificationRequestFromPem=function(t,e,r){var n=Ve.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=x.fromDer(n.body,r);return Te.certificationRequestFromAsn1(a,e)};Te.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:x.toDer(Te.certificationRequestToAsn1(t)).getBytes()};return Ve.pem.encode(r,{maxline:e})};Te.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return us(t.issuer,e)},t.issuer.addField=function(e){si([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return us(t.subject,e)},t.subject.addField=function(e){si([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){si(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){si(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)KC(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||Ve.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Te.getTBSCertificate(t);var a=x.toDer(t.tbsCertificate);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=e.md;if(s===null){s=kd({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Te.getTBSCertificate(e),u=x.toDer(l);s.update(u.getBytes())}return s!==null&&(r=VC({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Te.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Mt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Ve.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Te.certificateFromAsn1=function(t,e){var r={},n=[];if(!x.validate(t,LM,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=x.derToOid(r.publicKeyOid);if(a!==Te.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Te.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Ve.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=Ve.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Ad(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ve.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Ad(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(x.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(x.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(x.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(x.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,e){s.md=kd({signatureOid:s.signatureOid,type:"certificate"});var f=x.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=Ve.md.sha1.create(),h=x.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(y){return us(s.issuer,y)},s.issuer.addField=function(y){si([y]),s.issuer.attributes.push(y)},s.issuer.attributes=Te.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=Ve.md.sha1.create(),m=x.toDer(r.certSubject);return g.update(m.getBytes()),s.subject.getField=function(y){return us(s.subject,y)},s.subject.addField=function(y){si([y]),s.subject.attributes.push(y)},s.subject.attributes=Te.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=Te.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Te.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Te.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Te.certificateExtensionFromAsn1(n.value[i]));return e};Te.certificateExtensionFromAsn1=function(t){var e={};if(e.id=x.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===x.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Mt){if(e.name=Mt[e.id],e.name==="keyUsage"){var r=x.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)==128,e.nonRepudiation=(n&64)==64,e.keyEncipherment=(n&32)==32,e.dataEncipherment=(n&16)==16,e.keyAgreement=(n&8)==8,e.keyCertSign=(n&4)==4,e.cRLSign=(n&2)==2,e.encipherOnly=(n&1)==1,e.decipherOnly=(i&128)==128}else if(e.name==="basicConstraints"){var r=x.fromDer(e.value);r.value.length>0&&r.value[0].type===x.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var a=null;r.value.length>0&&r.value[0].type===x.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(e.pathLenConstraint=x.derToInteger(a))}else if(e.name==="extKeyUsage")for(var r=x.fromDer(e.value),s=0;s<r.value.length;++s){var l=x.derToOid(r.value[s].value);l in Mt?e[Mt[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=x.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)==128,e.server=(n&64)==64,e.email=(n&32)==32,e.objsign=(n&16)==16,e.reserved=(n&8)==8,e.sslCA=(n&4)==4,e.emailCA=(n&2)==2,e.objCA=(n&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=x.fromDer(e.value),f=0;f<r.value.length;++f){u=r.value[f];var d={type:u.type,value:u.value};switch(e.altNames.push(d),u.type){case 1:case 2:case 6:break;case 7:d.ip=Ve.util.bytesToIP(u.value);break;case 8:d.oid=x.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=x.fromDer(e.value);e.subjectKeyIdentifier=Ve.util.bytesToHex(r.value)}}return e};Te.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!x.validate(t,UM,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=x.derToOid(r.publicKeyOid);if(a!==Te.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Te.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ve.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Ad(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ve.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Ad(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=kd({signatureOid:s.signatureOid,type:"certification request"});var l=x.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var u=Ve.md.sha1.create();return s.subject.getField=function(f){return us(s.subject,f)},s.subject.addField=function(f){si([f]),s.subject.attributes.push(f)},s.subject.attributes=Te.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=Te.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return us(s,f)},s.addAttribute=function(f){si([f]),s.attributes.push(f)},s.attributes=Te.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Te.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return us(t.subject,e)},t.subject.addField=function(e){si([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return us(t,e)},t.addAttribute=function(e){si([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){si(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){si(e),t.attributes=e},t.sign=function(e,r){t.md=r||Ve.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Te.getCertificationRequestInfo(t);var a=x.toDer(t.certificationRequestInfo);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=kd({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Te.getCertificationRequestInfo(t),i=x.toDer(n);r.update(i.getBytes())}return r!==null&&(e=VC({certificate:t,md:r,signature:t.signature})),e},t};function dl(t){for(var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=x.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===x.Type.UTF8&&(s=Ve.util.encodeUtf8(s))),n=x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(r.type).getBytes()),x.create(x.Class.UNIVERSAL,l,!1,s)])]),e.value.push(n)}return e}function si(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in Te.oids?e.name=Te.oids[e.type]:e.shortName&&e.shortName in wr&&(e.name=Te.oids[wr[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in Te.oids)e.type=Te.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in wr&&(e.shortName=wr[e.name]),e.type===Mt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=x.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Te.certificateExtensionToAsn1(KC(e.extensions[i])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function KC(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in Te.oids&&(t.name=Te.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in Te.oids)t.id=Te.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,i=0,a=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),t.value=x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(x.create(x.Class.UNIVERSAL,x.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in Mt?l.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(Mt[u]).getBytes())):u.indexOf(".")!==-1&&l.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);for(var f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ve.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=x.oidToDer(x.oidToDer(f.oid)):s=x.oidToDer(s));t.value.value.push(x.create(x.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=x.create(x.Class.UNIVERSAL,x.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var g=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!1,g))}if(t.authorityCertIssuer){var m=[x.create(x.Class.CONTEXT_SPECIFIC,4,!0,[dl(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var y=Ve.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if(t.name==="cRLDistributionPoints"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);for(var l=t.value.value,_=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),E=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ve.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=x.oidToDer(x.oidToDer(f.oid)):s=x.oidToDer(s));E.value.push(x.create(x.Class.CONTEXT_SPECIFIC,f.type,!1,s))}_.value.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[E])),l.push(_)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function kg(t,e){switch(t){case Mt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.hash.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.mgf.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.mgf.hash.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.saltLength).getBytes())])),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,r);default:return x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")}}function FM(t){var e=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=x.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===x.Type.UTF8&&(a=Ve.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var u=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(i.type).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,s,l,a)])]);e.value.push(u)}return e}var qM=new Date("1950-01-01T00:00:00Z"),GM=new Date("2050-01-01T00:00:00Z");function jC(t){return t>=qM&&t<GM?x.create(x.Class.UNIVERSAL,x.Type.UTCTIME,!1,x.dateToUtcTime(t)):x.create(x.Class.UNIVERSAL,x.Type.GENERALIZEDTIME,!1,x.dateToGeneralizedTime(t))}Te.getTBSCertificate=function(t){var e=jC(t.validity.notBefore),r=jC(t.validity.notAfter),n=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.version).getBytes())]),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,Ve.util.hexToBytes(t.serialNumber)),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.siginfo.algorithmOid).getBytes()),kg(t.siginfo.algorithmOid,t.siginfo.parameters)]),dl(t.issuer),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,r]),dl(t.subject),Te.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!0,[x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Te.certificateExtensionsToAsn1(t.extensions)),n};Te.getCertificationRequestInfo=function(t){var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.version).getBytes()),dl(t.subject),Te.publicKeyToAsn1(t.publicKey),FM(t)]);return e};Te.distinguishedNameToAsn1=function(t){return dl(t)};Te.certificateToAsn1=function(t){var e=t.tbsCertificate||Te.getTBSCertificate(t);return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.signatureOid).getBytes()),kg(t.signatureOid,t.signatureParameters)]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Te.certificateExtensionsToAsn1=function(t){var e=x.create(x.Class.CONTEXT_SPECIFIC,3,!0,[]),r=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Te.certificateExtensionToAsn1(t[n]));return e};Te.certificateExtensionToAsn1=function(t){var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);e.value.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.id).getBytes())),t.critical&&e.value.push(x.create(x.Class.UNIVERSAL,x.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=x.toDer(r).getBytes()),e.value.push(x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,r)),e};Te.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Te.getCertificationRequestInfo(t);return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.signatureOid).getBytes()),kg(t.signatureOid,t.signatureParameters)]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Te.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var l=r(s.issuer);return l},e.addCertificate=function(s){if(typeof s=="string"&&(s=Ve.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var l=e.certs[s.subject.hash];Ve.util.isArray(l)||(l=[l]),l.push(s),e.certs[s.subject.hash]=l}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=Ve.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;Ve.util.isArray(l)||(l=[l]);for(var u=x.toDer(Te.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=x.toDer(Te.certificateToAsn1(l[f])).getBytes();if(u===d)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!Ve.util.isArray(u))s.push(u);else for(var f=0;f<u.length;++f)s.push(u[f])}return s},e.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=Ve.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var u=r(s.subject);if(!Ve.util.isArray(u))return l=e.certs[s.subject.hash],delete e.certs[s.subject.hash],l;for(var f=x.toDer(Te.certificateToAsn1(s)).getBytes(),d=0;d<u.length;++d){var h=x.toDer(Te.certificateToAsn1(u[d])).getBytes();f===h&&(l=u[d],u.splice(d,1))}return u.length===0&&delete e.certs[s.subject.hash],l};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var l=Ve.md.sha1.create();s.attributes=Te.RDNAttributesAsArray(dl(s),l),s.hash=l.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var a=t[i];e.addCertificate(a)}return e};Te.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Te.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var u=e.shift(),f=null,d=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Te.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(f=e[0]||t.getIssuer(u),f===null&&u.isIssuer(u)&&(d=!0,f=u),f){var h=f;Ve.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(u)}catch(D){}}g||(s={message:"Certificate signature is invalid.",error:Te.certificateError.bad_certificate})}s===null&&(!f||d)&&!t.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:Te.certificateError.unknown_ca})}if(s===null&&f&&!u.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:Te.certificateError.bad_certificate}),s===null)for(var m={keyUsage:!0,basicConstraints:!0},y=0;s===null&&y<u.extensions.length;++y){var _=u.extensions[y];_.critical&&!(_.name in m)&&(s={message:"Certificate has an unsupported critical extension.",error:Te.certificateError.unsupported_certificate})}if(s===null&&(!a||e.length===0&&(!f||d))){var E=u.getExtension("basicConstraints"),w=u.getExtension("keyUsage");if(w!==null&&(!w.keyCertSign||E===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Te.certificateError.bad_certificate}),s===null&&E!==null&&!E.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Te.certificateError.bad_certificate}),s===null&&w!==null&&"pathLenConstraint"in E){var b=l-1;b>E.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Te.certificateError.bad_certificate})}}var I=s===null?!0:s.error,R=r.verify?r.verify(I,l,n):I;if(R===!0)s=null;else throw I===!0&&(s={message:"The application rejected the certificate.",error:Te.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!Ve.util.isArray(R)?(R.message&&(s.message=R.message),R.error&&(s.error=R.error)):typeof R=="string"&&(s.error=R)),s;a=!1,++l}while(e.length>0);return!0}});var Rg=ce((z7,WC)=>{var ir=gt();Ti();al();ss();Tg();Sg();ni();Ru();ul();Ft();Id();var F=ir.asn1,Tt=ir.pki,Nu=WC.exports=ir.pkcs12=ir.pkcs12||{},YC={name:"ContentInfo",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},VM={name:"PFX",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"version"},YC,{name:"PFX.macData",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:F.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},KM={name:"SafeBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},jM={name:"Attribute",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,capture:"values"}]},HM={name:"CertBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:F.Class.UNIVERSAL,type:F.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Bu(t,e,r,n){for(var i=[],a=0;a<t.length;a++)for(var s=0;s<t[a].safeBags.length;s++){var l=t[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}Nu.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!F.validate(t,VM,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(E){var w={},b;return"localKeyId"in E?b=E.localKeyId:"localKeyIdHex"in E&&(b=ir.util.hexToBytes(E.localKeyIdHex)),b===void 0&&!("friendlyName"in E)&&"bagType"in E&&(w[E.bagType]=Bu(s.safeContents,null,null,E.bagType)),b!==void 0&&(w.localKeyId=Bu(s.safeContents,"localKeyId",b,E.bagType)),"friendlyName"in E&&(w.friendlyName=Bu(s.safeContents,"friendlyName",E.friendlyName,E.bagType)),w},getBagsByFriendlyName:function(E,w){return Bu(s.safeContents,"friendlyName",E,w)},getBagsByLocalKeyId:function(E,w){return Bu(s.safeContents,"localKeyId",E,w)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(F.derToOid(n.contentType)!==Tt.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=F.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==F.Class.UNIVERSAL||l.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Ig(l),n.mac){var u=null,f=0,d=F.derToOid(n.macAlgorithm);switch(d){case Tt.oids.sha1:u=ir.md.sha1.create(),f=20;break;case Tt.oids.sha256:u=ir.md.sha256.create(),f=32;break;case Tt.oids.sha384:u=ir.md.sha384.create(),f=48;break;case Tt.oids.sha512:u=ir.md.sha512.create(),f=64;break;case Tt.oids.md5:u=ir.md.md5.create(),f=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new ir.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt(ir.util.bytesToHex(n.macIterations),16):1,m=Nu.generateKey(r,h,3,g,f,u),y=ir.hmac.create();y.start(u,m),y.update(l.value);var _=y.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return YM(s,l.value,e,r),s};function Ig(t){if(t.composed||t.constructed){for(var e=ir.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function YM(t,e,r,n){if(e=F.fromDer(e,r),e.tagClass!==F.Class.UNIVERSAL||e.type!==F.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!F.validate(a,YC,s,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var f={encrypted:!1},d=null,h=s.content.value[0];switch(F.derToOid(s.contentType)){case Tt.oids.data:if(h.tagClass!==F.Class.UNIVERSAL||h.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Ig(h).value;break;case Tt.oids.encryptedData:d=WM(h,n),f.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=F.derToOid(s.contentType),u}f.safeBags=zM(d,r,n),t.safeContents.push(f)}}function WM(t,e){var r={},n=[];if(!F.validate(t,ir.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=F.derToOid(r.contentType);if(a!==Tt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=F.derToOid(r.encAlgorithm);var s=Tt.pbe.getCipher(a,r.encParameter,e),l=Ig(r.encryptedContentAsn1),u=ir.util.createBuffer(l.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function zM(t,e,r){if(!e&&t.length===0)return[];if(t=F.fromDer(t,e),t.tagClass!==F.Class.UNIVERSAL||t.type!==F.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!F.validate(a,KM,s,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var f={type:F.derToOid(s.bagId),attributes:QM(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case Tt.oids.pkcs8ShroudedKeyBag:if(g=Tt.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Tt.oids.keyBag:try{f.key=Tt.privateKeyFromAsn1(g)}catch(y){f.key=null,f.asn1=g}continue;case Tt.oids.certBag:d=HM,h=function(){if(F.derToOid(s.certId)!==Tt.oids.x509Certificate){var y=new Error("Unsupported certificate type, only X.509 supported.");throw y.oid=F.derToOid(s.certId),y}var _=F.fromDer(s.cert,e);try{f.cert=Tt.certificateFromAsn1(_,!0)}catch(E){f.cert=null,f.asn1=_}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=f.type,u}if(d!==void 0&&!F.validate(g,d,s,l)){var u=new Error("Cannot read PKCS#12 "+d.name);throw u.errors=l,u}h()}return n}function QM(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!F.validate(t[r],jM,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=F.derToOid(n.oid);if(Tt.oids[s]!==void 0){e[Tt.oids[s]]=[];for(var l=0;l<n.values.length;++l)e[Tt.oids[s]].push(n.values[l].value)}}return e}Nu.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=ir.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=ir.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=Tt.certificateFromPem(s));var l=ir.md.sha1.create();l.update(F.toDer(Tt.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=ir.random.getBytes(20);var u=[];i!==null&&u.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.localKeyId).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.friendlyName).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(a=F.create(F.Class.UNIVERSAL,F.Type.SET,!0,u));var f=[],d=[];e!==null&&(ir.util.isArray(e)?d=e:d=[e]);for(var h=[],g=0;g<d.length;++g){e=d[g],typeof e=="string"&&(e=Tt.certificateFromPem(e));var m=g===0?a:void 0,y=Tt.certificateToAsn1(e),_=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.certBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.x509Certificate).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(y).getBytes())])])]),m]);h.push(_)}if(h.length>0){var E=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,h),w=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(E).getBytes())])]);f.push(w)}var b=null;if(t!==null){var I=Tt.wrapRsaPrivateKey(Tt.privateKeyToAsn1(t));r===null?b=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.keyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[I]),a]):b=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.pkcs8ShroudedKeyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[Tt.encryptPrivateKeyInfo(I,r,n)]),a]);var R=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[b]),D=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(R).getBytes())])]);f.push(D)}var O=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,f),ee;if(n.useMac){var l=ir.md.sha1.create(),G=new ir.util.ByteBuffer(ir.random.getBytes(n.saltSize)),U=n.count,t=Nu.generateKey(r,G,3,U,20),le=ir.hmac.create();le.start(l,t),le.update(F.toDer(O).getBytes());var se=le.getMac();ee=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.sha1).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.NULL,!1,"")]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,se.getBytes())]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,G.getBytes()),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(U).getBytes())])}return F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(3).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(O).getBytes())])]),ee])};Nu.generateKey=ir.pbe.generatePkcs12Key});var Bg=ce((Q7,zC)=>{var cs=gt();Ti();ss();Sg();Ks();_d();Rg();Td();Ru();Ft();Id();var Ng=cs.asn1,hl=zC.exports=cs.pki=cs.pki||{};hl.pemToDer=function(t){var e=cs.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return cs.util.createBuffer(e.body)};hl.privateKeyFromPem=function(t){var e=cs.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ng.fromDer(e.body);return hl.privateKeyFromAsn1(n)};hl.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Ng.toDer(hl.privateKeyToAsn1(t)).getBytes()};return cs.pem.encode(r,{maxline:e})};hl.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Ng.toDer(t).getBytes()};return cs.pem.encode(r,{maxline:e})}});var Ug=ce((X7,rb)=>{var me=gt();Ti();al();gd();Ks();Bg();ni();ul();Ft();var Rd=function(t,e,r,n){var i=me.util.createBuffer(),a=t.length>>1,s=a+(t.length&1),l=t.substr(0,s),u=t.substr(a,s),f=me.util.createBuffer(),d=me.hmac.create();r=e+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var m=me.util.createBuffer();f.putBytes(r);for(var y=0;y<h;++y)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),m.putBuffer(d.digest());d.start("SHA1",u);var _=me.util.createBuffer();f.clear(),f.putBytes(r);for(var y=0;y<g;++y)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),_.putBuffer(d.digest());return i.putBytes(me.util.xorBytes(m.getBytes(),_.getBytes(),n)),i},XM=function(t,e,r){var n=me.hmac.create();n.start("SHA1",t);var i=me.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},JM=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=me.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},ZM=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=me.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},Kn=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return me.util.createBuffer(t.getBytes(r))},oi=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},T={};T.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};T.SupportedVersions=[T.Versions.TLS_1_1,T.Versions.TLS_1_0];T.Version=T.SupportedVersions[0];T.MaxFragment=16384-1024;T.ConnectionEnd={server:0,client:1};T.PRFAlgorithm={tls_prf_sha256:0};T.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};T.CipherType={stream:0,block:1,aead:2};T.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};T.CompressionMethod={none:0,deflate:1};T.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};T.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};T.Alert={};T.Alert.Level={warning:1,fatal:2};T.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};T.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};T.CipherSuites={};T.getCipherSuite=function(t){var e=null;for(var r in T.CipherSuites){var n=T.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};T.handleUnexpected=function(t,e){var r=!t.open&&t.entity===T.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})};T.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(T.queue(t,T.createAlert(t,{level:T.Alert.Level.warning,description:T.Alert.Description.no_renegotiation})),T.flush(t)),t.process()};T.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===T.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:me.util.createBuffer(a.getBytes(32)),session_id:Kn(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=Kn(a,2),n.compression_methods=Kn(a,1)),s=r-(s-a.length()),s>0){for(var l=Kn(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:Kn(l,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var f=n.extensions[u];if(f.type[0]===0&&f.type[1]===0)for(var d=Kn(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;t.session.extensions.server_name.serverNameList.push(Kn(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=T.getCipherSuite(n.cipher_suite);else for(var g=me.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=T.getCipherSuite(g.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure},cipherSuite:me.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=T.CompressionMethod.none}return n};T.createSecurityParameters=function(t,e){var r=t.entity===T.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,a=r?n:T.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:T.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};T.handleServerHello=function(t,e,r){var n=T.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=XC,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=eU,t.session.resuming=!1,T.createSecurityParameters(t,n)),t.session.id=i,t.process()}};T.handleClientHello=function(t,e,r){var n=T.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),a=null;if(t.sessionCache&&(a=t.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=me.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,l=1;l<T.SupportedVersions.length&&(s=T.SupportedVersions[l],!(s.minor<=n.version.minor));++l);t.version={major:s.major,minor:s.minor},t.session.version=t.version}a!==null?(t.expect=Og,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?oU:Dg,t.session.resuming=!1,T.createSecurityParameters(t,n)),t.open=!0,T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createServerHello(t)})),t.session.resuming?(T.queue(t,T.createRecord(t,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),t.state.pending=T.createConnectionState(t),t.state.current.write=t.state.pending.write,T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createFinished(t)}))):(T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createCertificate(t)})),t.fail||(T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createServerKeyExchange(t)})),t.verifyClient!==!1&&T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createCertificateRequest(t)})),T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createServerHelloDone(t)})))),T.flush(t),t.process()}};T.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Kn(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=Kn(i.certificate_list,3),s=me.asn1.fromDer(a),a=me.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return t.error(t,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var u=t.entity===T.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?QC:Dg:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],T.verifyCertificateChain(t,l)&&(t.expect=u?QC:Dg)),t.process()};T.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});t.expect=tU,t.process()};T.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Kn(n,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=me.pki.privateKeyFromPem(a)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}if(a===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){s.pre_master_secret=me.random.getBytes(48)}t.expect=Og,t.session.clientCertificate!==null&&(t.expect=lU),t.process()};T.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Kn(n,1),certificate_authorities:Kn(n,2)};t.session.certificateRequest=i,t.expect=rU,t.process()};T.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:Kn(n,2).getBytes()},s=me.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(u){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure}})}t.expect=Og,t.process()};T.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.insufficient_security}},i=0,a=t.verify(t,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!me.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),t.error(t,n)}t.session.certificateRequest!==null&&(e=T.createRecord(t,{type:T.ContentType.handshake,data:T.createCertificate(t)}),T.queue(t,e)),e=T.createRecord(t,{type:T.ContentType.handshake,data:T.createClientKeyExchange(t)}),T.queue(t,e),t.expect=aU;var s=function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createCertificateVerify(l,u)})),T.queue(l,T.createRecord(l,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),l.state.pending=T.createConnectionState(l),l.state.current.write=l.state.pending.write,T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createFinished(l)})),l.expect=XC,T.flush(l),l.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);T.getClientSignature(t,s)};T.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var r=t.entity===T.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=T.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?nU:uU,t.process()};T.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=e.fragment.getBytes();n=me.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===T.ConnectionEnd.client,l=s?"server finished":"client finished",u=t.session.sp,f=12,d=Rd;if(n=d(u.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(T.queue(t,T.createRecord(t,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createFinished(t)}))),t.expect=s?iU:cU,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,T.flush(t),t.isConnected=!0,t.connected(t),t.process()};T.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case T.Alert.Description.close_notify:i="Connection closed.";break;case T.Alert.Description.unexpected_message:i="Unexpected message.";break;case T.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case T.Alert.Description.decryption_failed:i="Decryption failed.";break;case T.Alert.Description.record_overflow:i="Record overflow.";break;case T.Alert.Description.decompression_failure:i="Decompression failed.";break;case T.Alert.Description.handshake_failure:i="Handshake failure.";break;case T.Alert.Description.bad_certificate:i="Bad certificate.";break;case T.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case T.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case T.Alert.Description.certificate_expired:i="Certificate expired.";break;case T.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case T.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case T.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case T.Alert.Description.access_denied:i="Access denied.";break;case T.Alert.Description.decode_error:i="Decode error.";break;case T.Alert.Description.decrypt_error:i="Decrypt error.";break;case T.Alert.Description.export_restriction:i="Export restriction.";break;case T.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case T.Alert.Description.insufficient_security:i="Insufficient security.";break;case T.Alert.Description.internal_error:i="Internal error.";break;case T.Alert.Description.user_canceled:i="User canceled.";break;case T.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===T.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===T.ConnectionEnd.client?"server":"client",alert:n}),t.process()};T.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=me.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in Bd[t.entity][t.expect]?(t.entity===T.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:me.md.md5.create(),sha1:me.md.sha1.create()}),n!==T.HandshakeType.hello_request&&n!==T.HandshakeType.certificate_verify&&n!==T.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),Bd[t.entity][t.expect][n](t,e,i)):T.handleUnexpected(t,e)};T.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};T.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===T.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();T.queue(t,T.createRecord(t,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_response,a)})),T.flush(t)}else if(n===T.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,me.util.createBuffer(a))}t.process()};var $M=0,eU=1,QC=2,tU=3,rU=4,XC=5,nU=6,iU=7,aU=8,sU=0,oU=1,Dg=2,lU=3,Og=4,uU=5,cU=6,S=T.handleUnexpected,JC=T.handleChangeCipherSpec,Jr=T.handleAlert,_n=T.handleHandshake,ZC=T.handleApplicationData,Zr=T.handleHeartbeat,Lg=[];Lg[T.ConnectionEnd.client]=[[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[JC,Jr,S,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,ZC,Zr],[S,Jr,_n,S,Zr]];Lg[T.ConnectionEnd.server]=[[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,S,Zr],[JC,Jr,S,S,Zr],[S,Jr,_n,S,Zr],[S,Jr,_n,ZC,Zr],[S,Jr,_n,S,Zr]];var fs=T.handleHelloRequest,fU=T.handleServerHello,$C=T.handleCertificate,eb=T.handleServerKeyExchange,Pg=T.handleCertificateRequest,Nd=T.handleServerHelloDone,tb=T.handleFinished,Bd=[];Bd[T.ConnectionEnd.client]=[[S,S,fU,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,$C,eb,Pg,Nd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,eb,Pg,Nd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,Pg,Nd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,Nd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,tb],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];var dU=T.handleClientHello,hU=T.handleClientKeyExchange,pU=T.handleCertificateVerify;Bd[T.ConnectionEnd.server]=[[S,dU,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,$C,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,hU,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,pU,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,tb],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];T.generateKeys=function(t,e){var r=Rd,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===T.Versions.TLS_1_0.major&&t.version.minor===T.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(e.fixed_iv_length),l.server_write_IV=s.getBytes(e.fixed_iv_length)),l};T.createConnectionState=function(t){var e=t.entity===T.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}),!a.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=T.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case T.CompressionMethod.none:break;case T.CompressionMethod.deflate:n.read.compressFunction=ZM,n.write.compressFunction=JM;break;default:throw new Error("Unsupported compression algorithm.")}}return n};T.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=me.util.createBuffer();return r.putInt32(e),r.putBytes(me.random.getBytes(28)),r};T.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};T.createAlert=function(t,e){var r=me.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),T.createRecord(t,{type:T.ContentType.alert,data:r})};T.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=me.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),a=me.util.createBuffer();a.putByte(T.CompressionMethod.none);var s=a.length(),l=me.util.createBuffer();if(t.virtualHost){var u=me.util.createBuffer();u.putByte(0),u.putByte(0);var f=me.util.createBuffer();f.putByte(0),oi(f,2,me.util.createBuffer(t.virtualHost));var d=me.util.createBuffer();oi(d,2,f),oi(u,2,d),l.putBuffer(u)}var h=l.length();h>0&&(h+=2);var g=t.session.id,m=g.length+1+2+4+28+2+i+1+s+h,y=me.util.createBuffer();return y.putByte(T.HandshakeType.client_hello),y.putInt24(m),y.putByte(t.version.major),y.putByte(t.version.minor),y.putBytes(t.session.sp.client_random),oi(y,1,me.util.createBuffer(g)),oi(y,2,e),oi(y,1,a),h>0&&oi(y,2,l),y};T.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=me.util.createBuffer();return n.putByte(T.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),oi(n,1,me.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};T.createCertificate=function(t){var e=t.entity===T.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=me.util.createBuffer();if(r!==null)try{me.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=me.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=me.util.createBuffer(l.body);a===null&&(a=me.asn1.fromDer(f.bytes(),!1));var d=me.util.createBuffer();oi(d,3,f),i.putBuffer(d)}r=me.pki.certificateFromAsn1(a),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(m){return t.error(t,{message:"Could not send certificate list.",cause:m,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var h=3+i.length(),g=me.util.createBuffer();return g.putByte(T.HandshakeType.certificate),g.putInt24(h),oi(g,3,i),g};T.createClientKeyExchange=function(t){var e=me.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(me.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,a=me.util.createBuffer();return a.putByte(T.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(e.length),a.putBytes(e),a};T.createServerKeyExchange=function(t){var e=0,r=me.util.createBuffer();return e>0&&(r.putByte(T.HandshakeType.server_key_exchange),r.putInt24(e)),r};T.getClientSignature=function(t,e){var r=me.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=me.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},t.getSignature(t,r,e)};T.createCertificateVerify=function(t,e){var r=e.length+2,n=me.util.createBuffer();return n.putByte(T.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};T.createCertificateRequest=function(t){var e=me.util.createBuffer();e.putByte(1);var r=me.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],a=me.pki.distinguishedNameToAsn1(i.subject),s=me.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+e.length()+2+r.length(),u=me.util.createBuffer();return u.putByte(T.HandshakeType.certificate_request),u.putInt24(l),oi(u,1,e),oi(u,2,r),u};T.createServerHelloDone=function(t){var e=me.util.createBuffer();return e.putByte(T.HandshakeType.server_hello_done),e.putInt24(0),e};T.createChangeCipherSpec=function(){var t=me.util.createBuffer();return t.putByte(1),t};T.createFinished=function(t){var e=me.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===T.ConnectionEnd.client,n=t.session.sp,i=12,a=Rd,s=r?"client finished":"server finished";e=a(n.master_secret,s,e.getBytes(),i);var l=me.util.createBuffer();return l.putByte(T.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};T.createHeartbeat=function(t,e,r){typeof r=="undefined"&&(r=e.length);var n=me.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(me.random.getBytes(a)),n};T.queue=function(t,e){if(!!e&&!(e.fragment.length()===0&&(e.type===T.ContentType.handshake||e.type===T.ContentType.alert||e.type===T.ContentType.change_cipher_spec))){if(e.type===T.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=T.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>T.MaxFragment;)n.push(T.createRecord(t,{type:e.type,data:me.util.createBuffer(i.slice(0,T.MaxFragment))})),i=i.slice(T.MaxFragment);i.length>0&&n.push(T.createRecord(t,{type:e.type,data:me.util.createBuffer(i)}))}for(var a=0;a<n.length&&!t.fail;++a){var s=n[a],l=t.state.current.write;l.update(t,s)&&t.records.push(s)}}};T.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Mg=function(t){switch(t){case!0:return!0;case me.pki.certificateError.bad_certificate:return T.Alert.Description.bad_certificate;case me.pki.certificateError.unsupported_certificate:return T.Alert.Description.unsupported_certificate;case me.pki.certificateError.certificate_revoked:return T.Alert.Description.certificate_revoked;case me.pki.certificateError.certificate_expired:return T.Alert.Description.certificate_expired;case me.pki.certificateError.certificate_unknown:return T.Alert.Description.certificate_unknown;case me.pki.certificateError.unknown_ca:return T.Alert.Description.unknown_ca;default:return T.Alert.Description.bad_certificate}},gU=function(t){switch(t){case!0:return!0;case T.Alert.Description.bad_certificate:return me.pki.certificateError.bad_certificate;case T.Alert.Description.unsupported_certificate:return me.pki.certificateError.unsupported_certificate;case T.Alert.Description.certificate_revoked:return me.pki.certificateError.certificate_revoked;case T.Alert.Description.certificate_expired:return me.pki.certificateError.certificate_expired;case T.Alert.Description.certificate_unknown:return me.pki.certificateError.certificate_unknown;case T.Alert.Description.unknown_ca:return me.pki.certificateError.unknown_ca;default:return me.pki.certificateError.bad_certificate}};T.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(a,s,l){var u=Mg(a),f=t.verify(t,a,s,l);if(f!==!0){if(typeof f=="object"&&!me.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=gU(f))}return f},me.pki.verifyCertificateChain(t.caStore,e,r)}catch(a){var i=a;(typeof i!="object"||me.util.isArray(i))&&(i={send:!0,alert:{level:T.Alert.Level.fatal,description:Mg(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:T.Alert.Level.fatal,description:Mg(i.error)}),t.error(t,i)}return!t.fail};T.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var a=null,s=null;if(i?s=me.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=me.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};T.createConnection=function(t){var e=null;t.caStore?me.util.isArray(t.caStore)?e=me.pki.createCaStore(t.caStore):e=t.caStore:e=me.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in T.CipherSuites)r.push(T.CipherSuites[n])}var i=t.server?T.ConnectionEnd.server:T.ConnectionEnd.client,a=t.sessionCache?T.createSessionCache(t.sessionCache):null,s={version:{major:T.Version.major,minor:T.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,h,g,m){return h},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:me.util.createBuffer(),tlsData:me.util.createBuffer(),data:me.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(d,h){h.origin=h.origin||(d.entity===T.ConnectionEnd.client?"client":"server"),h.send&&(T.queue(d,T.createAlert(d,h.alert)),T.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),t.error(d,h),g&&d.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(d){s.version={major:T.Version.major,minor:T.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===T.ConnectionEnd.client?$M:sU,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=T.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-T.ContentType.change_cipher_spec,m=Lg[d.entity][d.expect];g in m?m[g](d,h):T.handleUnexpected(d,h)},u=function(d){var h=0,g=d.input,m=g.length();if(m<5)h=5-m;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:me.util.createBuffer(),ready:!1};var y=d.record.version.major===d.version.major;y&&d.session&&d.session.version&&(y=d.record.version.minor===d.version.minor),y||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,m=g.length();if(m<d.record.length)h=d.record.length-m;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var y=d.state.current.read;y.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==T.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:me.md.md5.create(),sha1:me.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=T.createRandom().getBytes(),s.open=!0,T.queue(s,T.createRecord(s,{type:T.ContentType.handshake,data:T.createClientHello(s)})),T.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return T.queue(s,T.createRecord(s,{type:T.ContentType.application_data,data:me.util.createBuffer(d)})),T.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof me.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,T.queue(s,T.createRecord(s,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_request,d,h)})),T.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,T.queue(s,T.createAlert(s,{level:T.Alert.Level.warning,description:T.Alert.Description.close_notify})),T.flush(s)),s.closed(s)),s.reset(d)},s};rb.exports=me.tls=me.tls||{};for(Dd in T)typeof T[Dd]!="function"&&(me.tls[Dd]=T[Dd]);var Dd;me.tls.prf_tls1=Rd;me.tls.hmac_sha1=XM;me.tls.createSessionCache=T.createSessionCache;me.tls.createConnection=T.createConnection});var ab=ce((J7,ib)=>{var ds=gt();as();Ug();var li=ib.exports=ds.tls;li.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=li.BulkCipherAlgorithm.aes,t.cipher_type=li.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=li.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:nb};li.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=li.BulkCipherAlgorithm.aes,t.cipher_type=li.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=li.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:nb};function nb(t,e,r){var n=e.entity===ds.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:ds.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:ds.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=_U,t.write.cipherFunction=mU,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=li.hmac_sha1}function mU(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===li.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=ds.random.getBytesSync(16),e.cipherState.init=!0;var a=e.cipherState.cipher;return a.start({iv:i}),t.version.minor>=li.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(t.fragment),a.finish(yU)&&(t.fragment=a.output,t.length=t.fragment.length(),r=!0),r}function yU(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function vU(t,e,r){var n=!0;if(r){for(var i=e.length(),a=e.last(),s=i-1-a;s<i-1;++s)n=n&&e.at(s)==a;n&&e.truncate(a+1)}return n}function _U(t,e){var r=!1,n;t.version.minor===li.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(vU);var a=e.macLength,s=ds.random.getBytesSync(a),l=i.output.length();l>=a?(t.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):t.fragment=i.output.getBytes(),t.fragment=ds.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=wU(e.macKey,s,u)&&r,r}function wU(t,e,r){var n=ds.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Gg=ce((Z7,ub)=>{var ur=gt();Qi();Ft();var Du=ub.exports=ur.sha512=ur.sha512||{};ur.md.sha512=ur.md.algorithms.sha512=Du;var sb=ur.sha384=ur.sha512.sha384=ur.sha512.sha384||{};sb.create=function(){return Du.create("SHA-384")};ur.md.sha384=ur.md.algorithms.sha384=sb;ur.sha512.sha256=ur.sha512.sha256||{create:function(){return Du.create("SHA-512/256")}};ur.md["sha512/256"]=ur.md.algorithms["sha512/256"]=ur.sha512.sha256;ur.sha512.sha224=ur.sha512.sha224||{create:function(){return Du.create("SHA-512/224")}};ur.md["sha512/224"]=ur.md.algorithms["sha512/224"]=ur.sha512.sha224;Du.create=function(t){if(ob||EU(),typeof t=="undefined"&&(t="SHA-512"),!(t in Qs))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Qs[t],r=null,n=ur.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,f=0;f<u;++f)l.fullMessageLength.push(0);n=ur.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return l},l.start(),l.update=function(u,f){f==="utf8"&&(u=ur.util.encodeUtf8(u));var d=u.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(u),lb(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=ur.util.createBuffer();u.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;u.putBytes(Fg.substr(0,l.blockLength-d));for(var h,g,m=l.fullMessageLength[0]*8,y=0;y<l.fullMessageLength.length-1;++y)h=l.fullMessageLength[y+1]*8,g=h/4294967296>>>0,m+=g,u.putInt32(m>>>0),m=h>>>0;u.putInt32(m);for(var _=new Array(r.length),y=0;y<r.length;++y)_[y]=r[y].slice(0);lb(_,i,u);var E=ur.util.createBuffer(),w;t==="SHA-512"?w=_.length:t==="SHA-384"?w=_.length-2:w=_.length-4;for(var y=0;y<w;++y)E.putInt32(_[y][0]),(y!==w-1||t!=="SHA-512/224")&&E.putInt32(_[y][1]);return E},l};var Fg=null,ob=!1,qg=null,Qs=null;function EU(){Fg=String.fromCharCode(128),Fg+=ur.util.fillString(String.fromCharCode(0),128),qg=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Qs={},Qs["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Qs["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Qs["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Qs["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ob=!0}function lb(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,m,y,_,E,w,b,I,R,D,O,ee,G,U,le,se,_e,Oe,Re,Se,Ee,ve,Je,Ke,Et,yt,Ze=r.length();Ze>=128;){for(Se=0;Se<16;++Se)e[Se][0]=r.getInt32()>>>0,e[Se][1]=r.getInt32()>>>0;for(;Se<80;++Se)Je=e[Se-2],Ee=Je[0],ve=Je[1],n=((Ee>>>19|ve<<13)^(ve>>>29|Ee<<3)^Ee>>>6)>>>0,i=((Ee<<13|ve>>>19)^(ve<<3|Ee>>>29)^(Ee<<26|ve>>>6))>>>0,Et=e[Se-15],Ee=Et[0],ve=Et[1],a=((Ee>>>1|ve<<31)^(Ee>>>8|ve<<24)^Ee>>>7)>>>0,s=((Ee<<31|ve>>>1)^(Ee<<24|ve>>>8)^(Ee<<25|ve>>>7))>>>0,Ke=e[Se-7],yt=e[Se-16],ve=i+Ke[1]+s+yt[1],e[Se][0]=n+Ke[0]+a+yt[0]+(ve/4294967296>>>0)>>>0,e[Se][1]=ve>>>0;for(_=t[0][0],E=t[0][1],w=t[1][0],b=t[1][1],I=t[2][0],R=t[2][1],D=t[3][0],O=t[3][1],ee=t[4][0],G=t[4][1],U=t[5][0],le=t[5][1],se=t[6][0],_e=t[6][1],Oe=t[7][0],Re=t[7][1],Se=0;Se<80;++Se)f=((ee>>>14|G<<18)^(ee>>>18|G<<14)^(G>>>9|ee<<23))>>>0,d=((ee<<18|G>>>14)^(ee<<14|G>>>18)^(G<<23|ee>>>9))>>>0,h=(se^ee&(U^se))>>>0,g=(_e^G&(le^_e))>>>0,l=((_>>>28|E<<4)^(E>>>2|_<<30)^(E>>>7|_<<25))>>>0,u=((_<<4|E>>>28)^(E<<30|_>>>2)^(E<<25|_>>>7))>>>0,m=(_&w|I&(_^w))>>>0,y=(E&b|R&(E^b))>>>0,ve=Re+d+g+qg[Se][1]+e[Se][1],n=Oe+f+h+qg[Se][0]+e[Se][0]+(ve/4294967296>>>0)>>>0,i=ve>>>0,ve=u+y,a=l+m+(ve/4294967296>>>0)>>>0,s=ve>>>0,Oe=se,Re=_e,se=U,_e=le,U=ee,le=G,ve=O+i,ee=D+n+(ve/4294967296>>>0)>>>0,G=ve>>>0,D=I,O=R,I=w,R=b,w=_,b=E,ve=i+s,_=n+a+(ve/4294967296>>>0)>>>0,E=ve>>>0;ve=t[0][1]+E,t[0][0]=t[0][0]+_+(ve/4294967296>>>0)>>>0,t[0][1]=ve>>>0,ve=t[1][1]+b,t[1][0]=t[1][0]+w+(ve/4294967296>>>0)>>>0,t[1][1]=ve>>>0,ve=t[2][1]+R,t[2][0]=t[2][0]+I+(ve/4294967296>>>0)>>>0,t[2][1]=ve>>>0,ve=t[3][1]+O,t[3][0]=t[3][0]+D+(ve/4294967296>>>0)>>>0,t[3][1]=ve>>>0,ve=t[4][1]+G,t[4][0]=t[4][0]+ee+(ve/4294967296>>>0)>>>0,t[4][1]=ve>>>0,ve=t[5][1]+le,t[5][0]=t[5][0]+U+(ve/4294967296>>>0)>>>0,t[5][1]=ve>>>0,ve=t[6][1]+_e,t[6][0]=t[6][0]+se+(ve/4294967296>>>0)>>>0,t[6][1]=ve>>>0,ve=t[7][1]+Re,t[7][0]=t[7][0]+Oe+(ve/4294967296>>>0)>>>0,t[7][1]=ve>>>0,Ze-=128}}});var cb=ce(Vg=>{var CU=gt();Ti();var Kr=CU.asn1;Vg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Vg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var bb=ce((eK,Cb)=>{var $r=gt();Iu();ni();Gg();Ft();var fb=cb(),bU=fb.publicKeyValidator,xU=fb.privateKeyValidator;typeof db=="undefined"&&(db=$r.jsbn.BigInteger);var db,Kg=$r.util.ByteBuffer,Nn=typeof Buffer=="undefined"?Uint8Array:Buffer;$r.pki=$r.pki||{};Cb.exports=$r.pki.ed25519=$r.ed25519=$r.ed25519||{};var At=$r.ed25519;At.constants={};At.constants.PUBLIC_KEY_BYTE_LENGTH=32;At.constants.PRIVATE_KEY_BYTE_LENGTH=64;At.constants.SEED_BYTE_LENGTH=32;At.constants.SIGN_BYTE_LENGTH=64;At.constants.HASH_BYTE_LENGTH=64;At.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=$r.random.getBytesSync(At.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==At.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+At.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Aa({message:e,encoding:"binary"});for(var r=new Nn(At.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Nn(At.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return kU(r,n),{publicKey:r,privateKey:n}};At.privateKeyFromAsn1=function(t){var e={},r=[],n=$r.asn1.validate(t,xU,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=$r.asn1.derToOid(e.privateKeyOid),s=$r.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.privateKey,u=Aa({message:$r.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};At.publicKeyFromAsn1=function(t){var e={},r=[],n=$r.asn1.validate(t,bU,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=$r.asn1.derToOid(e.publicKeyOid),s=$r.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.ed25519PublicKey;if(l.length!==At.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Aa({message:l,encoding:"binary"})};At.publicKeyFromPrivateKey=function(t){t=t||{};var e=Aa({message:t.privateKey,encoding:"binary"});if(e.length!==At.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+At.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Nn(At.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};At.sign=function(t){t=t||{};var e=Aa(t),r=Aa({message:t.privateKey,encoding:"binary"});if(r.length===At.constants.SEED_BYTE_LENGTH){var n=At.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==At.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+At.constants.SEED_BYTE_LENGTH+" or "+At.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Nn(At.constants.SIGN_BYTE_LENGTH+e.length);IU(i,e,e.length,r);for(var a=new Nn(At.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};At.verify=function(t){t=t||{};var e=Aa(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Aa({message:t.signature,encoding:"binary"});if(r.length!==At.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+At.constants.SIGN_BYTE_LENGTH);var n=Aa({message:t.publicKey,encoding:"binary"});if(n.length!==At.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+At.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Nn(At.constants.SIGN_BYTE_LENGTH+e.length),a=new Nn(At.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<At.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+At.constants.SIGN_BYTE_LENGTH]=e[s];return RU(a,i,i.length,n)>=0};function Aa(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Nn)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new Kg(e,r)}else if(!(e instanceof Kg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Nn(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var jg=Qe(),Od=Qe([1]),SU=Qe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),TU=Qe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),hb=Qe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),pb=Qe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Hg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),AU=Qe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ou(t,e){var r=$r.md.sha512.create(),n=new Kg(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new Nn(At.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function kU(t,e){var r=[Qe(),Qe(),Qe(),Qe()],n,i=Ou(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Qg(r,i),zg(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function IU(t,e,r,n){var i,a,s=new Float64Array(64),l=[Qe(),Qe(),Qe(),Qe()],u=Ou(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var f=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=u[32+i];var d=Ou(t.subarray(32),r+32);for(Yg(d),Qg(l,d),zg(t,l),i=32;i<64;++i)t[i]=n[i];var h=Ou(t,r+64);for(Yg(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*u[a];return gb(t.subarray(32),s),f}function RU(t,e,r,n){var i,a,s=new Nn(32),l=[Qe(),Qe(),Qe(),Qe()],u=[Qe(),Qe(),Qe(),Qe()];if(a=-1,r<64||NU(u,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var f=Ou(t,r);if(Yg(f),wb(l,u,f),Qg(u,e.subarray(32)),Wg(l,u),zg(s,l),r-=64,vb(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return a=r,a}function gb(t,e){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)e[i]+=r-16*e[n]*Hg[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Hg[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Hg[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Yg(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;gb(t,e)}function Wg(t,e){var r=Qe(),n=Qe(),i=Qe(),a=Qe(),s=Qe(),l=Qe(),u=Qe(),f=Qe(),d=Qe();gl(r,t[1],t[0]),gl(d,e[1],e[0]),$t(r,r,d),pl(n,t[0],t[1]),pl(d,e[0],e[1]),$t(n,n,d),$t(i,t[3],e[3]),$t(i,i,TU),$t(a,t[2],e[2]),pl(a,a,a),gl(s,n,r),gl(l,a,i),pl(u,a,i),pl(f,n,r),$t(t[0],s,l),$t(t[1],f,u),$t(t[2],u,l),$t(t[3],s,f)}function mb(t,e,r){for(var n=0;n<4;++n)Eb(t[n],e[n],r)}function zg(t,e){var r=Qe(),n=Qe(),i=Qe();LU(i,e[2]),$t(r,e[0],i),$t(n,e[1],i),Ld(t,n),t[31]^=_b(r)<<7}function Ld(t,e){var r,n,i,a=Qe(),s=Qe();for(r=0;r<16;++r)s[r]=e[r];for(Xg(s),Xg(s),Xg(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,Eb(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function NU(t,e){var r=Qe(),n=Qe(),i=Qe(),a=Qe(),s=Qe(),l=Qe(),u=Qe();return hs(t[2],Od),BU(t[1],e),Xs(i,t[1]),$t(a,i,SU),gl(i,i,t[2]),pl(a,t[2],a),Xs(s,a),Xs(l,s),$t(u,l,s),$t(r,u,i),$t(r,r,a),DU(r,r),$t(r,r,i),$t(r,r,a),$t(r,r,a),$t(t[0],r,a),Xs(n,t[0]),$t(n,n,a),yb(n,i)&&$t(t[0],t[0],AU),Xs(n,t[0]),$t(n,n,a),yb(n,i)?-1:(_b(t[0])===e[31]>>7&&gl(t[0],jg,t[0]),$t(t[3],t[0],t[1]),0)}function BU(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function DU(t,e){var r=Qe(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Xs(r,r),n!==1&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function yb(t,e){var r=new Nn(32),n=new Nn(32);return Ld(r,t),Ld(n,e),vb(r,0,n,0)}function vb(t,e,r,n){return OU(t,e,r,n,32)}function OU(t,e,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=t[e+a]^r[n+a];return(1&s-1>>>8)-1}function _b(t){var e=new Nn(32);return Ld(e,t),e[0]&1}function wb(t,e,r){var n,i;for(hs(t[0],jg),hs(t[1],Od),hs(t[2],Od),hs(t[3],jg),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,mb(t,e,n),Wg(e,t),Wg(t,t),mb(t,e,n)}function Qg(t,e){var r=[Qe(),Qe(),Qe(),Qe()];hs(r[0],hb),hs(r[1],pb),hs(r[2],Od),$t(r[3],hb,pb),wb(t,r,e)}function hs(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function LU(t,e){var r=Qe(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Xs(r,r),n!==2&&n!==4&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Xg(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function Eb(t,e,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(t[a]^e[a]),t[a]^=n,e[a]^=n}function Qe(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function pl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function gl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function Xs(t,e){$t(t,e,e)}function $t(t,e,r){var n,i,a=0,s=0,l=0,u=0,f=0,d=0,h=0,g=0,m=0,y=0,_=0,E=0,w=0,b=0,I=0,R=0,D=0,O=0,ee=0,G=0,U=0,le=0,se=0,_e=0,Oe=0,Re=0,Se=0,Ee=0,ve=0,Je=0,Ke=0,Et=r[0],yt=r[1],Ze=r[2],fe=r[3],vt=r[4],it=r[5],Ct=r[6],tt=r[7],Ce=r[8],A=r[9],B=r[10],L=r[11],Y=r[12],V=r[13],Q=r[14],J=r[15];n=e[0],a+=n*Et,s+=n*yt,l+=n*Ze,u+=n*fe,f+=n*vt,d+=n*it,h+=n*Ct,g+=n*tt,m+=n*Ce,y+=n*A,_+=n*B,E+=n*L,w+=n*Y,b+=n*V,I+=n*Q,R+=n*J,n=e[1],s+=n*Et,l+=n*yt,u+=n*Ze,f+=n*fe,d+=n*vt,h+=n*it,g+=n*Ct,m+=n*tt,y+=n*Ce,_+=n*A,E+=n*B,w+=n*L,b+=n*Y,I+=n*V,R+=n*Q,D+=n*J,n=e[2],l+=n*Et,u+=n*yt,f+=n*Ze,d+=n*fe,h+=n*vt,g+=n*it,m+=n*Ct,y+=n*tt,_+=n*Ce,E+=n*A,w+=n*B,b+=n*L,I+=n*Y,R+=n*V,D+=n*Q,O+=n*J,n=e[3],u+=n*Et,f+=n*yt,d+=n*Ze,h+=n*fe,g+=n*vt,m+=n*it,y+=n*Ct,_+=n*tt,E+=n*Ce,w+=n*A,b+=n*B,I+=n*L,R+=n*Y,D+=n*V,O+=n*Q,ee+=n*J,n=e[4],f+=n*Et,d+=n*yt,h+=n*Ze,g+=n*fe,m+=n*vt,y+=n*it,_+=n*Ct,E+=n*tt,w+=n*Ce,b+=n*A,I+=n*B,R+=n*L,D+=n*Y,O+=n*V,ee+=n*Q,G+=n*J,n=e[5],d+=n*Et,h+=n*yt,g+=n*Ze,m+=n*fe,y+=n*vt,_+=n*it,E+=n*Ct,w+=n*tt,b+=n*Ce,I+=n*A,R+=n*B,D+=n*L,O+=n*Y,ee+=n*V,G+=n*Q,U+=n*J,n=e[6],h+=n*Et,g+=n*yt,m+=n*Ze,y+=n*fe,_+=n*vt,E+=n*it,w+=n*Ct,b+=n*tt,I+=n*Ce,R+=n*A,D+=n*B,O+=n*L,ee+=n*Y,G+=n*V,U+=n*Q,le+=n*J,n=e[7],g+=n*Et,m+=n*yt,y+=n*Ze,_+=n*fe,E+=n*vt,w+=n*it,b+=n*Ct,I+=n*tt,R+=n*Ce,D+=n*A,O+=n*B,ee+=n*L,G+=n*Y,U+=n*V,le+=n*Q,se+=n*J,n=e[8],m+=n*Et,y+=n*yt,_+=n*Ze,E+=n*fe,w+=n*vt,b+=n*it,I+=n*Ct,R+=n*tt,D+=n*Ce,O+=n*A,ee+=n*B,G+=n*L,U+=n*Y,le+=n*V,se+=n*Q,_e+=n*J,n=e[9],y+=n*Et,_+=n*yt,E+=n*Ze,w+=n*fe,b+=n*vt,I+=n*it,R+=n*Ct,D+=n*tt,O+=n*Ce,ee+=n*A,G+=n*B,U+=n*L,le+=n*Y,se+=n*V,_e+=n*Q,Oe+=n*J,n=e[10],_+=n*Et,E+=n*yt,w+=n*Ze,b+=n*fe,I+=n*vt,R+=n*it,D+=n*Ct,O+=n*tt,ee+=n*Ce,G+=n*A,U+=n*B,le+=n*L,se+=n*Y,_e+=n*V,Oe+=n*Q,Re+=n*J,n=e[11],E+=n*Et,w+=n*yt,b+=n*Ze,I+=n*fe,R+=n*vt,D+=n*it,O+=n*Ct,ee+=n*tt,G+=n*Ce,U+=n*A,le+=n*B,se+=n*L,_e+=n*Y,Oe+=n*V,Re+=n*Q,Se+=n*J,n=e[12],w+=n*Et,b+=n*yt,I+=n*Ze,R+=n*fe,D+=n*vt,O+=n*it,ee+=n*Ct,G+=n*tt,U+=n*Ce,le+=n*A,se+=n*B,_e+=n*L,Oe+=n*Y,Re+=n*V,Se+=n*Q,Ee+=n*J,n=e[13],b+=n*Et,I+=n*yt,R+=n*Ze,D+=n*fe,O+=n*vt,ee+=n*it,G+=n*Ct,U+=n*tt,le+=n*Ce,se+=n*A,_e+=n*B,Oe+=n*L,Re+=n*Y,Se+=n*V,Ee+=n*Q,ve+=n*J,n=e[14],I+=n*Et,R+=n*yt,D+=n*Ze,O+=n*fe,ee+=n*vt,G+=n*it,U+=n*Ct,le+=n*tt,se+=n*Ce,_e+=n*A,Oe+=n*B,Re+=n*L,Se+=n*Y,Ee+=n*V,ve+=n*Q,Je+=n*J,n=e[15],R+=n*Et,D+=n*yt,O+=n*Ze,ee+=n*fe,G+=n*vt,U+=n*it,le+=n*Ct,se+=n*tt,_e+=n*Ce,Oe+=n*A,Re+=n*B,Se+=n*L,Ee+=n*Y,ve+=n*V,Je+=n*Q,Ke+=n*J,a+=38*D,s+=38*O,l+=38*ee,u+=38*G,f+=38*U,d+=38*le,h+=38*se,g+=38*_e,m+=38*Oe,y+=38*Re,_+=38*Se,E+=38*Ee,w+=38*ve,b+=38*Je,I+=38*Ke,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,a+=i-1+37*(i-1),t[0]=a,t[1]=s,t[2]=l,t[3]=u,t[4]=f,t[5]=d,t[6]=h,t[7]=g,t[8]=m,t[9]=y,t[10]=_,t[11]=E,t[12]=w,t[13]=b,t[14]=I,t[15]=R}});var Ab=ce((tK,Tb)=>{var jn=gt();Ft();ni();Iu();Tb.exports=jn.kem=jn.kem||{};var xb=jn.jsbn.BigInteger;jn.kem.rsa={};jn.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||jn.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new xb(jn.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(xb.ONE)<=0);l=jn.util.hexToBytes(l.toString(16));var u=s-l.length;u>0&&(l=jn.util.fillString(String.fromCharCode(0),u)+l);var f=i.encrypt(l,"NONE"),d=t.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return t.generate(l,s)},n};jn.kem.kdf1=function(t,e){Sb(this,t,0,e||t.digestLength)};jn.kem.kdf2=function(t,e){Sb(this,t,1,e||t.digestLength)};function Sb(t,e,r,n){t.generate=function(i,a){for(var s=new jn.util.ByteBuffer,l=Math.ceil(a/n)+r,u=new jn.util.ByteBuffer,f=r;f<l;++f){u.putInt32(f),e.start(),e.update(i+u.getBytes());var d=e.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var Nb=ce((rK,Rb)=>{var Rt=gt();Ft();Rb.exports=Rt.log=Rt.log||{};Rt.log.levels=["none","error","warning","info","debug","verbose","max"];var Pd={},Jg=[],Lu=null;Rt.log.LEVEL_LOCKED=1<<1;Rt.log.NO_LEVEL_CHECK=1<<2;Rt.log.INTERPOLATE=1<<3;for(na=0;na<Rt.log.levels.length;++na)Zg=Rt.log.levels[na],Pd[Zg]={index:na,name:Zg.toUpperCase()};var Zg,na;Rt.log.logMessage=function(t){for(var e=Pd[t.level].index,r=0;r<Jg.length;++r){var n=Jg[r];if(n.flags&Rt.log.NO_LEVEL_CHECK)n.f(t);else{var i=Pd[n.level].index;e<=i&&n.f(n,t)}}};Rt.log.prepareStandard=function(t){"standard"in t||(t.standard=Pd[t.level].name+" ["+t.category+"] "+t.message)};Rt.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Rt.util.format.apply(this,e)}};Rt.log.prepareStandardFull=function(t){"standardFull"in t||(Rt.log.prepareStandard(t),t.standardFull=t.standard)};for($g=["error","warning","info","debug","verbose"],na=0;na<$g.length;++na)(function(e){Rt.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:r,message:n,arguments:i};Rt.log.logMessage(a)}})($g[na]);var $g,na;Rt.log.makeLogger=function(t){var e={flags:0,f:t};return Rt.log.setLevel(e,"none"),e};Rt.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Rt.log.LEVEL_LOCKED))for(var n=0;n<Rt.log.levels.length;++n){var i=Rt.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};Rt.log.lock=function(t,e){typeof e=="undefined"||e?t.flags|=Rt.log.LEVEL_LOCKED:t.flags&=~Rt.log.LEVEL_LOCKED};Rt.log.addLogger=function(t){Jg.push(t)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(kb={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Pu=function(t,e){Rt.log.prepareStandard(e);var r=kb[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},ml=Rt.log.makeLogger(Pu)):(Pu=function(e,r){Rt.log.prepareStandardFull(r),console.log(r.standardFull)},ml=Rt.log.makeLogger(Pu)),Rt.log.setLevel(ml,"debug"),Rt.log.addLogger(ml),Lu=ml):console={log:function(){}};var ml,kb,Pu;Lu!==null&&typeof window!="undefined"&&window.location&&(Mu=new URL(window.location.href).searchParams,Mu.has("console.level")&&Rt.log.setLevel(Lu,Mu.get("console.level").slice(-1)[0]),Mu.has("console.lock")&&(Ib=Mu.get("console.lock").slice(-1)[0],Ib=="true"&&Rt.log.lock(Lu)));var Mu,Ib;Rt.log.consoleLogger=Lu});var Db=ce((nK,Bb)=>{Bb.exports=Qi();gd();ul();dg();Gg()});var Pb=ce((iK,Lb)=>{var Ae=gt();as();Ti();Au();ss();Ks();Tg();ni();Ft();Id();var K=Ae.asn1,wn=Lb.exports=Ae.pkcs7=Ae.pkcs7||{};wn.messageFromPem=function(t){var e=Ae.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=K.fromDer(e.body);return wn.messageFromAsn1(n)};wn.messageToPem=function(t,e){var r={type:"PKCS7",body:K.toDer(t.toAsn1()).getBytes()};return Ae.pem.encode(r,{maxline:e})};wn.messageFromAsn1=function(t){var e={},r=[];if(!K.validate(t,wn.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=K.derToOid(e.contentType),a;switch(i){case Ae.pki.oids.envelopedData:a=wn.createEnvelopedData();break;case Ae.pki.oids.encryptedData:a=wn.createEncryptedData();break;case Ae.pki.oids.signedData:a=wn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a};wn.createSignedData=function(){var t=null;return t={type:Ae.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(tm(t,n,wn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,a=0;a<i.length;++a)t.certificates.push(Ae.pki.certificateFromAsn1(i[a]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Ae.pki.certificateToAsn1(t.certificates[i]));var a=[],s=K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(t.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(K.create(K.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(K.create(K.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(K.create(K.Class.UNIVERSAL,K.Type.SET,!0,t.signerInfos)),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Ae.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Ae.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||Ae.pki.oids.sha1;switch(u){case Ae.pki.oids.sha1:case Ae.pki.oids.sha256:case Ae.pki.oids.sha384:case Ae.pki.oids.sha512:case Ae.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var m=f[g];if(!d&&m.type===Ae.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&m.type===Ae.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:u,signatureAlgorithm:Ae.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Ae.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Ae.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Ae.util.encodeUtf8(t.content)),n.detached?t.detachedContent=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ae.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var a=t.signers[i],s=a.digestAlgorithm;s in n||(n[s]=Ae.md[Ae.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=Ae.md[Ae.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(s).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=K.derToOid(t.contentInfo.value[0].value),s=K.toDer(i);s.getByte(),K.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var u=new Date,f=0;f<t.signers.length;++f){var d=t.signers[f];if(d.authenticatedAttributes.length===0){if(a!==Ae.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=K.create(K.Class.UNIVERSAL,K.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var m=d.authenticatedAttributes[g];m.type===Ae.pki.oids.messageDigest?m.value=n[d.digestAlgorithm].digest():m.type===Ae.pki.oids.signingTime&&(m.value||(m.value=u)),h.value.push(em(m)),d.authenticatedAttributesAsn1.value.push(em(m))}s=K.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=GU(t.signers)}};wn.createEncryptedData=function(){var t=null;return t={type:Ae.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ae.pki.oids["aes256-CBC"]},fromAsn1:function(e){tm(t,e,wn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Ob(t)}},t};wn.createEnvelopedData=function(){var t=null;return t={type:Ae.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ae.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=tm(t,e,wn.asn1.envelopedDataValidator);t.recipients=UU(r.recipientInfos.value)},toAsn1:function(){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.type).getBytes()),K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(t.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,FU(t.recipients)),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,VU(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Ae.pki.oids.rsaEncryption:case Ae.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Ae.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Ob(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Ae.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,a;switch(r){case Ae.pki.oids["aes128-CBC"]:n=16,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["aes192-CBC"]:n=24,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["aes256-CBC"]:n=32,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=Ae.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Ae.util.createBuffer(Ae.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Ae.util.createBuffer(Ae.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case Ae.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t};function PU(t){var e={},r=[];if(!K.validate(t,wn.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Ae.pki.RDNAttributesAsArray(e.issuer),serialNumber:Ae.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:K.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function MU(t){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(t.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[Ae.pki.distinguishedNameToAsn1({attributes:t.issuer}),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Ae.util.hexToBytes(t.serialNumber))]),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.encryptedContent.algorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]),K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function UU(t){for(var e=[],r=0;r<t.length;++r)e.push(PU(t[r]));return e}function FU(t){for(var e=[],r=0;r<t.length;++r)e.push(MU(t[r]));return e}function qU(t){var e=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(t.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[Ae.pki.distinguishedNameToAsn1({attributes:t.issuer}),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Ae.util.hexToBytes(t.serialNumber))]),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.digestAlgorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.signatureAlgorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")])),e.value.push(K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=K.create(K.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(em(i))}e.value.push(r)}return e}function GU(t){for(var e=[],r=0;r<t.length;++r)e.push(qU(t[r]));return e}function em(t){var e;if(t.type===Ae.pki.oids.contentType)e=K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.value).getBytes());else if(t.type===Ae.pki.oids.messageDigest)e=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Ae.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=K.utcTimeToDate(i):i=K.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?e=K.create(K.Class.UNIVERSAL,K.Type.UTCTIME,!1,K.dateToUtcTime(i)):e=K.create(K.Class.UNIVERSAL,K.Type.GENERALIZEDTIME,!1,K.dateToGeneralizedTime(i))}return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.type).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,[e])])}function VU(t){return[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Ae.pki.oids.data).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(t.algorithm).getBytes()),t.parameter?K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,t.content.getBytes())])]}function tm(t,e,r){var n={},i=[];if(!K.validate(e,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=K.derToOid(n.contentType);if(s!==Ae.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Ae.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==K.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:K.derToOid(n.encAlgorithm),parameter:Ae.util.createBuffer(n.encParameter.value),content:Ae.util.createBuffer(l)}}if(n.content){var l="";if(Ae.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==K.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=Ae.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Ob(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Ae.pki.oids["aes128-CBC"]:case Ae.pki.oids["aes192-CBC"]:case Ae.pki.oids["aes256-CBC"]:e=Ae.aes.createDecryptionCipher(t.encryptedContent.key);break;case Ae.pki.oids.desCBC:case Ae.pki.oids["des-EDE3-CBC"]:e=Ae.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Ub=ce((aK,Mb)=>{var kr=gt();as();al();gd();ul();Ft();var Md=Mb.exports=kr.ssh=kr.ssh||{};Md.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=kr.util.createBuffer();yl(s,n),ia(s,t.e),ia(s,t.n);var l=kr.util.encode64(s.bytes(),64),u=Math.floor(l.length/66)+1;a+="Public-Lines: "+u+`\r
`,a+=l;var f=kr.util.createBuffer();ia(f,t.d),ia(f,t.p),ia(f,t.q),ia(f,t.qInv);var d;if(!e)d=kr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=Ud(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var m=kr.util.createBuffer();m.putBuffer(Ud("\0\0\0\0",e)),m.putBuffer(Ud("\0\0\0",e));var y=kr.aes.createEncryptionCipher(m.truncate(8),"CBC");y.start(kr.util.createBuffer().fillWithByte(0,16)),y.update(f.copy()),y.finish();var _=y.output;_.truncate(16),d=kr.util.encode64(_.bytes(),64)}u=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+u+`\r
`,a+=d;var E=Ud("putty-private-key-file-mac-key",e),w=kr.util.createBuffer();yl(w,n),yl(w,i),yl(w,r),w.putInt32(s.length()),w.putBuffer(s),w.putInt32(f.length()),w.putBuffer(f);var b=kr.hmac.create();return b.start("sha1",E),b.update(w.bytes()),a+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,a};Md.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=kr.util.createBuffer();return yl(n,r),ia(n,t.e),ia(n,t.n),r+" "+kr.util.encode64(n.bytes())+" "+e};Md.privateKeyToOpenSSH=function(t,e){return e?kr.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):kr.pki.privateKeyToPem(t)};Md.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||kr.md.md5.create(),n="ssh-rsa",i=kr.util.createBuffer();yl(i,n),ia(i,t.e),ia(i,t.n),r.start(),r.update(i.getBytes());var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};function ia(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=kr.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function yl(t,e){t.putInt32(e.length),t.putString(e)}function Ud(){for(var t=kr.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var qb=ce((sK,Fb)=>{Fb.exports=gt();as();ab();Ti();ld();Au();bb();al();Ab();Nb();Db();Ag();_d();Ks();Eg();Rg();Pb();Bg();bg();hg();Td();ni();mg();Ub();Ug();Ft()});var Vb=ce(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.getPem=void 0;var KU=require("fs"),Fd=qb(),jU=require("util"),HU=jU.promisify(KU.readFile);function YU(t,e){if(e)Gb(t).then(r=>e(null,r)).catch(r=>e(r,null));else return Gb(t)}qd.getPem=YU;function Gb(t){return HU(t,{encoding:"base64"}).then(e=>WU(e))}function WU(t){let e=Fd.util.decode64(t),r=Fd.asn1.fromDer(e),i=Fd.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return Fd.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var zb=ce(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.GoogleToken=void 0;var Kb=require("fs"),jb=zw(),zU=Z0(),QU=require("path"),XU=require("util"),Hb=Kb.readFile?XU.promisify(Kb.readFile):()=>M(Fu,null,function*(){throw new Uu("use key rather than keyFile.","MISSING_CREDENTIALS")}),Yb="https://www.googleapis.com/oauth2/v4/token",JU="https://accounts.google.com/o/oauth2/revoke?token=",Uu=class extends Error{constructor(e,r){super(e);this.code=r}},rm,Wb=class{constructor(e){this.configure(e)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let e=new Date().getTime();return this.rawToken&&this.expiresAt?e>=this.expiresAt:!0}isTokenExpiring(){var e;let r=new Date().getTime(),n=(e=this.eagerRefreshThresholdMillis)!==null&&e!==void 0?e:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),r=Object.assign({forceRefresh:!1},r),e){let n=e;this.getTokenAsync(r).then(i=>n(null,i),e);return}return this.getTokenAsync(r)}getCredentials(e){return M(this,null,function*(){switch(QU.extname(e)){case".json":{let n=yield Hb(e,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new Uu("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield Hb(e,"utf8")};case".p12":case".pfx":return rm||(rm=(yield Promise.resolve().then(()=>Vb())).getPem),{privateKey:yield rm(e)};default:throw new Uu("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(e){return M(this,null,function*(){if(this.inFlightRequest&&!e.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(e)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(e){return M(this,null,function*(){if(this.isTokenExpiring()===!1&&e.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new Uu("email is required.","MISSING_CREDENTIALS")}revokeToken(e){if(e){this.revokeTokenAsync().then(()=>e(),e);return}return this.revokeTokenAsync()}revokeTokenAsync(){return M(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let e=JU+this.accessToken;yield jb.request({url:e}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(e={}){this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,typeof e.scope=="object"?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis}requestToken(){return M(this,null,function*(){let e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Yb,exp:e+3600,iat:e,sub:this.sub},r),i=zU.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield jb.request({method:"POST",url:Yb,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(e+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};Fu.GoogleToken=Wb});var Xb=ce((uK,Qb)=>{"use strict";Qb.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Zb=ce((cK,Jb)=>{"use strict";Jb.exports=Gt;Gt.Node=Js;Gt.create=Gt;function Gt(t){var e=this;if(e instanceof Gt||(e=new Gt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Gt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Gt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Gt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Gt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)$U(this,arguments[t]);return this.length};Gt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)e8(this,arguments[t]);return this.length};Gt.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Gt.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Gt.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Gt.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Gt.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Gt.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Gt.prototype.map=function(t,e){e=e||this;for(var r=new Gt,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Gt.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Gt,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Gt.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Gt.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Gt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Gt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Gt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Gt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Gt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Gt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Gt.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var a=[],n=0;i&&n<e;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=ZU(this,i,r[n]);return a};Gt.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function ZU(t,e,r){var n=e===t.head?new Js(r,null,e,t):new Js(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function $U(t,e){t.tail=new Js(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function e8(t,e){t.head=new Js(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Js(t,e,r,n){if(!(this instanceof Js))return new Js(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Xb()(Gt)}catch(t){}});var ax=ce((fK,ix)=>{"use strict";var t8=Zb(),Zs=Symbol("max"),ka=Symbol("length"),vl=Symbol("lengthCalculator"),qu=Symbol("allowStale"),$s=Symbol("maxAge"),Ia=Symbol("dispose"),$b=Symbol("noDisposeOnSet"),jr=Symbol("lruList"),ki=Symbol("cache"),ex=Symbol("updateAgeOnGet"),nm=()=>1,tx=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Zs]=e.max||1/0,n=e.length||nm;if(this[vl]=typeof n!="function"?nm:n,this[qu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[$s]=e.maxAge||0,this[Ia]=e.dispose,this[$b]=e.noDisposeOnSet||!1,this[ex]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Zs]=e||1/0,Gu(this)}get max(){return this[Zs]}set allowStale(e){this[qu]=!!e}get allowStale(){return this[qu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[$s]=e,Gu(this)}get maxAge(){return this[$s]}set lengthCalculator(e){typeof e!="function"&&(e=nm),e!==this[vl]&&(this[vl]=e,this[ka]=0,this[jr].forEach(r=>{r.length=this[vl](r.value,r.key),this[ka]+=r.length})),Gu(this)}get lengthCalculator(){return this[vl]}get length(){return this[ka]}get itemCount(){return this[jr].length}rforEach(e,r){r=r||this;for(let n=this[jr].tail;n!==null;){let i=n.prev;nx(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[jr].head;n!==null;){let i=n.next;nx(this,e,n,r),n=i}}keys(){return this[jr].toArray().map(e=>e.key)}values(){return this[jr].toArray().map(e=>e.value)}reset(){this[Ia]&&this[jr]&&this[jr].length&&this[jr].forEach(e=>this[Ia](e.key,e.value)),this[ki]=new Map,this[jr]=new t8,this[ka]=0}dump(){return this[jr].map(e=>Gd(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[jr]}set(e,r,n){if(n=n||this[$s],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[vl](r,e);if(this[ki].has(e)){if(a>this[Zs])return _l(this,this[ki].get(e)),!1;let u=this[ki].get(e).value;return this[Ia]&&(this[$b]||this[Ia](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[ka]+=a-u.length,u.length=a,this.get(e),Gu(this),!0}let s=new rx(e,r,a,i,n);return s.length>this[Zs]?(this[Ia]&&this[Ia](e,r),!1):(this[ka]+=s.length,this[jr].unshift(s),this[ki].set(e,this[jr].head),Gu(this),!0)}has(e){if(!this[ki].has(e))return!1;let r=this[ki].get(e).value;return!Gd(this,r)}get(e){return im(this,e,!0)}peek(e){return im(this,e,!1)}pop(){let e=this[jr].tail;return e?(_l(this,e),e.value):null}del(e){_l(this,this[ki].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ki].forEach((e,r)=>im(this,r,!1))}},im=(t,e,r)=>{let n=t[ki].get(e);if(n){let i=n.value;if(Gd(t,i)){if(_l(t,n),!t[qu])return}else r&&(t[ex]&&(n.value.now=Date.now()),t[jr].unshiftNode(n));return i.value}},Gd=(t,e)=>{if(!e||!e.maxAge&&!t[$s])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[$s]&&r>t[$s]},Gu=t=>{if(t[ka]>t[Zs])for(let e=t[jr].tail;t[ka]>t[Zs]&&e!==null;){let r=e.prev;_l(t,e),e=r}},_l=(t,e)=>{if(e){let r=e.value;t[Ia]&&t[Ia](r.key,r.value),t[ka]-=r.length,t[ki].delete(r.key),t[jr].removeNode(e)}},rx=class{constructor(e,r,n,i,a){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},nx=(t,e,r,n)=>{let i=r.value;Gd(t,i)&&(_l(t,r),t[qu]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};ix.exports=tx});var am=ce(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.JWTAccess=void 0;var r8=Z0(),n8=ax(),sx={alg:"RS256",typ:"JWT"},Vd=class{constructor(e,r,n,i){this.cache=new n8({max:500,maxAge:60*60*1e3}),this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),u=Vd.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:u,iat:l}:f={iss:this.email,sub:this.email,aud:e,exp:u,iat:l},r){for(let y in f)if(r[y])throw new Error(`The '${y}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?mn(Fr({},sx),{kid:this.keyId}):sx,h=Object.assign(f,r),m={Authorization:`Bearer ${r8.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:u*1e3,headers:m}),m}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};Kd.JWTAccess=Vd});var sm=ce(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.JWT=void 0;var ox=zb(),i8=am(),a8=Gs(),jd=class extends a8.OAuth2Client{constructor(e,r,n,i,a,s){let l=e&&typeof e=="object"?e:{email:e,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){return new jd({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:e,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(e){var r=n=>super[n];return M(this,null,function*(){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let i=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new i8.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:e||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(e!=null?e:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,e):{headers:{}}})}fetchIdToken(e){return M(this,null,function*(){let r=new ox.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}authorizeAsync(){return M(this,null,function*(){let e=yield this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens})}refreshTokenNoCache(e){return M(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new ox.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}getCredentials(){return M(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Hd.JWT=jd});var om=ce(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.UserRefreshClient=void 0;var s8=Gs(),lx=class extends s8.OAuth2Client{constructor(e,r,n,i,a){let s=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(e){var r=n=>super[n];return M(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return M(this,null,function*(){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};Yd.UserRefreshClient=lx});var fx=ce(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.getErrorFromOAuthErrorResponse=wl.OAuthClientAuthHandler=void 0;var ux=require("querystring"),o8=Qo(),l8=["PUT","POST","PATCH"],cx=class{constructor(e){this.clientAuthentication=e,this.crypto=(0,o8.createCrypto)()}applyClientAuthenticationOptions(e,r){this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){var n;if(r)e.headers=e.headers||{},Object.assign(e.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){e.headers=e.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(e.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(e.method||"GET").toUpperCase();if(l8.indexOf(n)!==-1){let i,a=e.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){e.data=e.data||"";let s=ux.parse(e.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),e.data=ux.stringify(s)}else if(i==="application/json")e.data=e.data||{},Object.assign(e.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};wl.OAuthClientAuthHandler=cx;function u8(t,e){let r=t.error,n=t.error_description,i=t.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(e){let l=Object.keys(e);e.stack&&l.push("stack"),l.forEach(u=>{u!=="message"&&Object.defineProperty(s,u,{value:e[u],writable:!1,enumerable:!0})})}return s}wl.getErrorFromOAuthErrorResponse=u8});var lm=ce(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.StsCredentials=void 0;var c8=Wo(),f8=require("querystring"),d8=yu(),dx=fx(),hx=class extends dx.OAuthClientAuthHandler{constructor(e,r){super(r);this.tokenExchangeEndpoint=e,this.transporter=new d8.DefaultTransporter}exchangeToken(e,r,n){return M(this,null,function*(){var i,a,s;let l={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:(i=e.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:(a=e.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=e.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let u={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(u,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:u,data:f8.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof c8.GaxiosError&&d.response?(0,dx.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};Wd.StsCredentials=hx});var El=ce(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.BaseExternalAccountClient=Bn.CLOUD_RESOURCE_MANAGER=Bn.EXTERNAL_ACCOUNT_TYPE=Bn.EXPIRATION_TIME_OFFSET=void 0;var h8=require("stream"),p8=vu(),g8=lm(),m8="urn:ietf:params:oauth:grant-type:token-exchange",y8="urn:ietf:params:oauth:token-type:access_token",um="https://www.googleapis.com/auth/cloud-platform",zd="\\.googleapis\\.com$",cm="[^\\.\\s\\/\\\\]+";Bn.EXPIRATION_TIME_OFFSET=5*60*1e3;Bn.EXTERNAL_ACCOUNT_TYPE="external_account";Bn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var v8="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",px=class extends p8.AuthClient{constructor(e,r){super();if(e.type!==Bn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Bn.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);if(this.clientAuth=e.client_id?{confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",e.token_url))throw new Error(`"${e.token_url}" is not a valid token url.`);this.stsCredential=new g8.StsCredentials(e.token_url,this.clientAuth),this.scopes=[um],this.cachedAccessToken=null,this.audience=e.audience,this.subjectTokenType=e.subject_token_type,this.quotaProjectId=e.quota_project_id,this.workforcePoolUserProject=e.workforce_pool_user_project;let n=new RegExp(v8);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof e.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",e.service_account_impersonation_url))throw new Error(`"${e.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=e.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Bn.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var e;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.email)||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}getAccessToken(){return M(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}getProjectId(){return M(this,null,function*(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${Bn.CLOUD_RESOURCE_MANAGER}${e}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof h8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){let e=yield this.retrieveSubjectToken(),r={grantType:m8,audience:this.audience,requestedTokenType:y8,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[um]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(e){return M(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[um]:this.scopes}validateGoogleAPIsUrl(e,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+cm+"\\."+e+zd),new RegExp("^"+e+zd),new RegExp("^"+e+"\\."+cm+zd),new RegExp("^"+cm+"\\-"+e+zd)];for(let s of a)if(i.match(s))return!0;return!1}};Bn.BaseExternalAccountClient=px});var mm=ce(Qd=>{"use strict";var fm,dm,hm;Object.defineProperty(Qd,"__esModule",{value:!0});Qd.IdentityPoolClient=void 0;var pm=require("fs"),gm=require("util"),_8=El(),w8=(0,gm.promisify)((fm=pm.readFile)!==null&&fm!==void 0?fm:()=>{}),E8=(0,gm.promisify)((dm=pm.realpath)!==null&&dm!==void 0?dm:()=>{}),C8=(0,gm.promisify)((hm=pm.lstat)!==null&&hm!==void 0?hm:()=>{}),gx=class extends _8.BaseExternalAccountClient{constructor(e,r){var n,i;super(e,r);if(this.file=e.credential_source.file,this.url=e.credential_source.url,this.headers=e.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=e.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=e.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return M(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(e,r,n){return M(this,null,function*(){try{if(e=yield E8(e),!(yield C8(e)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${e} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield w8(e,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(e,r,n,i){return M(this,null,function*(){let a={url:e,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};Qd.IdentityPoolClient=gx});var _x=ce(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.AwsRequestSigner=void 0;var mx=Qo(),yx="AWS4-HMAC-SHA256",b8="aws4_request",vx=class{constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,mx.createCrypto)()}getRequestOptions(e){return M(this,null,function*(){if(!e.url)throw new Error('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",a=e.body||r,s=e.headers,l=yield this.getCredentials(),u=new URL(n),f=yield S8({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:u.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};Xd.AwsRequestSigner=vx;function Vu(t,e,r){return M(this,null,function*(){return yield t.signWithHmacSha256(e,r)})}function x8(t,e,r,n,i){return M(this,null,function*(){let a=yield Vu(t,`AWS4${e}`,r),s=yield Vu(t,a,n),l=yield Vu(t,s,i);return yield Vu(t,l,"aws4_request")})}function S8(t){return M(this,null,function*(){let e=t.additionalAmzHeaders||{},r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(e).forEach(I=>{l[I.toLowerCase()]=e[I]}),t.securityCredentials.token&&(l["x-amz-security-token"]=t.securityCredentials.token);let u=Object.assign({host:t.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(u).sort();d.forEach(I=>{f+=`${I}:${u[I]}
`});let h=d.join(";"),g=yield t.crypto.sha256DigestHex(r),m=`${t.method}
${t.canonicalUri}
${t.canonicalQuerystring}
${f}
${h}
${g}`,y=`${s}/${t.region}/${n}/${b8}`,_=`${yx}
${a}
${y}
`+(yield t.crypto.sha256DigestHex(m)),E=yield x8(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,n),w=yield Vu(t.crypto,E,_),b=`${yx} Credential=${t.securityCredentials.accessKeyId}/${y}, SignedHeaders=${h}, Signature=${(0,mx.fromArrayBufferToHex)(w)}`;return{amzDate:l.date?void 0:a,authorizationHeader:b,canonicalQuerystring:t.canonicalQuerystring}})}});var ym=ce(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.AwsClient=void 0;var T8=_x(),A8=El(),wx=class extends A8.BaseExternalAccountClient{constructor(e,r){var n;super(e,r);this.environmentId=e.credential_source.environment_id,this.regionUrl=e.credential_source.region_url,this.securityCredentialsUrl=e.credential_source.url,this.regionalCredVerificationUrl=e.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=e.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return M(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new T8.AwsRequestSigner(()=>M(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let e=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},e.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))})}getImdsV2SessionToken(){return M(this,null,function*(){let e={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(e)).data})}getAwsRegion(e){return M(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:e},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(e){return M(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:e};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(e,r){return M(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${e}`,responseType:"json",headers:r})).data})}};Jd.AwsClient=wx});var vm=ce(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.ExternalAccountClient=void 0;var k8=El(),I8=mm(),R8=ym(),Ex=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(e,r){var n;return e&&e.type===k8.EXTERNAL_ACCOUNT_TYPE?((n=e.credential_source)===null||n===void 0?void 0:n.environment_id)?new R8.AwsClient(e,r):new I8.IdentityPoolClient(e,r):null}};Zd.ExternalAccountClient=Ex});var xx=ce(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.GoogleAuth=bl.CLOUD_SDK_CLIENT_ID=void 0;var N8=require("child_process"),Ku=require("fs"),_m=Uf(),B8=require("os"),wm=require("path"),D8=Qo(),O8=yu(),L8=q0(),P8=G0(),M8=V0(),eo=sm(),Cx=om(),bx=vm(),Cl=El();bl.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var Em=class{constructor(e){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,e=e||{},this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.jsonContent=e.credentials||null,this.clientOptions=e.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((e,r)=>M(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);e(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return M(this,arguments,function*(e={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof eo.JWT?r.scopes=this.scopes:r instanceof Cl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof eo.JWT?r.scopes=this.scopes:r instanceof Cl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return e.scopes=this.getAnyScopes(),this.cachedCredential=new L8.Compute(e),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return M(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield _m.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(e){return M(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(e){return M(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=wm.join(i,".config"))}return r&&(r=wm.join(r,"gcloud","application_default_credentials.json"),Ku.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,e):null})}_getApplicationCredentialsFromFilePath(n){return M(this,arguments,function*(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=Ku.realpathSync(e),!Ku.lstatSync(e).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${e} does not exist, or it is not a file. ${a.message}`),a}let i=Ku.createReadStream(e);return this.fromStream(i,r)})}fromJSON(e,r){let n;if(!e)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},e.type==="authorized_user"?(n=new Cx.UserRefreshClient(r),n.fromJSON(e)):e.type===Cl.EXTERNAL_ACCOUNT_TYPE?(n=bx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new eo.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),n}_cacheClientFromJSON(e,r){let n;return r=r||{},e.type==="authorized_user"?(n=new Cx.UserRefreshClient(r),n.fromJSON(e)):e.type===Cl.EXTERNAL_ACCOUNT_TYPE?(n=bx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new eo.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(a=>n(null,a),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";e.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new eo.JWT(mn(Fr({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(e,r){r=r||{};let n=new eo.JWT(r);return n.fromAPIKey(e),n}_isWindows(){let e=B8.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return M(this,null,function*(){return new Promise(e=>{(0,N8.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch(i){}e(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return M(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let e=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null})}getExternalAccountClientProjectId(){return M(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==Cl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return M(this,null,function*(){try{return yield _m.project("project-id")}catch(e){return null}})}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}getCredentialsAsync(){return M(this,null,function*(){let e=yield this.getClient();if(e instanceof Cl.BaseExternalAccountClient){let i=e.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield _m.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return M(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let e=wm.resolve(this.keyFilename),r=Ku.createReadStream(e);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(e){return M(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new P8.IdTokenClient({targetAudience:e,idTokenProvider:r})})}getAccessToken(){return M(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(e){return M(this,null,function*(){return(yield this.getClient()).getRequestHeaders(e)})}authorizeRequest(e){return M(this,null,function*(){e=e||{};let r=e.url||e.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return e.headers=Object.assign(e.headers||{},i),e})}request(e){return M(this,null,function*(){return(yield this.getClient()).request(e)})}getEnv(){return(0,M8.getEnv)()}sign(e){return M(this,null,function*(){let r=yield this.getClient(),n=(0,D8.createCrypto)();if(r instanceof eo.JWT&&r.key)return yield n.sign(r.key,e);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,e)})}signBlob(e,r,n){return M(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:e.encodeBase64StringUtf8(n)}})).data.signedBlob})}};bl.GoogleAuth=Em;Em.DefaultTransporter=O8.DefaultTransporter});var Tx=ce($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.IAMAuth=void 0;var Sx=class{constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};$d.IAMAuth=Sx});var Ix=ce(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.Impersonated=void 0;var Ax=Gs(),U8=Wo(),kx=class extends Ax.OAuth2Client{constructor(e={}){var r,n,i,a,s,l;super(e);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=e.sourceClient)!==null&&r!==void 0?r:new Ax.OAuth2Client,this.targetPrincipal=(n=e.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=e.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=e.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=e.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=e.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(e){return M(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let u="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${u}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(u){if(!(u instanceof Error))throw u;let f=0,d="";throw u instanceof U8.GaxiosError&&(f=(i=(n=(r=u==null?void 0:u.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=u==null?void 0:u.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(u.message=`${f}: unable to impersonate: ${d}`,u):(u.message=`unable to impersonate: ${u}`,u)}})}};eh.Impersonated=kx});var Nx=ce(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.DownscopedClient=Ii.EXPIRATION_TIME_OFFSET=Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var F8=require("stream"),q8=vu(),G8=lm(),V8="urn:ietf:params:oauth:grant-type:token-exchange",K8="urn:ietf:params:oauth:token-type:access_token",j8="urn:ietf:params:oauth:token-type:access_token",H8="https://sts.googleapis.com/v1/token";Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Ii.EXPIRATION_TIME_OFFSET=5*60*1e3;var Rx=class extends q8.AuthClient{constructor(e,r,n,i){super();if(this.authClient=e,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new G8.StsCredentials(H8),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Ii.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}getAccessToken(){return M(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof F8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){var e;let r=(yield this.authClient.getAccessToken()).token,n={grantType:V8,requestedTokenType:K8,subjectToken:r,subjectTokenType:j8},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((e=this.authClient.credentials)===null||e===void 0?void 0:e.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Ii.DownscopedClient=Rx});var Ox=ce(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.GoogleAuth=lt.auth=lt.DefaultTransporter=lt.DownscopedClient=lt.BaseExternalAccountClient=lt.ExternalAccountClient=lt.IdentityPoolClient=lt.AwsClient=lt.UserRefreshClient=lt.LoginTicket=lt.OAuth2Client=lt.CodeChallengeMethod=lt.Impersonated=lt.JWT=lt.JWTAccess=lt.IdTokenClient=lt.IAMAuth=lt.GCPEnv=lt.Compute=lt.AuthClient=void 0;var Bx=xx();Object.defineProperty(lt,"GoogleAuth",{enumerable:!0,get:function(){return Bx.GoogleAuth}});var Y8=vu();Object.defineProperty(lt,"AuthClient",{enumerable:!0,get:function(){return Y8.AuthClient}});var W8=q0();Object.defineProperty(lt,"Compute",{enumerable:!0,get:function(){return W8.Compute}});var z8=V0();Object.defineProperty(lt,"GCPEnv",{enumerable:!0,get:function(){return z8.GCPEnv}});var Q8=Tx();Object.defineProperty(lt,"IAMAuth",{enumerable:!0,get:function(){return Q8.IAMAuth}});var X8=G0();Object.defineProperty(lt,"IdTokenClient",{enumerable:!0,get:function(){return X8.IdTokenClient}});var J8=am();Object.defineProperty(lt,"JWTAccess",{enumerable:!0,get:function(){return J8.JWTAccess}});var Z8=sm();Object.defineProperty(lt,"JWT",{enumerable:!0,get:function(){return Z8.JWT}});var $8=Ix();Object.defineProperty(lt,"Impersonated",{enumerable:!0,get:function(){return $8.Impersonated}});var Dx=Gs();Object.defineProperty(lt,"CodeChallengeMethod",{enumerable:!0,get:function(){return Dx.CodeChallengeMethod}});Object.defineProperty(lt,"OAuth2Client",{enumerable:!0,get:function(){return Dx.OAuth2Client}});var eF=U0();Object.defineProperty(lt,"LoginTicket",{enumerable:!0,get:function(){return eF.LoginTicket}});var tF=om();Object.defineProperty(lt,"UserRefreshClient",{enumerable:!0,get:function(){return tF.UserRefreshClient}});var rF=ym();Object.defineProperty(lt,"AwsClient",{enumerable:!0,get:function(){return rF.AwsClient}});var nF=mm();Object.defineProperty(lt,"IdentityPoolClient",{enumerable:!0,get:function(){return nF.IdentityPoolClient}});var iF=vm();Object.defineProperty(lt,"ExternalAccountClient",{enumerable:!0,get:function(){return iF.ExternalAccountClient}});var aF=El();Object.defineProperty(lt,"BaseExternalAccountClient",{enumerable:!0,get:function(){return aF.BaseExternalAccountClient}});var sF=Nx();Object.defineProperty(lt,"DownscopedClient",{enumerable:!0,get:function(){return sF.DownscopedClient}});var oF=yu();Object.defineProperty(lt,"DefaultTransporter",{enumerable:!0,get:function(){return oF.DefaultTransporter}});var lF=new Bx.GoogleAuth;lt.auth=lF});var bm=ce((AK,Px)=>{"use strict";var Lx=require("fs"),Cm;function uF(){try{return Lx.statSync("/.dockerenv"),!0}catch(t){return!1}}function cF(){try{return Lx.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(t){return!1}}Px.exports=()=>(Cm===void 0&&(Cm=uF()||cF()),Cm)});var Fx=ce((kK,xm)=>{"use strict";var fF=require("os"),dF=require("fs"),Mx=bm(),Ux=()=>{if(process.platform!=="linux")return!1;if(fF.release().toLowerCase().includes("microsoft"))return!Mx();try{return dF.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Mx():!1}catch(t){return!1}};process.env.__IS_WSL_TEST__?xm.exports=Ux:xm.exports=Ux()});var Gx=ce((IK,qx)=>{"use strict";qx.exports=(t,e,r)=>{let n=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}});var zx=ce((Im,Wx)=>{var hF=require("path"),pF=require("child_process"),{promises:Sm,constants:Vx}=require("fs"),th=Fx(),gF=bm(),Tm=Gx(),Kx=hF.join(__dirname,"xdg-open"),{platform:xl,arch:jx}=process,mF=(()=>{let t="/mnt/",e;return function(){return M(this,null,function*(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{yield Sm.access(r,Vx.F_OK),n=!0}catch(s){}if(!n)return t;let i=yield Sm.readFile(r,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?(e=a.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t})}})(),Hx=(t,e)=>M(Im,null,function*(){let r;for(let n of t)try{return yield e(n)}catch(i){r=i}throw r}),rh=t=>M(Im,null,function*(){if(t=Fr({wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1},t),Array.isArray(t.app))return Hx(t.app,l=>rh(mn(Fr({},t),{app:l})));let{name:e,arguments:r=[]}=t.app||{};if(r=[...r],Array.isArray(e))return Hx(e,l=>rh(mn(Fr({},t),{app:{name:l,arguments:r}})));let n,i=[],a={};if(xl==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(xl==="win32"||th&&!gF()){let l=yield mF();n=th?`${l}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),th||(a.windowsVerbatimArguments=!0);let u=["Start"];t.wait&&u.push("-Wait"),e?(u.push(`"\`"${e}\`""`,"-ArgumentList"),t.target&&r.unshift(t.target)):t.target&&u.push(`"${t.target}"`),r.length>0&&(r=r.map(f=>`"\`"${f}\`""`),u.push(r.join(","))),t.target=Buffer.from(u.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!__dirname||__dirname==="/",u=!1;try{yield Sm.access(Kx,Vx.X_OK),u=!0}catch(d){}n=process.versions.electron||xl==="android"||l||!u?"xdg-open":Kx}r.length>0&&i.push(...r),t.wait||(a.stdio="ignore",a.detached=!0)}t.target&&i.push(t.target),xl==="darwin"&&r.length>0&&i.push("--args",...r);let s=pF.spawn(n,i,a);return t.wait?new Promise((l,u)=>{s.once("error",u),s.once("close",f=>{if(t.allowNonzeroExitCode&&f>0){u(new Error(`Exited with code ${f}`));return}l(s)})}):(s.unref(),s)}),Am=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return rh(mn(Fr({},e),{target:t}))},yF=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=e||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return rh(mn(Fr({},e),{app:{name:t,arguments:r}}))};function Yx(t){if(typeof t=="string"||Array.isArray(t))return t;let{[jx]:e}=t;if(!e)throw new Error(`${jx} is not supported`);return e}function km({[xl]:t},{wsl:e}){if(e&&th)return Yx(e);if(!t)throw new Error(`${xl} is not supported`);return Yx(t)}var nh={};Tm(nh,"chrome",()=>km({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Tm(nh,"firefox",()=>km({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Tm(nh,"edge",()=>km({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Am.apps=nh;Am.openApp=yF;Wx.exports=Am});var Xx=ce((RK,Qx)=>{Qx.exports=vF;function vF(t){var e={};t.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;e[n]=r,r.on("close",function(){delete e[n]})}),t.destroy=function(r){t.close(r);for(var n in e)e[n].destroy()}}});var ms=ce((Rl,ec)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,m=2,y=1,_=2,E=4,w=8,b=16,I=32,R=64,D=128,O=256,ee=512,G=30,U="...",le=800,se=16,_e=1,Oe=2,Re=3,Se=1/0,Ee=9007199254740991,ve=17976931348623157e292,Je=0/0,Ke=4294967295,Et=Ke-1,yt=Ke>>>1,Ze=[["ary",D],["bind",y],["bindKey",_],["curry",w],["curryRight",b],["flip",ee],["partial",I],["partialRight",R],["rearg",O]],fe="[object Arguments]",vt="[object Array]",it="[object AsyncFunction]",Ct="[object Boolean]",tt="[object Date]",Ce="[object DOMException]",A="[object Error]",B="[object Function]",L="[object GeneratorFunction]",Y="[object Map]",V="[object Number]",Q="[object Null]",J="[object Object]",H="[object Promise]",X="[object Proxy]",ne="[object RegExp]",Z="[object Set]",de="[object String]",Ue="[object Symbol]",qe="[object Undefined]",ct="[object WeakMap]",Qt="[object WeakSet]",Xt="[object ArrayBuffer]",at="[object DataView]",Bt="[object Float32Array]",gr="[object Float64Array]",qa="[object Int8Array]",Ss="[object Int16Array]",Ts="[object Int32Array]",Sn="[object Uint8Array]",fa="[object Uint8ClampedArray]",sn="[object Uint16Array]",Nr="[object Uint32Array]",cr=/\b__p \+= '';/g,Rk=/\b(__p \+=) '' \+/g,Nk=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oy=/&(?:amp|lt|gt|quot|#39);/g,Ly=/[&<>"']/g,Bk=RegExp(Oy.source),Dk=RegExp(Ly.source),Ok=/<%-([\s\S]+?)%>/g,Lk=/<%([\s\S]+?)%>/g,Py=/<%=([\s\S]+?)%>/g,Pk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mk=/^\w*$/,Uk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ap=/[\\^$.*+?()[\]{}|]/g,Fk=RegExp(ap.source),sp=/^\s+/,qk=/\s/,Gk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vk=/\{\n\/\* \[wrapped with (.+)\] \*/,Kk=/,? & /,jk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hk=/[()=,{}\[\]\/\s]/,Yk=/\\(\\)?/g,Wk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,My=/\w*$/,zk=/^[-+]0x[0-9a-f]+$/i,Qk=/^0b[01]+$/i,Xk=/^\[object .+?Constructor\]$/,Jk=/^0o[0-7]+$/i,Zk=/^(?:0|[1-9]\d*)$/,$k=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dc=/($^)/,eI=/['\n\r\u2028\u2029\\]/g,Oc="\\ud800-\\udfff",tI="\\u0300-\\u036f",rI="\\ufe20-\\ufe2f",nI="\\u20d0-\\u20ff",Uy=tI+rI+nI,Fy="\\u2700-\\u27bf",qy="a-z\\xdf-\\xf6\\xf8-\\xff",iI="\\xac\\xb1\\xd7\\xf7",aI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sI="\\u2000-\\u206f",oI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gy="A-Z\\xc0-\\xd6\\xd8-\\xde",Vy="\\ufe0e\\ufe0f",Ky=iI+aI+sI+oI,op="['\u2019]",lI="["+Oc+"]",jy="["+Ky+"]",Lc="["+Uy+"]",Hy="\\d+",uI="["+Fy+"]",Yy="["+qy+"]",Wy="[^"+Oc+Ky+Hy+Fy+qy+Gy+"]",lp="\\ud83c[\\udffb-\\udfff]",cI="(?:"+Lc+"|"+lp+")",zy="[^"+Oc+"]",up="(?:\\ud83c[\\udde6-\\uddff]){2}",cp="[\\ud800-\\udbff][\\udc00-\\udfff]",ko="["+Gy+"]",Qy="\\u200d",Xy="(?:"+Yy+"|"+Wy+")",fI="(?:"+ko+"|"+Wy+")",Jy="(?:"+op+"(?:d|ll|m|re|s|t|ve))?",Zy="(?:"+op+"(?:D|LL|M|RE|S|T|VE))?",$y=cI+"?",ev="["+Vy+"]?",dI="(?:"+Qy+"(?:"+[zy,up,cp].join("|")+")"+ev+$y+")*",hI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tv=ev+$y+dI,gI="(?:"+[uI,up,cp].join("|")+")"+tv,mI="(?:"+[zy+Lc+"?",Lc,up,cp,lI].join("|")+")",yI=RegExp(op,"g"),vI=RegExp(Lc,"g"),fp=RegExp(lp+"(?="+lp+")|"+mI+tv,"g"),_I=RegExp([ko+"?"+Yy+"+"+Jy+"(?="+[jy,ko,"$"].join("|")+")",fI+"+"+Zy+"(?="+[jy,ko+Xy,"$"].join("|")+")",ko+"?"+Xy+"+"+Jy,ko+"+"+Zy,pI,hI,Hy,gI].join("|"),"g"),wI=RegExp("["+Qy+Oc+Uy+Vy+"]"),EI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,CI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bI=-1,or={};or[Bt]=or[gr]=or[qa]=or[Ss]=or[Ts]=or[Sn]=or[fa]=or[sn]=or[Nr]=!0,or[fe]=or[vt]=or[Xt]=or[Ct]=or[at]=or[tt]=or[A]=or[B]=or[Y]=or[V]=or[J]=or[ne]=or[Z]=or[de]=or[ct]=!1;var tr={};tr[fe]=tr[vt]=tr[Xt]=tr[at]=tr[Ct]=tr[tt]=tr[Bt]=tr[gr]=tr[qa]=tr[Ss]=tr[Ts]=tr[Y]=tr[V]=tr[J]=tr[ne]=tr[Z]=tr[de]=tr[Ue]=tr[Sn]=tr[fa]=tr[sn]=tr[Nr]=!0,tr[A]=tr[B]=tr[ct]=!1;var xI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},SI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},AI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kI=parseFloat,II=parseInt,rv=typeof global=="object"&&global&&global.Object===Object&&global,RI=typeof self=="object"&&self&&self.Object===Object&&self,Mr=rv||RI||Function("return this")(),dp=typeof Rl=="object"&&Rl&&!Rl.nodeType&&Rl,As=dp&&typeof ec=="object"&&ec&&!ec.nodeType&&ec,nv=As&&As.exports===dp,hp=nv&&rv.process,zn=function(){try{var W=As&&As.require&&As.require("util").types;return W||hp&&hp.binding&&hp.binding("util")}catch(ue){}}(),iv=zn&&zn.isArrayBuffer,av=zn&&zn.isDate,sv=zn&&zn.isMap,ov=zn&&zn.isRegExp,lv=zn&&zn.isSet,uv=zn&&zn.isTypedArray;function Pn(W,ue,ie){switch(ie.length){case 0:return W.call(ue);case 1:return W.call(ue,ie[0]);case 2:return W.call(ue,ie[0],ie[1]);case 3:return W.call(ue,ie[0],ie[1],ie[2])}return W.apply(ue,ie)}function NI(W,ue,ie,Pe){for(var nt=-1,Vt=W==null?0:W.length;++nt<Vt;){var Br=W[nt];ue(Pe,Br,ie(Br),W)}return Pe}function Qn(W,ue){for(var ie=-1,Pe=W==null?0:W.length;++ie<Pe&&ue(W[ie],ie,W)!==!1;);return W}function BI(W,ue){for(var ie=W==null?0:W.length;ie--&&ue(W[ie],ie,W)!==!1;);return W}function cv(W,ue){for(var ie=-1,Pe=W==null?0:W.length;++ie<Pe;)if(!ue(W[ie],ie,W))return!1;return!0}function Ga(W,ue){for(var ie=-1,Pe=W==null?0:W.length,nt=0,Vt=[];++ie<Pe;){var Br=W[ie];ue(Br,ie,W)&&(Vt[nt++]=Br)}return Vt}function Pc(W,ue){var ie=W==null?0:W.length;return!!ie&&Io(W,ue,0)>-1}function pp(W,ue,ie){for(var Pe=-1,nt=W==null?0:W.length;++Pe<nt;)if(ie(ue,W[Pe]))return!0;return!1}function fr(W,ue){for(var ie=-1,Pe=W==null?0:W.length,nt=Array(Pe);++ie<Pe;)nt[ie]=ue(W[ie],ie,W);return nt}function Va(W,ue){for(var ie=-1,Pe=ue.length,nt=W.length;++ie<Pe;)W[nt+ie]=ue[ie];return W}function gp(W,ue,ie,Pe){var nt=-1,Vt=W==null?0:W.length;for(Pe&&Vt&&(ie=W[++nt]);++nt<Vt;)ie=ue(ie,W[nt],nt,W);return ie}function DI(W,ue,ie,Pe){var nt=W==null?0:W.length;for(Pe&&nt&&(ie=W[--nt]);nt--;)ie=ue(ie,W[nt],nt,W);return ie}function mp(W,ue){for(var ie=-1,Pe=W==null?0:W.length;++ie<Pe;)if(ue(W[ie],ie,W))return!0;return!1}var OI=yp("length");function LI(W){return W.split("")}function PI(W){return W.match(jk)||[]}function fv(W,ue,ie){var Pe;return ie(W,function(nt,Vt,Br){if(ue(nt,Vt,Br))return Pe=Vt,!1}),Pe}function Mc(W,ue,ie,Pe){for(var nt=W.length,Vt=ie+(Pe?1:-1);Pe?Vt--:++Vt<nt;)if(ue(W[Vt],Vt,W))return Vt;return-1}function Io(W,ue,ie){return ue===ue?zI(W,ue,ie):Mc(W,dv,ie)}function MI(W,ue,ie,Pe){for(var nt=ie-1,Vt=W.length;++nt<Vt;)if(Pe(W[nt],ue))return nt;return-1}function dv(W){return W!==W}function hv(W,ue){var ie=W==null?0:W.length;return ie?_p(W,ue)/ie:Je}function yp(W){return function(ue){return ue==null?t:ue[W]}}function vp(W){return function(ue){return W==null?t:W[ue]}}function pv(W,ue,ie,Pe,nt){return nt(W,function(Vt,Br,Zt){ie=Pe?(Pe=!1,Vt):ue(ie,Vt,Br,Zt)}),ie}function UI(W,ue){var ie=W.length;for(W.sort(ue);ie--;)W[ie]=W[ie].value;return W}function _p(W,ue){for(var ie,Pe=-1,nt=W.length;++Pe<nt;){var Vt=ue(W[Pe]);Vt!==t&&(ie=ie===t?Vt:ie+Vt)}return ie}function wp(W,ue){for(var ie=-1,Pe=Array(W);++ie<W;)Pe[ie]=ue(ie);return Pe}function FI(W,ue){return fr(ue,function(ie){return[ie,W[ie]]})}function gv(W){return W&&W.slice(0,_v(W)+1).replace(sp,"")}function Mn(W){return function(ue){return W(ue)}}function Ep(W,ue){return fr(ue,function(ie){return W[ie]})}function Ql(W,ue){return W.has(ue)}function mv(W,ue){for(var ie=-1,Pe=W.length;++ie<Pe&&Io(ue,W[ie],0)>-1;);return ie}function yv(W,ue){for(var ie=W.length;ie--&&Io(ue,W[ie],0)>-1;);return ie}function qI(W,ue){for(var ie=W.length,Pe=0;ie--;)W[ie]===ue&&++Pe;return Pe}var GI=vp(xI),VI=vp(SI);function KI(W){return"\\"+AI[W]}function jI(W,ue){return W==null?t:W[ue]}function Ro(W){return wI.test(W)}function HI(W){return EI.test(W)}function YI(W){for(var ue,ie=[];!(ue=W.next()).done;)ie.push(ue.value);return ie}function Cp(W){var ue=-1,ie=Array(W.size);return W.forEach(function(Pe,nt){ie[++ue]=[nt,Pe]}),ie}function vv(W,ue){return function(ie){return W(ue(ie))}}function Ka(W,ue){for(var ie=-1,Pe=W.length,nt=0,Vt=[];++ie<Pe;){var Br=W[ie];(Br===ue||Br===u)&&(W[ie]=u,Vt[nt++]=ie)}return Vt}function Uc(W){var ue=-1,ie=Array(W.size);return W.forEach(function(Pe){ie[++ue]=Pe}),ie}function WI(W){var ue=-1,ie=Array(W.size);return W.forEach(function(Pe){ie[++ue]=[Pe,Pe]}),ie}function zI(W,ue,ie){for(var Pe=ie-1,nt=W.length;++Pe<nt;)if(W[Pe]===ue)return Pe;return-1}function QI(W,ue,ie){for(var Pe=ie+1;Pe--;)if(W[Pe]===ue)return Pe;return Pe}function No(W){return Ro(W)?JI(W):OI(W)}function _i(W){return Ro(W)?ZI(W):LI(W)}function _v(W){for(var ue=W.length;ue--&&qk.test(W.charAt(ue)););return ue}var XI=vp(TI);function JI(W){for(var ue=fp.lastIndex=0;fp.test(W);)++ue;return ue}function ZI(W){return W.match(fp)||[]}function $I(W){return W.match(_I)||[]}var eR=function W(ue){ue=ue==null?Mr:ja.defaults(Mr.Object(),ue,ja.pick(Mr,CI));var ie=ue.Array,Pe=ue.Date,nt=ue.Error,Vt=ue.Function,Br=ue.Math,Zt=ue.Object,bp=ue.RegExp,tR=ue.String,Xn=ue.TypeError,Fc=ie.prototype,rR=Vt.prototype,Bo=Zt.prototype,qc=ue["__core-js_shared__"],Gc=rR.toString,Wt=Bo.hasOwnProperty,nR=0,wv=function(){var o=/[^.]+$/.exec(qc&&qc.keys&&qc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Vc=Bo.toString,iR=Gc.call(Zt),aR=Mr._,sR=bp("^"+Gc.call(Wt).replace(ap,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kc=nv?ue.Buffer:t,Ha=ue.Symbol,jc=ue.Uint8Array,Ev=Kc?Kc.allocUnsafe:t,Hc=vv(Zt.getPrototypeOf,Zt),Cv=Zt.create,bv=Bo.propertyIsEnumerable,Yc=Fc.splice,xv=Ha?Ha.isConcatSpreadable:t,Xl=Ha?Ha.iterator:t,ks=Ha?Ha.toStringTag:t,Wc=function(){try{var o=Ds(Zt,"defineProperty");return o({},"",{}),o}catch(c){}}(),oR=ue.clearTimeout!==Mr.clearTimeout&&ue.clearTimeout,lR=Pe&&Pe.now!==Mr.Date.now&&Pe.now,uR=ue.setTimeout!==Mr.setTimeout&&ue.setTimeout,zc=Br.ceil,Qc=Br.floor,xp=Zt.getOwnPropertySymbols,cR=Kc?Kc.isBuffer:t,Sv=ue.isFinite,fR=Fc.join,dR=vv(Zt.keys,Zt),Dr=Br.max,on=Br.min,hR=Pe.now,pR=ue.parseInt,Tv=Br.random,gR=Fc.reverse,Sp=Ds(ue,"DataView"),Jl=Ds(ue,"Map"),Tp=Ds(ue,"Promise"),Do=Ds(ue,"Set"),Zl=Ds(ue,"WeakMap"),$l=Ds(Zt,"create"),Xc=Zl&&new Zl,Oo={},mR=Os(Sp),yR=Os(Jl),vR=Os(Tp),_R=Os(Do),wR=Os(Zl),Jc=Ha?Ha.prototype:t,eu=Jc?Jc.valueOf:t,Av=Jc?Jc.toString:t;function k(o){if(_r(o)&&!st(o)&&!(o instanceof It)){if(o instanceof Jn)return o;if(Wt.call(o,"__wrapped__"))return k1(o)}return new Jn(o)}var Lo=function(){function o(){}return function(c){if(!mr(c))return{};if(Cv)return Cv(c);o.prototype=c;var p=new o;return o.prototype=t,p}}();function Zc(){}function Jn(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}k.templateSettings={escape:Ok,evaluate:Lk,interpolate:Py,variable:"",imports:{_:k}},k.prototype=Zc.prototype,k.prototype.constructor=k,Jn.prototype=Lo(Zc.prototype),Jn.prototype.constructor=Jn;function It(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ke,this.__views__=[]}function ER(){var o=new It(this.__wrapped__);return o.__actions__=Tn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Tn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Tn(this.__views__),o}function CR(){if(this.__filtered__){var o=new It(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function bR(){var o=this.__wrapped__.value(),c=this.__dir__,p=st(o),v=c<0,C=p?o.length:0,N=LN(0,C,this.__views__),P=N.start,q=N.end,z=q-P,he=v?q:P-1,pe=this.__iteratees__,ye=pe.length,ke=0,Fe=on(z,this.__takeCount__);if(!p||!v&&C==z&&Fe==z)return Jv(o,this.__actions__);var We=[];e:for(;z--&&ke<Fe;){he+=c;for(var ht=-1,ze=o[he];++ht<ye;){var bt=pe[ht],Dt=bt.iteratee,qn=bt.type,gn=Dt(ze);if(qn==Oe)ze=gn;else if(!gn){if(qn==_e)continue e;break e}}We[ke++]=ze}return We}It.prototype=Lo(Zc.prototype),It.prototype.constructor=It;function Is(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function xR(){this.__data__=$l?$l(null):{},this.size=0}function SR(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function TR(o){var c=this.__data__;if($l){var p=c[o];return p===s?t:p}return Wt.call(c,o)?c[o]:t}function AR(o){var c=this.__data__;return $l?c[o]!==t:Wt.call(c,o)}function kR(o,c){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=$l&&c===t?s:c,this}Is.prototype.clear=xR,Is.prototype.delete=SR,Is.prototype.get=TR,Is.prototype.has=AR,Is.prototype.set=kR;function da(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function IR(){this.__data__=[],this.size=0}function RR(o){var c=this.__data__,p=$c(c,o);if(p<0)return!1;var v=c.length-1;return p==v?c.pop():Yc.call(c,p,1),--this.size,!0}function NR(o){var c=this.__data__,p=$c(c,o);return p<0?t:c[p][1]}function BR(o){return $c(this.__data__,o)>-1}function DR(o,c){var p=this.__data__,v=$c(p,o);return v<0?(++this.size,p.push([o,c])):p[v][1]=c,this}da.prototype.clear=IR,da.prototype.delete=RR,da.prototype.get=NR,da.prototype.has=BR,da.prototype.set=DR;function ha(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function OR(){this.size=0,this.__data__={hash:new Is,map:new(Jl||da),string:new Is}}function LR(o){var c=df(this,o).delete(o);return this.size-=c?1:0,c}function PR(o){return df(this,o).get(o)}function MR(o){return df(this,o).has(o)}function UR(o,c){var p=df(this,o),v=p.size;return p.set(o,c),this.size+=p.size==v?0:1,this}ha.prototype.clear=OR,ha.prototype.delete=LR,ha.prototype.get=PR,ha.prototype.has=MR,ha.prototype.set=UR;function Rs(o){var c=-1,p=o==null?0:o.length;for(this.__data__=new ha;++c<p;)this.add(o[c])}function FR(o){return this.__data__.set(o,s),this}function qR(o){return this.__data__.has(o)}Rs.prototype.add=Rs.prototype.push=FR,Rs.prototype.has=qR;function wi(o){var c=this.__data__=new da(o);this.size=c.size}function GR(){this.__data__=new da,this.size=0}function VR(o){var c=this.__data__,p=c.delete(o);return this.size=c.size,p}function KR(o){return this.__data__.get(o)}function jR(o){return this.__data__.has(o)}function HR(o,c){var p=this.__data__;if(p instanceof da){var v=p.__data__;if(!Jl||v.length<r-1)return v.push([o,c]),this.size=++p.size,this;p=this.__data__=new ha(v)}return p.set(o,c),this.size=p.size,this}wi.prototype.clear=GR,wi.prototype.delete=VR,wi.prototype.get=KR,wi.prototype.has=jR,wi.prototype.set=HR;function kv(o,c){var p=st(o),v=!p&&Ls(o),C=!p&&!v&&Xa(o),N=!p&&!v&&!C&&Fo(o),P=p||v||C||N,q=P?wp(o.length,tR):[],z=q.length;for(var he in o)(c||Wt.call(o,he))&&!(P&&(he=="length"||C&&(he=="offset"||he=="parent")||N&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||ya(he,z)))&&q.push(he);return q}function Iv(o){var c=o.length;return c?o[Mp(0,c-1)]:t}function YR(o,c){return hf(Tn(o),Ns(c,0,o.length))}function WR(o){return hf(Tn(o))}function Ap(o,c,p){(p!==t&&!Ei(o[c],p)||p===t&&!(c in o))&&pa(o,c,p)}function tu(o,c,p){var v=o[c];(!(Wt.call(o,c)&&Ei(v,p))||p===t&&!(c in o))&&pa(o,c,p)}function $c(o,c){for(var p=o.length;p--;)if(Ei(o[p][0],c))return p;return-1}function zR(o,c,p,v){return Ya(o,function(C,N,P){c(v,C,p(C),P)}),v}function Rv(o,c){return o&&Gi(c,Ur(c),o)}function QR(o,c){return o&&Gi(c,kn(c),o)}function pa(o,c,p){c=="__proto__"&&Wc?Wc(o,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[c]=p}function kp(o,c){for(var p=-1,v=c.length,C=ie(v),N=o==null;++p<v;)C[p]=N?t:l0(o,c[p]);return C}function Ns(o,c,p){return o===o&&(p!==t&&(o=o<=p?o:p),c!==t&&(o=o>=c?o:c)),o}function Zn(o,c,p,v,C,N){var P,q=c&f,z=c&d,he=c&h;if(p&&(P=C?p(o,v,C,N):p(o)),P!==t)return P;if(!mr(o))return o;var pe=st(o);if(pe){if(P=MN(o),!q)return Tn(o,P)}else{var ye=ln(o),ke=ye==B||ye==L;if(Xa(o))return e1(o,q);if(ye==J||ye==fe||ke&&!C){if(P=z||ke?{}:_1(o),!q)return z?TN(o,QR(P,o)):SN(o,Rv(P,o))}else{if(!tr[ye])return C?o:{};P=UN(o,ye,q)}}N||(N=new wi);var Fe=N.get(o);if(Fe)return Fe;N.set(o,P),z1(o)?o.forEach(function(ze){P.add(Zn(ze,c,p,ze,o,N))}):Y1(o)&&o.forEach(function(ze,bt){P.set(bt,Zn(ze,c,p,bt,o,N))});var We=he?z?zp:Wp:z?kn:Ur,ht=pe?t:We(o);return Qn(ht||o,function(ze,bt){ht&&(bt=ze,ze=o[bt]),tu(P,bt,Zn(ze,c,p,bt,o,N))}),P}function XR(o){var c=Ur(o);return function(p){return Nv(p,o,c)}}function Nv(o,c,p){var v=p.length;if(o==null)return!v;for(o=Zt(o);v--;){var C=p[v],N=c[C],P=o[C];if(P===t&&!(C in o)||!N(P))return!1}return!0}function Bv(o,c,p){if(typeof o!="function")throw new Xn(i);return lu(function(){o.apply(t,p)},c)}function ru(o,c,p,v){var C=-1,N=Pc,P=!0,q=o.length,z=[],he=c.length;if(!q)return z;p&&(c=fr(c,Mn(p))),v?(N=pp,P=!1):c.length>=r&&(N=Ql,P=!1,c=new Rs(c));e:for(;++C<q;){var pe=o[C],ye=p==null?pe:p(pe);if(pe=v||pe!==0?pe:0,P&&ye===ye){for(var ke=he;ke--;)if(c[ke]===ye)continue e;z.push(pe)}else N(c,ye,v)||z.push(pe)}return z}var Ya=a1(qi),Dv=a1(Rp,!0);function JR(o,c){var p=!0;return Ya(o,function(v,C,N){return p=!!c(v,C,N),p}),p}function ef(o,c,p){for(var v=-1,C=o.length;++v<C;){var N=o[v],P=c(N);if(P!=null&&(q===t?P===P&&!Fn(P):p(P,q)))var q=P,z=N}return z}function ZR(o,c,p,v){var C=o.length;for(p=ft(p),p<0&&(p=-p>C?0:C+p),v=v===t||v>C?C:ft(v),v<0&&(v+=C),v=p>v?0:X1(v);p<v;)o[p++]=c;return o}function Ov(o,c){var p=[];return Ya(o,function(v,C,N){c(v,C,N)&&p.push(v)}),p}function Qr(o,c,p,v,C){var N=-1,P=o.length;for(p||(p=qN),C||(C=[]);++N<P;){var q=o[N];c>0&&p(q)?c>1?Qr(q,c-1,p,v,C):Va(C,q):v||(C[C.length]=q)}return C}var Ip=s1(),Lv=s1(!0);function qi(o,c){return o&&Ip(o,c,Ur)}function Rp(o,c){return o&&Lv(o,c,Ur)}function tf(o,c){return Ga(c,function(p){return va(o[p])})}function Bs(o,c){c=za(c,o);for(var p=0,v=c.length;o!=null&&p<v;)o=o[Vi(c[p++])];return p&&p==v?o:t}function Pv(o,c,p){var v=c(o);return st(o)?v:Va(v,p(o))}function hn(o){return o==null?o===t?qe:Q:ks&&ks in Zt(o)?ON(o):WN(o)}function Np(o,c){return o>c}function $R(o,c){return o!=null&&Wt.call(o,c)}function eN(o,c){return o!=null&&c in Zt(o)}function tN(o,c,p){return o>=on(c,p)&&o<Dr(c,p)}function Bp(o,c,p){for(var v=p?pp:Pc,C=o[0].length,N=o.length,P=N,q=ie(N),z=1/0,he=[];P--;){var pe=o[P];P&&c&&(pe=fr(pe,Mn(c))),z=on(pe.length,z),q[P]=!p&&(c||C>=120&&pe.length>=120)?new Rs(P&&pe):t}pe=o[0];var ye=-1,ke=q[0];e:for(;++ye<C&&he.length<z;){var Fe=pe[ye],We=c?c(Fe):Fe;if(Fe=p||Fe!==0?Fe:0,!(ke?Ql(ke,We):v(he,We,p))){for(P=N;--P;){var ht=q[P];if(!(ht?Ql(ht,We):v(o[P],We,p)))continue e}ke&&ke.push(We),he.push(Fe)}}return he}function rN(o,c,p,v){return qi(o,function(C,N,P){c(v,p(C),N,P)}),v}function nu(o,c,p){c=za(c,o),o=b1(o,c);var v=o==null?o:o[Vi(ei(c))];return v==null?t:Pn(v,o,p)}function Mv(o){return _r(o)&&hn(o)==fe}function nN(o){return _r(o)&&hn(o)==Xt}function iN(o){return _r(o)&&hn(o)==tt}function iu(o,c,p,v,C){return o===c?!0:o==null||c==null||!_r(o)&&!_r(c)?o!==o&&c!==c:aN(o,c,p,v,iu,C)}function aN(o,c,p,v,C,N){var P=st(o),q=st(c),z=P?vt:ln(o),he=q?vt:ln(c);z=z==fe?J:z,he=he==fe?J:he;var pe=z==J,ye=he==J,ke=z==he;if(ke&&Xa(o)){if(!Xa(c))return!1;P=!0,pe=!1}if(ke&&!pe)return N||(N=new wi),P||Fo(o)?m1(o,c,p,v,C,N):BN(o,c,z,p,v,C,N);if(!(p&g)){var Fe=pe&&Wt.call(o,"__wrapped__"),We=ye&&Wt.call(c,"__wrapped__");if(Fe||We){var ht=Fe?o.value():o,ze=We?c.value():c;return N||(N=new wi),C(ht,ze,p,v,N)}}return ke?(N||(N=new wi),DN(o,c,p,v,C,N)):!1}function sN(o){return _r(o)&&ln(o)==Y}function Dp(o,c,p,v){var C=p.length,N=C,P=!v;if(o==null)return!N;for(o=Zt(o);C--;){var q=p[C];if(P&&q[2]?q[1]!==o[q[0]]:!(q[0]in o))return!1}for(;++C<N;){q=p[C];var z=q[0],he=o[z],pe=q[1];if(P&&q[2]){if(he===t&&!(z in o))return!1}else{var ye=new wi;if(v)var ke=v(he,pe,z,o,c,ye);if(!(ke===t?iu(pe,he,g|m,v,ye):ke))return!1}}return!0}function Uv(o){if(!mr(o)||VN(o))return!1;var c=va(o)?sR:Xk;return c.test(Os(o))}function oN(o){return _r(o)&&hn(o)==ne}function lN(o){return _r(o)&&ln(o)==Z}function uN(o){return _r(o)&&_f(o.length)&&!!or[hn(o)]}function Fv(o){return typeof o=="function"?o:o==null?In:typeof o=="object"?st(o)?Vv(o[0],o[1]):Gv(o):o_(o)}function Op(o){if(!ou(o))return dR(o);var c=[];for(var p in Zt(o))Wt.call(o,p)&&p!="constructor"&&c.push(p);return c}function cN(o){if(!mr(o))return YN(o);var c=ou(o),p=[];for(var v in o)v=="constructor"&&(c||!Wt.call(o,v))||p.push(v);return p}function Lp(o,c){return o<c}function qv(o,c){var p=-1,v=An(o)?ie(o.length):[];return Ya(o,function(C,N,P){v[++p]=c(C,N,P)}),v}function Gv(o){var c=Xp(o);return c.length==1&&c[0][2]?E1(c[0][0],c[0][1]):function(p){return p===o||Dp(p,o,c)}}function Vv(o,c){return Zp(o)&&w1(c)?E1(Vi(o),c):function(p){var v=l0(p,o);return v===t&&v===c?u0(p,o):iu(c,v,g|m)}}function rf(o,c,p,v,C){o!==c&&Ip(c,function(N,P){if(C||(C=new wi),mr(N))fN(o,c,P,p,rf,v,C);else{var q=v?v(e0(o,P),N,P+"",o,c,C):t;q===t&&(q=N),Ap(o,P,q)}},kn)}function fN(o,c,p,v,C,N,P){var q=e0(o,p),z=e0(c,p),he=P.get(z);if(he){Ap(o,p,he);return}var pe=N?N(q,z,p+"",o,c,P):t,ye=pe===t;if(ye){var ke=st(z),Fe=!ke&&Xa(z),We=!ke&&!Fe&&Fo(z);pe=z,ke||Fe||We?st(q)?pe=q:Cr(q)?pe=Tn(q):Fe?(ye=!1,pe=e1(z,!0)):We?(ye=!1,pe=t1(z,!0)):pe=[]:uu(z)||Ls(z)?(pe=q,Ls(q)?pe=J1(q):(!mr(q)||va(q))&&(pe=_1(z))):ye=!1}ye&&(P.set(z,pe),C(pe,z,v,N,P),P.delete(z)),Ap(o,p,pe)}function Kv(o,c){var p=o.length;if(!!p)return c+=c<0?p:0,ya(c,p)?o[c]:t}function jv(o,c,p){c.length?c=fr(c,function(N){return st(N)?function(P){return Bs(P,N.length===1?N[0]:N)}:N}):c=[In];var v=-1;c=fr(c,Mn(He()));var C=qv(o,function(N,P,q){var z=fr(c,function(he){return he(N)});return{criteria:z,index:++v,value:N}});return UI(C,function(N,P){return xN(N,P,p)})}function dN(o,c){return Hv(o,c,function(p,v){return u0(o,v)})}function Hv(o,c,p){for(var v=-1,C=c.length,N={};++v<C;){var P=c[v],q=Bs(o,P);p(q,P)&&au(N,za(P,o),q)}return N}function hN(o){return function(c){return Bs(c,o)}}function Pp(o,c,p,v){var C=v?MI:Io,N=-1,P=c.length,q=o;for(o===c&&(c=Tn(c)),p&&(q=fr(o,Mn(p)));++N<P;)for(var z=0,he=c[N],pe=p?p(he):he;(z=C(q,pe,z,v))>-1;)q!==o&&Yc.call(q,z,1),Yc.call(o,z,1);return o}function Yv(o,c){for(var p=o?c.length:0,v=p-1;p--;){var C=c[p];if(p==v||C!==N){var N=C;ya(C)?Yc.call(o,C,1):qp(o,C)}}return o}function Mp(o,c){return o+Qc(Tv()*(c-o+1))}function pN(o,c,p,v){for(var C=-1,N=Dr(zc((c-o)/(p||1)),0),P=ie(N);N--;)P[v?N:++C]=o,o+=p;return P}function Up(o,c){var p="";if(!o||c<1||c>Ee)return p;do c%2&&(p+=o),c=Qc(c/2),c&&(o+=o);while(c);return p}function _t(o,c){return t0(C1(o,c,In),o+"")}function gN(o){return Iv(qo(o))}function mN(o,c){var p=qo(o);return hf(p,Ns(c,0,p.length))}function au(o,c,p,v){if(!mr(o))return o;c=za(c,o);for(var C=-1,N=c.length,P=N-1,q=o;q!=null&&++C<N;){var z=Vi(c[C]),he=p;if(z==="__proto__"||z==="constructor"||z==="prototype")return o;if(C!=P){var pe=q[z];he=v?v(pe,z,q):t,he===t&&(he=mr(pe)?pe:ya(c[C+1])?[]:{})}tu(q,z,he),q=q[z]}return o}var Wv=Xc?function(o,c){return Xc.set(o,c),o}:In,yN=Wc?function(o,c){return Wc(o,"toString",{configurable:!0,enumerable:!1,value:f0(c),writable:!0})}:In;function vN(o){return hf(qo(o))}function $n(o,c,p){var v=-1,C=o.length;c<0&&(c=-c>C?0:C+c),p=p>C?C:p,p<0&&(p+=C),C=c>p?0:p-c>>>0,c>>>=0;for(var N=ie(C);++v<C;)N[v]=o[v+c];return N}function _N(o,c){var p;return Ya(o,function(v,C,N){return p=c(v,C,N),!p}),!!p}function nf(o,c,p){var v=0,C=o==null?v:o.length;if(typeof c=="number"&&c===c&&C<=yt){for(;v<C;){var N=v+C>>>1,P=o[N];P!==null&&!Fn(P)&&(p?P<=c:P<c)?v=N+1:C=N}return C}return Fp(o,c,In,p)}function Fp(o,c,p,v){var C=0,N=o==null?0:o.length;if(N===0)return 0;c=p(c);for(var P=c!==c,q=c===null,z=Fn(c),he=c===t;C<N;){var pe=Qc((C+N)/2),ye=p(o[pe]),ke=ye!==t,Fe=ye===null,We=ye===ye,ht=Fn(ye);if(P)var ze=v||We;else he?ze=We&&(v||ke):q?ze=We&&ke&&(v||!Fe):z?ze=We&&ke&&!Fe&&(v||!ht):Fe||ht?ze=!1:ze=v?ye<=c:ye<c;ze?C=pe+1:N=pe}return on(N,Et)}function zv(o,c){for(var p=-1,v=o.length,C=0,N=[];++p<v;){var P=o[p],q=c?c(P):P;if(!p||!Ei(q,z)){var z=q;N[C++]=P===0?0:P}}return N}function Qv(o){return typeof o=="number"?o:Fn(o)?Je:+o}function Un(o){if(typeof o=="string")return o;if(st(o))return fr(o,Un)+"";if(Fn(o))return Av?Av.call(o):"";var c=o+"";return c=="0"&&1/o==-Se?"-0":c}function Wa(o,c,p){var v=-1,C=Pc,N=o.length,P=!0,q=[],z=q;if(p)P=!1,C=pp;else if(N>=r){var he=c?null:RN(o);if(he)return Uc(he);P=!1,C=Ql,z=new Rs}else z=c?[]:q;e:for(;++v<N;){var pe=o[v],ye=c?c(pe):pe;if(pe=p||pe!==0?pe:0,P&&ye===ye){for(var ke=z.length;ke--;)if(z[ke]===ye)continue e;c&&z.push(ye),q.push(pe)}else C(z,ye,p)||(z!==q&&z.push(ye),q.push(pe))}return q}function qp(o,c){return c=za(c,o),o=b1(o,c),o==null||delete o[Vi(ei(c))]}function Xv(o,c,p,v){return au(o,c,p(Bs(o,c)),v)}function af(o,c,p,v){for(var C=o.length,N=v?C:-1;(v?N--:++N<C)&&c(o[N],N,o););return p?$n(o,v?0:N,v?N+1:C):$n(o,v?N+1:0,v?C:N)}function Jv(o,c){var p=o;return p instanceof It&&(p=p.value()),gp(c,function(v,C){return C.func.apply(C.thisArg,Va([v],C.args))},p)}function Gp(o,c,p){var v=o.length;if(v<2)return v?Wa(o[0]):[];for(var C=-1,N=ie(v);++C<v;)for(var P=o[C],q=-1;++q<v;)q!=C&&(N[C]=ru(N[C]||P,o[q],c,p));return Wa(Qr(N,1),c,p)}function Zv(o,c,p){for(var v=-1,C=o.length,N=c.length,P={};++v<C;){var q=v<N?c[v]:t;p(P,o[v],q)}return P}function Vp(o){return Cr(o)?o:[]}function Kp(o){return typeof o=="function"?o:In}function za(o,c){return st(o)?o:Zp(o,c)?[o]:A1(Kt(o))}var wN=_t;function Qa(o,c,p){var v=o.length;return p=p===t?v:p,!c&&p>=v?o:$n(o,c,p)}var $v=oR||function(o){return Mr.clearTimeout(o)};function e1(o,c){if(c)return o.slice();var p=o.length,v=Ev?Ev(p):new o.constructor(p);return o.copy(v),v}function jp(o){var c=new o.constructor(o.byteLength);return new jc(c).set(new jc(o)),c}function EN(o,c){var p=c?jp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function CN(o){var c=new o.constructor(o.source,My.exec(o));return c.lastIndex=o.lastIndex,c}function bN(o){return eu?Zt(eu.call(o)):{}}function t1(o,c){var p=c?jp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function r1(o,c){if(o!==c){var p=o!==t,v=o===null,C=o===o,N=Fn(o),P=c!==t,q=c===null,z=c===c,he=Fn(c);if(!q&&!he&&!N&&o>c||N&&P&&z&&!q&&!he||v&&P&&z||!p&&z||!C)return 1;if(!v&&!N&&!he&&o<c||he&&p&&C&&!v&&!N||q&&p&&C||!P&&C||!z)return-1}return 0}function xN(o,c,p){for(var v=-1,C=o.criteria,N=c.criteria,P=C.length,q=p.length;++v<P;){var z=r1(C[v],N[v]);if(z){if(v>=q)return z;var he=p[v];return z*(he=="desc"?-1:1)}}return o.index-c.index}function n1(o,c,p,v){for(var C=-1,N=o.length,P=p.length,q=-1,z=c.length,he=Dr(N-P,0),pe=ie(z+he),ye=!v;++q<z;)pe[q]=c[q];for(;++C<P;)(ye||C<N)&&(pe[p[C]]=o[C]);for(;he--;)pe[q++]=o[C++];return pe}function i1(o,c,p,v){for(var C=-1,N=o.length,P=-1,q=p.length,z=-1,he=c.length,pe=Dr(N-q,0),ye=ie(pe+he),ke=!v;++C<pe;)ye[C]=o[C];for(var Fe=C;++z<he;)ye[Fe+z]=c[z];for(;++P<q;)(ke||C<N)&&(ye[Fe+p[P]]=o[C++]);return ye}function Tn(o,c){var p=-1,v=o.length;for(c||(c=ie(v));++p<v;)c[p]=o[p];return c}function Gi(o,c,p,v){var C=!p;p||(p={});for(var N=-1,P=c.length;++N<P;){var q=c[N],z=v?v(p[q],o[q],q,p,o):t;z===t&&(z=o[q]),C?pa(p,q,z):tu(p,q,z)}return p}function SN(o,c){return Gi(o,Jp(o),c)}function TN(o,c){return Gi(o,y1(o),c)}function sf(o,c){return function(p,v){var C=st(p)?NI:zR,N=c?c():{};return C(p,o,He(v,2),N)}}function Po(o){return _t(function(c,p){var v=-1,C=p.length,N=C>1?p[C-1]:t,P=C>2?p[2]:t;for(N=o.length>3&&typeof N=="function"?(C--,N):t,P&&pn(p[0],p[1],P)&&(N=C<3?t:N,C=1),c=Zt(c);++v<C;){var q=p[v];q&&o(c,q,v,N)}return c})}function a1(o,c){return function(p,v){if(p==null)return p;if(!An(p))return o(p,v);for(var C=p.length,N=c?C:-1,P=Zt(p);(c?N--:++N<C)&&v(P[N],N,P)!==!1;);return p}}function s1(o){return function(c,p,v){for(var C=-1,N=Zt(c),P=v(c),q=P.length;q--;){var z=P[o?q:++C];if(p(N[z],z,N)===!1)break}return c}}function AN(o,c,p){var v=c&y,C=su(o);function N(){var P=this&&this!==Mr&&this instanceof N?C:o;return P.apply(v?p:this,arguments)}return N}function o1(o){return function(c){c=Kt(c);var p=Ro(c)?_i(c):t,v=p?p[0]:c.charAt(0),C=p?Qa(p,1).join(""):c.slice(1);return v[o]()+C}}function Mo(o){return function(c){return gp(a_(i_(c).replace(yI,"")),o,"")}}function su(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Lo(o.prototype),v=o.apply(p,c);return mr(v)?v:p}}function kN(o,c,p){var v=su(o);function C(){for(var N=arguments.length,P=ie(N),q=N,z=Uo(C);q--;)P[q]=arguments[q];var he=N<3&&P[0]!==z&&P[N-1]!==z?[]:Ka(P,z);if(N-=he.length,N<p)return d1(o,c,of,C.placeholder,t,P,he,t,t,p-N);var pe=this&&this!==Mr&&this instanceof C?v:o;return Pn(pe,this,P)}return C}function l1(o){return function(c,p,v){var C=Zt(c);if(!An(c)){var N=He(p,3);c=Ur(c),p=function(q){return N(C[q],q,C)}}var P=o(c,p,v);return P>-1?C[N?c[P]:P]:t}}function u1(o){return ma(function(c){var p=c.length,v=p,C=Jn.prototype.thru;for(o&&c.reverse();v--;){var N=c[v];if(typeof N!="function")throw new Xn(i);if(C&&!P&&ff(N)=="wrapper")var P=new Jn([],!0)}for(v=P?v:p;++v<p;){N=c[v];var q=ff(N),z=q=="wrapper"?Qp(N):t;z&&$p(z[0])&&z[1]==(D|w|I|O)&&!z[4].length&&z[9]==1?P=P[ff(z[0])].apply(P,z[3]):P=N.length==1&&$p(N)?P[q]():P.thru(N)}return function(){var he=arguments,pe=he[0];if(P&&he.length==1&&st(pe))return P.plant(pe).value();for(var ye=0,ke=p?c[ye].apply(this,he):pe;++ye<p;)ke=c[ye].call(this,ke);return ke}})}function of(o,c,p,v,C,N,P,q,z,he){var pe=c&D,ye=c&y,ke=c&_,Fe=c&(w|b),We=c&ee,ht=ke?t:su(o);function ze(){for(var bt=arguments.length,Dt=ie(bt),qn=bt;qn--;)Dt[qn]=arguments[qn];if(Fe)var gn=Uo(ze),Gn=qI(Dt,gn);if(v&&(Dt=n1(Dt,v,C,Fe)),N&&(Dt=i1(Dt,N,P,Fe)),bt-=Gn,Fe&&bt<he){var br=Ka(Dt,gn);return d1(o,c,of,ze.placeholder,p,Dt,br,q,z,he-bt)}var Ci=ye?p:this,wa=ke?Ci[o]:o;return bt=Dt.length,q?Dt=zN(Dt,q):We&&bt>1&&Dt.reverse(),pe&&z<bt&&(Dt.length=z),this&&this!==Mr&&this instanceof ze&&(wa=ht||su(wa)),wa.apply(Ci,Dt)}return ze}function c1(o,c){return function(p,v){return rN(p,o,c(v),{})}}function lf(o,c){return function(p,v){var C;if(p===t&&v===t)return c;if(p!==t&&(C=p),v!==t){if(C===t)return v;typeof p=="string"||typeof v=="string"?(p=Un(p),v=Un(v)):(p=Qv(p),v=Qv(v)),C=o(p,v)}return C}}function Hp(o){return ma(function(c){return c=fr(c,Mn(He())),_t(function(p){var v=this;return o(c,function(C){return Pn(C,v,p)})})})}function uf(o,c){c=c===t?" ":Un(c);var p=c.length;if(p<2)return p?Up(c,o):c;var v=Up(c,zc(o/No(c)));return Ro(c)?Qa(_i(v),0,o).join(""):v.slice(0,o)}function IN(o,c,p,v){var C=c&y,N=su(o);function P(){for(var q=-1,z=arguments.length,he=-1,pe=v.length,ye=ie(pe+z),ke=this&&this!==Mr&&this instanceof P?N:o;++he<pe;)ye[he]=v[he];for(;z--;)ye[he++]=arguments[++q];return Pn(ke,C?p:this,ye)}return P}function f1(o){return function(c,p,v){return v&&typeof v!="number"&&pn(c,p,v)&&(p=v=t),c=_a(c),p===t?(p=c,c=0):p=_a(p),v=v===t?c<p?1:-1:_a(v),pN(c,p,v,o)}}function cf(o){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=ti(c),p=ti(p)),o(c,p)}}function d1(o,c,p,v,C,N,P,q,z,he){var pe=c&w,ye=pe?P:t,ke=pe?t:P,Fe=pe?N:t,We=pe?t:N;c|=pe?I:R,c&=~(pe?R:I),c&E||(c&=~(y|_));var ht=[o,c,C,Fe,ye,We,ke,q,z,he],ze=p.apply(t,ht);return $p(o)&&x1(ze,ht),ze.placeholder=v,S1(ze,o,c)}function Yp(o){var c=Br[o];return function(p,v){if(p=ti(p),v=v==null?0:on(ft(v),292),v&&Sv(p)){var C=(Kt(p)+"e").split("e"),N=c(C[0]+"e"+(+C[1]+v));return C=(Kt(N)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return c(p)}}var RN=Do&&1/Uc(new Do([,-0]))[1]==Se?function(o){return new Do(o)}:p0;function h1(o){return function(c){var p=ln(c);return p==Y?Cp(c):p==Z?WI(c):FI(c,o(c))}}function ga(o,c,p,v,C,N,P,q){var z=c&_;if(!z&&typeof o!="function")throw new Xn(i);var he=v?v.length:0;if(he||(c&=~(I|R),v=C=t),P=P===t?P:Dr(ft(P),0),q=q===t?q:ft(q),he-=C?C.length:0,c&R){var pe=v,ye=C;v=C=t}var ke=z?t:Qp(o),Fe=[o,c,p,v,C,pe,ye,N,P,q];if(ke&&HN(Fe,ke),o=Fe[0],c=Fe[1],p=Fe[2],v=Fe[3],C=Fe[4],q=Fe[9]=Fe[9]===t?z?0:o.length:Dr(Fe[9]-he,0),!q&&c&(w|b)&&(c&=~(w|b)),!c||c==y)var We=AN(o,c,p);else c==w||c==b?We=kN(o,c,q):(c==I||c==(y|I))&&!C.length?We=IN(o,c,p,v):We=of.apply(t,Fe);var ht=ke?Wv:x1;return S1(ht(We,Fe),o,c)}function p1(o,c,p,v){return o===t||Ei(o,Bo[p])&&!Wt.call(v,p)?c:o}function g1(o,c,p,v,C,N){return mr(o)&&mr(c)&&(N.set(c,o),rf(o,c,t,g1,N),N.delete(c)),o}function NN(o){return uu(o)?t:o}function m1(o,c,p,v,C,N){var P=p&g,q=o.length,z=c.length;if(q!=z&&!(P&&z>q))return!1;var he=N.get(o),pe=N.get(c);if(he&&pe)return he==c&&pe==o;var ye=-1,ke=!0,Fe=p&m?new Rs:t;for(N.set(o,c),N.set(c,o);++ye<q;){var We=o[ye],ht=c[ye];if(v)var ze=P?v(ht,We,ye,c,o,N):v(We,ht,ye,o,c,N);if(ze!==t){if(ze)continue;ke=!1;break}if(Fe){if(!mp(c,function(bt,Dt){if(!Ql(Fe,Dt)&&(We===bt||C(We,bt,p,v,N)))return Fe.push(Dt)})){ke=!1;break}}else if(!(We===ht||C(We,ht,p,v,N))){ke=!1;break}}return N.delete(o),N.delete(c),ke}function BN(o,c,p,v,C,N,P){switch(p){case at:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case Xt:return!(o.byteLength!=c.byteLength||!N(new jc(o),new jc(c)));case Ct:case tt:case V:return Ei(+o,+c);case A:return o.name==c.name&&o.message==c.message;case ne:case de:return o==c+"";case Y:var q=Cp;case Z:var z=v&g;if(q||(q=Uc),o.size!=c.size&&!z)return!1;var he=P.get(o);if(he)return he==c;v|=m,P.set(o,c);var pe=m1(q(o),q(c),v,C,N,P);return P.delete(o),pe;case Ue:if(eu)return eu.call(o)==eu.call(c)}return!1}function DN(o,c,p,v,C,N){var P=p&g,q=Wp(o),z=q.length,he=Wp(c),pe=he.length;if(z!=pe&&!P)return!1;for(var ye=z;ye--;){var ke=q[ye];if(!(P?ke in c:Wt.call(c,ke)))return!1}var Fe=N.get(o),We=N.get(c);if(Fe&&We)return Fe==c&&We==o;var ht=!0;N.set(o,c),N.set(c,o);for(var ze=P;++ye<z;){ke=q[ye];var bt=o[ke],Dt=c[ke];if(v)var qn=P?v(Dt,bt,ke,c,o,N):v(bt,Dt,ke,o,c,N);if(!(qn===t?bt===Dt||C(bt,Dt,p,v,N):qn)){ht=!1;break}ze||(ze=ke=="constructor")}if(ht&&!ze){var gn=o.constructor,Gn=c.constructor;gn!=Gn&&"constructor"in o&&"constructor"in c&&!(typeof gn=="function"&&gn instanceof gn&&typeof Gn=="function"&&Gn instanceof Gn)&&(ht=!1)}return N.delete(o),N.delete(c),ht}function ma(o){return t0(C1(o,t,N1),o+"")}function Wp(o){return Pv(o,Ur,Jp)}function zp(o){return Pv(o,kn,y1)}var Qp=Xc?function(o){return Xc.get(o)}:p0;function ff(o){for(var c=o.name+"",p=Oo[c],v=Wt.call(Oo,c)?p.length:0;v--;){var C=p[v],N=C.func;if(N==null||N==o)return C.name}return c}function Uo(o){var c=Wt.call(k,"placeholder")?k:o;return c.placeholder}function He(){var o=k.iteratee||d0;return o=o===d0?Fv:o,arguments.length?o(arguments[0],arguments[1]):o}function df(o,c){var p=o.__data__;return GN(c)?p[typeof c=="string"?"string":"hash"]:p.map}function Xp(o){for(var c=Ur(o),p=c.length;p--;){var v=c[p],C=o[v];c[p]=[v,C,w1(C)]}return c}function Ds(o,c){var p=jI(o,c);return Uv(p)?p:t}function ON(o){var c=Wt.call(o,ks),p=o[ks];try{o[ks]=t;var v=!0}catch(N){}var C=Vc.call(o);return v&&(c?o[ks]=p:delete o[ks]),C}var Jp=xp?function(o){return o==null?[]:(o=Zt(o),Ga(xp(o),function(c){return bv.call(o,c)}))}:g0,y1=xp?function(o){for(var c=[];o;)Va(c,Jp(o)),o=Hc(o);return c}:g0,ln=hn;(Sp&&ln(new Sp(new ArrayBuffer(1)))!=at||Jl&&ln(new Jl)!=Y||Tp&&ln(Tp.resolve())!=H||Do&&ln(new Do)!=Z||Zl&&ln(new Zl)!=ct)&&(ln=function(o){var c=hn(o),p=c==J?o.constructor:t,v=p?Os(p):"";if(v)switch(v){case mR:return at;case yR:return Y;case vR:return H;case _R:return Z;case wR:return ct}return c});function LN(o,c,p){for(var v=-1,C=p.length;++v<C;){var N=p[v],P=N.size;switch(N.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=on(c,o+P);break;case"takeRight":o=Dr(o,c-P);break}}return{start:o,end:c}}function PN(o){var c=o.match(Vk);return c?c[1].split(Kk):[]}function v1(o,c,p){c=za(c,o);for(var v=-1,C=c.length,N=!1;++v<C;){var P=Vi(c[v]);if(!(N=o!=null&&p(o,P)))break;o=o[P]}return N||++v!=C?N:(C=o==null?0:o.length,!!C&&_f(C)&&ya(P,C)&&(st(o)||Ls(o)))}function MN(o){var c=o.length,p=new o.constructor(c);return c&&typeof o[0]=="string"&&Wt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function _1(o){return typeof o.constructor=="function"&&!ou(o)?Lo(Hc(o)):{}}function UN(o,c,p){var v=o.constructor;switch(c){case Xt:return jp(o);case Ct:case tt:return new v(+o);case at:return EN(o,p);case Bt:case gr:case qa:case Ss:case Ts:case Sn:case fa:case sn:case Nr:return t1(o,p);case Y:return new v;case V:case de:return new v(o);case ne:return CN(o);case Z:return new v;case Ue:return bN(o)}}function FN(o,c){var p=c.length;if(!p)return o;var v=p-1;return c[v]=(p>1?"& ":"")+c[v],c=c.join(p>2?", ":" "),o.replace(Gk,`{
/* [wrapped with `+c+`] */
`)}function qN(o){return st(o)||Ls(o)||!!(xv&&o&&o[xv])}function ya(o,c){var p=typeof o;return c=c==null?Ee:c,!!c&&(p=="number"||p!="symbol"&&Zk.test(o))&&o>-1&&o%1==0&&o<c}function pn(o,c,p){if(!mr(p))return!1;var v=typeof c;return(v=="number"?An(p)&&ya(c,p.length):v=="string"&&c in p)?Ei(p[c],o):!1}function Zp(o,c){if(st(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Fn(o)?!0:Mk.test(o)||!Pk.test(o)||c!=null&&o in Zt(c)}function GN(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function $p(o){var c=ff(o),p=k[c];if(typeof p!="function"||!(c in It.prototype))return!1;if(o===p)return!0;var v=Qp(p);return!!v&&o===v[0]}function VN(o){return!!wv&&wv in o}var KN=qc?va:m0;function ou(o){var c=o&&o.constructor,p=typeof c=="function"&&c.prototype||Bo;return o===p}function w1(o){return o===o&&!mr(o)}function E1(o,c){return function(p){return p==null?!1:p[o]===c&&(c!==t||o in Zt(p))}}function jN(o){var c=yf(o,function(v){return p.size===l&&p.clear(),v}),p=c.cache;return c}function HN(o,c){var p=o[1],v=c[1],C=p|v,N=C<(y|_|D),P=v==D&&p==w||v==D&&p==O&&o[7].length<=c[8]||v==(D|O)&&c[7].length<=c[8]&&p==w;if(!(N||P))return o;v&y&&(o[2]=c[2],C|=p&y?0:E);var q=c[3];if(q){var z=o[3];o[3]=z?n1(z,q,c[4]):q,o[4]=z?Ka(o[3],u):c[4]}return q=c[5],q&&(z=o[5],o[5]=z?i1(z,q,c[6]):q,o[6]=z?Ka(o[5],u):c[6]),q=c[7],q&&(o[7]=q),v&D&&(o[8]=o[8]==null?c[8]:on(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=C,o}function YN(o){var c=[];if(o!=null)for(var p in Zt(o))c.push(p);return c}function WN(o){return Vc.call(o)}function C1(o,c,p){return c=Dr(c===t?o.length-1:c,0),function(){for(var v=arguments,C=-1,N=Dr(v.length-c,0),P=ie(N);++C<N;)P[C]=v[c+C];C=-1;for(var q=ie(c+1);++C<c;)q[C]=v[C];return q[c]=p(P),Pn(o,this,q)}}function b1(o,c){return c.length<2?o:Bs(o,$n(c,0,-1))}function zN(o,c){for(var p=o.length,v=on(c.length,p),C=Tn(o);v--;){var N=c[v];o[v]=ya(N,p)?C[N]:t}return o}function e0(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var x1=T1(Wv),lu=uR||function(o,c){return Mr.setTimeout(o,c)},t0=T1(yN);function S1(o,c,p){var v=c+"";return t0(o,FN(v,QN(PN(v),p)))}function T1(o){var c=0,p=0;return function(){var v=hR(),C=se-(v-p);if(p=v,C>0){if(++c>=le)return arguments[0]}else c=0;return o.apply(t,arguments)}}function hf(o,c){var p=-1,v=o.length,C=v-1;for(c=c===t?v:c;++p<c;){var N=Mp(p,C),P=o[N];o[N]=o[p],o[p]=P}return o.length=c,o}var A1=jN(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(Uk,function(p,v,C,N){c.push(C?N.replace(Yk,"$1"):v||p)}),c});function Vi(o){if(typeof o=="string"||Fn(o))return o;var c=o+"";return c=="0"&&1/o==-Se?"-0":c}function Os(o){if(o!=null){try{return Gc.call(o)}catch(c){}try{return o+""}catch(c){}}return""}function QN(o,c){return Qn(Ze,function(p){var v="_."+p[0];c&p[1]&&!Pc(o,v)&&o.push(v)}),o.sort()}function k1(o){if(o instanceof It)return o.clone();var c=new Jn(o.__wrapped__,o.__chain__);return c.__actions__=Tn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function XN(o,c,p){(p?pn(o,c,p):c===t)?c=1:c=Dr(ft(c),0);var v=o==null?0:o.length;if(!v||c<1)return[];for(var C=0,N=0,P=ie(zc(v/c));C<v;)P[N++]=$n(o,C,C+=c);return P}function JN(o){for(var c=-1,p=o==null?0:o.length,v=0,C=[];++c<p;){var N=o[c];N&&(C[v++]=N)}return C}function ZN(){var o=arguments.length;if(!o)return[];for(var c=ie(o-1),p=arguments[0],v=o;v--;)c[v-1]=arguments[v];return Va(st(p)?Tn(p):[p],Qr(c,1))}var $N=_t(function(o,c){return Cr(o)?ru(o,Qr(c,1,Cr,!0)):[]}),eB=_t(function(o,c){var p=ei(c);return Cr(p)&&(p=t),Cr(o)?ru(o,Qr(c,1,Cr,!0),He(p,2)):[]}),tB=_t(function(o,c){var p=ei(c);return Cr(p)&&(p=t),Cr(o)?ru(o,Qr(c,1,Cr,!0),t,p):[]});function rB(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ft(c),$n(o,c<0?0:c,v)):[]}function nB(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ft(c),c=v-c,$n(o,0,c<0?0:c)):[]}function iB(o,c){return o&&o.length?af(o,He(c,3),!0,!0):[]}function aB(o,c){return o&&o.length?af(o,He(c,3),!0):[]}function sB(o,c,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&pn(o,c,p)&&(p=0,v=C),ZR(o,c,p,v)):[]}function I1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:ft(p);return C<0&&(C=Dr(v+C,0)),Mc(o,He(c,3),C)}function R1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==t&&(C=ft(p),C=p<0?Dr(v+C,0):on(C,v-1)),Mc(o,He(c,3),C,!0)}function N1(o){var c=o==null?0:o.length;return c?Qr(o,1):[]}function oB(o){var c=o==null?0:o.length;return c?Qr(o,Se):[]}function lB(o,c){var p=o==null?0:o.length;return p?(c=c===t?1:ft(c),Qr(o,c)):[]}function uB(o){for(var c=-1,p=o==null?0:o.length,v={};++c<p;){var C=o[c];v[C[0]]=C[1]}return v}function B1(o){return o&&o.length?o[0]:t}function cB(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:ft(p);return C<0&&(C=Dr(v+C,0)),Io(o,c,C)}function fB(o){var c=o==null?0:o.length;return c?$n(o,0,-1):[]}var dB=_t(function(o){var c=fr(o,Vp);return c.length&&c[0]===o[0]?Bp(c):[]}),hB=_t(function(o){var c=ei(o),p=fr(o,Vp);return c===ei(p)?c=t:p.pop(),p.length&&p[0]===o[0]?Bp(p,He(c,2)):[]}),pB=_t(function(o){var c=ei(o),p=fr(o,Vp);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===o[0]?Bp(p,t,c):[]});function gB(o,c){return o==null?"":fR.call(o,c)}function ei(o){var c=o==null?0:o.length;return c?o[c-1]:t}function mB(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==t&&(C=ft(p),C=C<0?Dr(v+C,0):on(C,v-1)),c===c?QI(o,c,C):Mc(o,dv,C,!0)}function yB(o,c){return o&&o.length?Kv(o,ft(c)):t}var vB=_t(D1);function D1(o,c){return o&&o.length&&c&&c.length?Pp(o,c):o}function _B(o,c,p){return o&&o.length&&c&&c.length?Pp(o,c,He(p,2)):o}function wB(o,c,p){return o&&o.length&&c&&c.length?Pp(o,c,t,p):o}var EB=ma(function(o,c){var p=o==null?0:o.length,v=kp(o,c);return Yv(o,fr(c,function(C){return ya(C,p)?+C:C}).sort(r1)),v});function CB(o,c){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],N=o.length;for(c=He(c,3);++v<N;){var P=o[v];c(P,v,o)&&(p.push(P),C.push(v))}return Yv(o,C),p}function r0(o){return o==null?o:gR.call(o)}function bB(o,c,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&pn(o,c,p)?(c=0,p=v):(c=c==null?0:ft(c),p=p===t?v:ft(p)),$n(o,c,p)):[]}function xB(o,c){return nf(o,c)}function SB(o,c,p){return Fp(o,c,He(p,2))}function TB(o,c){var p=o==null?0:o.length;if(p){var v=nf(o,c);if(v<p&&Ei(o[v],c))return v}return-1}function AB(o,c){return nf(o,c,!0)}function kB(o,c,p){return Fp(o,c,He(p,2),!0)}function IB(o,c){var p=o==null?0:o.length;if(p){var v=nf(o,c,!0)-1;if(Ei(o[v],c))return v}return-1}function RB(o){return o&&o.length?zv(o):[]}function NB(o,c){return o&&o.length?zv(o,He(c,2)):[]}function BB(o){var c=o==null?0:o.length;return c?$n(o,1,c):[]}function DB(o,c,p){return o&&o.length?(c=p||c===t?1:ft(c),$n(o,0,c<0?0:c)):[]}function OB(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ft(c),c=v-c,$n(o,c<0?0:c,v)):[]}function LB(o,c){return o&&o.length?af(o,He(c,3),!1,!0):[]}function PB(o,c){return o&&o.length?af(o,He(c,3)):[]}var MB=_t(function(o){return Wa(Qr(o,1,Cr,!0))}),UB=_t(function(o){var c=ei(o);return Cr(c)&&(c=t),Wa(Qr(o,1,Cr,!0),He(c,2))}),FB=_t(function(o){var c=ei(o);return c=typeof c=="function"?c:t,Wa(Qr(o,1,Cr,!0),t,c)});function qB(o){return o&&o.length?Wa(o):[]}function GB(o,c){return o&&o.length?Wa(o,He(c,2)):[]}function VB(o,c){return c=typeof c=="function"?c:t,o&&o.length?Wa(o,t,c):[]}function n0(o){if(!(o&&o.length))return[];var c=0;return o=Ga(o,function(p){if(Cr(p))return c=Dr(p.length,c),!0}),wp(c,function(p){return fr(o,yp(p))})}function O1(o,c){if(!(o&&o.length))return[];var p=n0(o);return c==null?p:fr(p,function(v){return Pn(c,t,v)})}var KB=_t(function(o,c){return Cr(o)?ru(o,c):[]}),jB=_t(function(o){return Gp(Ga(o,Cr))}),HB=_t(function(o){var c=ei(o);return Cr(c)&&(c=t),Gp(Ga(o,Cr),He(c,2))}),YB=_t(function(o){var c=ei(o);return c=typeof c=="function"?c:t,Gp(Ga(o,Cr),t,c)}),WB=_t(n0);function zB(o,c){return Zv(o||[],c||[],tu)}function QB(o,c){return Zv(o||[],c||[],au)}var XB=_t(function(o){var c=o.length,p=c>1?o[c-1]:t;return p=typeof p=="function"?(o.pop(),p):t,O1(o,p)});function L1(o){var c=k(o);return c.__chain__=!0,c}function JB(o,c){return c(o),o}function pf(o,c){return c(o)}var ZB=ma(function(o){var c=o.length,p=c?o[0]:0,v=this.__wrapped__,C=function(N){return kp(N,o)};return c>1||this.__actions__.length||!(v instanceof It)||!ya(p)?this.thru(C):(v=v.slice(p,+p+(c?1:0)),v.__actions__.push({func:pf,args:[C],thisArg:t}),new Jn(v,this.__chain__).thru(function(N){return c&&!N.length&&N.push(t),N}))});function $B(){return L1(this)}function eD(){return new Jn(this.value(),this.__chain__)}function tD(){this.__values__===t&&(this.__values__=Q1(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function rD(){return this}function nD(o){for(var c,p=this;p instanceof Zc;){var v=k1(p);v.__index__=0,v.__values__=t,c?C.__wrapped__=v:c=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,c}function iD(){var o=this.__wrapped__;if(o instanceof It){var c=o;return this.__actions__.length&&(c=new It(this)),c=c.reverse(),c.__actions__.push({func:pf,args:[r0],thisArg:t}),new Jn(c,this.__chain__)}return this.thru(r0)}function aD(){return Jv(this.__wrapped__,this.__actions__)}var sD=sf(function(o,c,p){Wt.call(o,p)?++o[p]:pa(o,p,1)});function oD(o,c,p){var v=st(o)?cv:JR;return p&&pn(o,c,p)&&(c=t),v(o,He(c,3))}function lD(o,c){var p=st(o)?Ga:Ov;return p(o,He(c,3))}var uD=l1(I1),cD=l1(R1);function fD(o,c){return Qr(gf(o,c),1)}function dD(o,c){return Qr(gf(o,c),Se)}function hD(o,c,p){return p=p===t?1:ft(p),Qr(gf(o,c),p)}function P1(o,c){var p=st(o)?Qn:Ya;return p(o,He(c,3))}function M1(o,c){var p=st(o)?BI:Dv;return p(o,He(c,3))}var pD=sf(function(o,c,p){Wt.call(o,p)?o[p].push(c):pa(o,p,[c])});function gD(o,c,p,v){o=An(o)?o:qo(o),p=p&&!v?ft(p):0;var C=o.length;return p<0&&(p=Dr(C+p,0)),wf(o)?p<=C&&o.indexOf(c,p)>-1:!!C&&Io(o,c,p)>-1}var mD=_t(function(o,c,p){var v=-1,C=typeof c=="function",N=An(o)?ie(o.length):[];return Ya(o,function(P){N[++v]=C?Pn(c,P,p):nu(P,c,p)}),N}),yD=sf(function(o,c,p){pa(o,p,c)});function gf(o,c){var p=st(o)?fr:qv;return p(o,He(c,3))}function vD(o,c,p,v){return o==null?[]:(st(c)||(c=c==null?[]:[c]),p=v?t:p,st(p)||(p=p==null?[]:[p]),jv(o,c,p))}var _D=sf(function(o,c,p){o[p?0:1].push(c)},function(){return[[],[]]});function wD(o,c,p){var v=st(o)?gp:pv,C=arguments.length<3;return v(o,He(c,4),p,C,Ya)}function ED(o,c,p){var v=st(o)?DI:pv,C=arguments.length<3;return v(o,He(c,4),p,C,Dv)}function CD(o,c){var p=st(o)?Ga:Ov;return p(o,vf(He(c,3)))}function bD(o){var c=st(o)?Iv:gN;return c(o)}function xD(o,c,p){(p?pn(o,c,p):c===t)?c=1:c=ft(c);var v=st(o)?YR:mN;return v(o,c)}function SD(o){var c=st(o)?WR:vN;return c(o)}function TD(o){if(o==null)return 0;if(An(o))return wf(o)?No(o):o.length;var c=ln(o);return c==Y||c==Z?o.size:Op(o).length}function AD(o,c,p){var v=st(o)?mp:_N;return p&&pn(o,c,p)&&(c=t),v(o,He(c,3))}var kD=_t(function(o,c){if(o==null)return[];var p=c.length;return p>1&&pn(o,c[0],c[1])?c=[]:p>2&&pn(c[0],c[1],c[2])&&(c=[c[0]]),jv(o,Qr(c,1),[])}),mf=lR||function(){return Mr.Date.now()};function ID(o,c){if(typeof c!="function")throw new Xn(i);return o=ft(o),function(){if(--o<1)return c.apply(this,arguments)}}function U1(o,c,p){return c=p?t:c,c=o&&c==null?o.length:c,ga(o,D,t,t,t,t,c)}function F1(o,c){var p;if(typeof c!="function")throw new Xn(i);return o=ft(o),function(){return--o>0&&(p=c.apply(this,arguments)),o<=1&&(c=t),p}}var i0=_t(function(o,c,p){var v=y;if(p.length){var C=Ka(p,Uo(i0));v|=I}return ga(o,v,c,p,C)}),q1=_t(function(o,c,p){var v=y|_;if(p.length){var C=Ka(p,Uo(q1));v|=I}return ga(c,v,o,p,C)});function G1(o,c,p){c=p?t:c;var v=ga(o,w,t,t,t,t,t,c);return v.placeholder=G1.placeholder,v}function V1(o,c,p){c=p?t:c;var v=ga(o,b,t,t,t,t,t,c);return v.placeholder=V1.placeholder,v}function K1(o,c,p){var v,C,N,P,q,z,he=0,pe=!1,ye=!1,ke=!0;if(typeof o!="function")throw new Xn(i);c=ti(c)||0,mr(p)&&(pe=!!p.leading,ye="maxWait"in p,N=ye?Dr(ti(p.maxWait)||0,c):N,ke="trailing"in p?!!p.trailing:ke);function Fe(br){var Ci=v,wa=C;return v=C=t,he=br,P=o.apply(wa,Ci),P}function We(br){return he=br,q=lu(bt,c),pe?Fe(br):P}function ht(br){var Ci=br-z,wa=br-he,l_=c-Ci;return ye?on(l_,N-wa):l_}function ze(br){var Ci=br-z,wa=br-he;return z===t||Ci>=c||Ci<0||ye&&wa>=N}function bt(){var br=mf();if(ze(br))return Dt(br);q=lu(bt,ht(br))}function Dt(br){return q=t,ke&&v?Fe(br):(v=C=t,P)}function qn(){q!==t&&$v(q),he=0,v=z=C=q=t}function gn(){return q===t?P:Dt(mf())}function Gn(){var br=mf(),Ci=ze(br);if(v=arguments,C=this,z=br,Ci){if(q===t)return We(z);if(ye)return $v(q),q=lu(bt,c),Fe(z)}return q===t&&(q=lu(bt,c)),P}return Gn.cancel=qn,Gn.flush=gn,Gn}var RD=_t(function(o,c){return Bv(o,1,c)}),ND=_t(function(o,c,p){return Bv(o,ti(c)||0,p)});function BD(o){return ga(o,ee)}function yf(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Xn(i);var p=function(){var v=arguments,C=c?c.apply(this,v):v[0],N=p.cache;if(N.has(C))return N.get(C);var P=o.apply(this,v);return p.cache=N.set(C,P)||N,P};return p.cache=new(yf.Cache||ha),p}yf.Cache=ha;function vf(o){if(typeof o!="function")throw new Xn(i);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function DD(o){return F1(2,o)}var OD=wN(function(o,c){c=c.length==1&&st(c[0])?fr(c[0],Mn(He())):fr(Qr(c,1),Mn(He()));var p=c.length;return _t(function(v){for(var C=-1,N=on(v.length,p);++C<N;)v[C]=c[C].call(this,v[C]);return Pn(o,this,v)})}),a0=_t(function(o,c){var p=Ka(c,Uo(a0));return ga(o,I,t,c,p)}),j1=_t(function(o,c){var p=Ka(c,Uo(j1));return ga(o,R,t,c,p)}),LD=ma(function(o,c){return ga(o,O,t,t,t,c)});function PD(o,c){if(typeof o!="function")throw new Xn(i);return c=c===t?c:ft(c),_t(o,c)}function MD(o,c){if(typeof o!="function")throw new Xn(i);return c=c==null?0:Dr(ft(c),0),_t(function(p){var v=p[c],C=Qa(p,0,c);return v&&Va(C,v),Pn(o,this,C)})}function UD(o,c,p){var v=!0,C=!0;if(typeof o!="function")throw new Xn(i);return mr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),K1(o,c,{leading:v,maxWait:c,trailing:C})}function FD(o){return U1(o,1)}function qD(o,c){return a0(Kp(c),o)}function GD(){if(!arguments.length)return[];var o=arguments[0];return st(o)?o:[o]}function VD(o){return Zn(o,h)}function KD(o,c){return c=typeof c=="function"?c:t,Zn(o,h,c)}function jD(o){return Zn(o,f|h)}function HD(o,c){return c=typeof c=="function"?c:t,Zn(o,f|h,c)}function YD(o,c){return c==null||Nv(o,c,Ur(c))}function Ei(o,c){return o===c||o!==o&&c!==c}var WD=cf(Np),zD=cf(function(o,c){return o>=c}),Ls=Mv(function(){return arguments}())?Mv:function(o){return _r(o)&&Wt.call(o,"callee")&&!bv.call(o,"callee")},st=ie.isArray,QD=iv?Mn(iv):nN;function An(o){return o!=null&&_f(o.length)&&!va(o)}function Cr(o){return _r(o)&&An(o)}function XD(o){return o===!0||o===!1||_r(o)&&hn(o)==Ct}var Xa=cR||m0,JD=av?Mn(av):iN;function ZD(o){return _r(o)&&o.nodeType===1&&!uu(o)}function $D(o){if(o==null)return!0;if(An(o)&&(st(o)||typeof o=="string"||typeof o.splice=="function"||Xa(o)||Fo(o)||Ls(o)))return!o.length;var c=ln(o);if(c==Y||c==Z)return!o.size;if(ou(o))return!Op(o).length;for(var p in o)if(Wt.call(o,p))return!1;return!0}function e3(o,c){return iu(o,c)}function t3(o,c,p){p=typeof p=="function"?p:t;var v=p?p(o,c):t;return v===t?iu(o,c,t,p):!!v}function s0(o){if(!_r(o))return!1;var c=hn(o);return c==A||c==Ce||typeof o.message=="string"&&typeof o.name=="string"&&!uu(o)}function r3(o){return typeof o=="number"&&Sv(o)}function va(o){if(!mr(o))return!1;var c=hn(o);return c==B||c==L||c==it||c==X}function H1(o){return typeof o=="number"&&o==ft(o)}function _f(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ee}function mr(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function _r(o){return o!=null&&typeof o=="object"}var Y1=sv?Mn(sv):sN;function n3(o,c){return o===c||Dp(o,c,Xp(c))}function i3(o,c,p){return p=typeof p=="function"?p:t,Dp(o,c,Xp(c),p)}function a3(o){return W1(o)&&o!=+o}function s3(o){if(KN(o))throw new nt(n);return Uv(o)}function o3(o){return o===null}function l3(o){return o==null}function W1(o){return typeof o=="number"||_r(o)&&hn(o)==V}function uu(o){if(!_r(o)||hn(o)!=J)return!1;var c=Hc(o);if(c===null)return!0;var p=Wt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Gc.call(p)==iR}var o0=ov?Mn(ov):oN;function u3(o){return H1(o)&&o>=-Ee&&o<=Ee}var z1=lv?Mn(lv):lN;function wf(o){return typeof o=="string"||!st(o)&&_r(o)&&hn(o)==de}function Fn(o){return typeof o=="symbol"||_r(o)&&hn(o)==Ue}var Fo=uv?Mn(uv):uN;function c3(o){return o===t}function f3(o){return _r(o)&&ln(o)==ct}function d3(o){return _r(o)&&hn(o)==Qt}var h3=cf(Lp),p3=cf(function(o,c){return o<=c});function Q1(o){if(!o)return[];if(An(o))return wf(o)?_i(o):Tn(o);if(Xl&&o[Xl])return YI(o[Xl]());var c=ln(o),p=c==Y?Cp:c==Z?Uc:qo;return p(o)}function _a(o){if(!o)return o===0?o:0;if(o=ti(o),o===Se||o===-Se){var c=o<0?-1:1;return c*ve}return o===o?o:0}function ft(o){var c=_a(o),p=c%1;return c===c?p?c-p:c:0}function X1(o){return o?Ns(ft(o),0,Ke):0}function ti(o){if(typeof o=="number")return o;if(Fn(o))return Je;if(mr(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=mr(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=gv(o);var p=Qk.test(o);return p||Jk.test(o)?II(o.slice(2),p?2:8):zk.test(o)?Je:+o}function J1(o){return Gi(o,kn(o))}function g3(o){return o?Ns(ft(o),-Ee,Ee):o===0?o:0}function Kt(o){return o==null?"":Un(o)}var m3=Po(function(o,c){if(ou(c)||An(c)){Gi(c,Ur(c),o);return}for(var p in c)Wt.call(c,p)&&tu(o,p,c[p])}),Z1=Po(function(o,c){Gi(c,kn(c),o)}),Ef=Po(function(o,c,p,v){Gi(c,kn(c),o,v)}),y3=Po(function(o,c,p,v){Gi(c,Ur(c),o,v)}),v3=ma(kp);function _3(o,c){var p=Lo(o);return c==null?p:Rv(p,c)}var w3=_t(function(o,c){o=Zt(o);var p=-1,v=c.length,C=v>2?c[2]:t;for(C&&pn(c[0],c[1],C)&&(v=1);++p<v;)for(var N=c[p],P=kn(N),q=-1,z=P.length;++q<z;){var he=P[q],pe=o[he];(pe===t||Ei(pe,Bo[he])&&!Wt.call(o,he))&&(o[he]=N[he])}return o}),E3=_t(function(o){return o.push(t,g1),Pn($1,t,o)});function C3(o,c){return fv(o,He(c,3),qi)}function b3(o,c){return fv(o,He(c,3),Rp)}function x3(o,c){return o==null?o:Ip(o,He(c,3),kn)}function S3(o,c){return o==null?o:Lv(o,He(c,3),kn)}function T3(o,c){return o&&qi(o,He(c,3))}function A3(o,c){return o&&Rp(o,He(c,3))}function k3(o){return o==null?[]:tf(o,Ur(o))}function I3(o){return o==null?[]:tf(o,kn(o))}function l0(o,c,p){var v=o==null?t:Bs(o,c);return v===t?p:v}function R3(o,c){return o!=null&&v1(o,c,$R)}function u0(o,c){return o!=null&&v1(o,c,eN)}var N3=c1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Vc.call(c)),o[c]=p},f0(In)),B3=c1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Vc.call(c)),Wt.call(o,c)?o[c].push(p):o[c]=[p]},He),D3=_t(nu);function Ur(o){return An(o)?kv(o):Op(o)}function kn(o){return An(o)?kv(o,!0):cN(o)}function O3(o,c){var p={};return c=He(c,3),qi(o,function(v,C,N){pa(p,c(v,C,N),v)}),p}function L3(o,c){var p={};return c=He(c,3),qi(o,function(v,C,N){pa(p,C,c(v,C,N))}),p}var P3=Po(function(o,c,p){rf(o,c,p)}),$1=Po(function(o,c,p,v){rf(o,c,p,v)}),M3=ma(function(o,c){var p={};if(o==null)return p;var v=!1;c=fr(c,function(N){return N=za(N,o),v||(v=N.length>1),N}),Gi(o,zp(o),p),v&&(p=Zn(p,f|d|h,NN));for(var C=c.length;C--;)qp(p,c[C]);return p});function U3(o,c){return e_(o,vf(He(c)))}var F3=ma(function(o,c){return o==null?{}:dN(o,c)});function e_(o,c){if(o==null)return{};var p=fr(zp(o),function(v){return[v]});return c=He(c),Hv(o,p,function(v,C){return c(v,C[0])})}function q3(o,c,p){c=za(c,o);var v=-1,C=c.length;for(C||(C=1,o=t);++v<C;){var N=o==null?t:o[Vi(c[v])];N===t&&(v=C,N=p),o=va(N)?N.call(o):N}return o}function G3(o,c,p){return o==null?o:au(o,c,p)}function V3(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:au(o,c,p,v)}var t_=h1(Ur),r_=h1(kn);function K3(o,c,p){var v=st(o),C=v||Xa(o)||Fo(o);if(c=He(c,4),p==null){var N=o&&o.constructor;C?p=v?new N:[]:mr(o)?p=va(N)?Lo(Hc(o)):{}:p={}}return(C?Qn:qi)(o,function(P,q,z){return c(p,P,q,z)}),p}function j3(o,c){return o==null?!0:qp(o,c)}function H3(o,c,p){return o==null?o:Xv(o,c,Kp(p))}function Y3(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:Xv(o,c,Kp(p),v)}function qo(o){return o==null?[]:Ep(o,Ur(o))}function W3(o){return o==null?[]:Ep(o,kn(o))}function z3(o,c,p){return p===t&&(p=c,c=t),p!==t&&(p=ti(p),p=p===p?p:0),c!==t&&(c=ti(c),c=c===c?c:0),Ns(ti(o),c,p)}function Q3(o,c,p){return c=_a(c),p===t?(p=c,c=0):p=_a(p),o=ti(o),tN(o,c,p)}function X3(o,c,p){if(p&&typeof p!="boolean"&&pn(o,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof o=="boolean"&&(p=o,o=t)),o===t&&c===t?(o=0,c=1):(o=_a(o),c===t?(c=o,o=0):c=_a(c)),o>c){var v=o;o=c,c=v}if(p||o%1||c%1){var C=Tv();return on(o+C*(c-o+kI("1e-"+((C+"").length-1))),c)}return Mp(o,c)}var J3=Mo(function(o,c,p){return c=c.toLowerCase(),o+(p?n_(c):c)});function n_(o){return c0(Kt(o).toLowerCase())}function i_(o){return o=Kt(o),o&&o.replace($k,GI).replace(vI,"")}function Z3(o,c,p){o=Kt(o),c=Un(c);var v=o.length;p=p===t?v:Ns(ft(p),0,v);var C=p;return p-=c.length,p>=0&&o.slice(p,C)==c}function $3(o){return o=Kt(o),o&&Dk.test(o)?o.replace(Ly,VI):o}function eO(o){return o=Kt(o),o&&Fk.test(o)?o.replace(ap,"\\$&"):o}var tO=Mo(function(o,c,p){return o+(p?"-":"")+c.toLowerCase()}),rO=Mo(function(o,c,p){return o+(p?" ":"")+c.toLowerCase()}),nO=o1("toLowerCase");function iO(o,c,p){o=Kt(o),c=ft(c);var v=c?No(o):0;if(!c||v>=c)return o;var C=(c-v)/2;return uf(Qc(C),p)+o+uf(zc(C),p)}function aO(o,c,p){o=Kt(o),c=ft(c);var v=c?No(o):0;return c&&v<c?o+uf(c-v,p):o}function sO(o,c,p){o=Kt(o),c=ft(c);var v=c?No(o):0;return c&&v<c?uf(c-v,p)+o:o}function oO(o,c,p){return p||c==null?c=0:c&&(c=+c),pR(Kt(o).replace(sp,""),c||0)}function lO(o,c,p){return(p?pn(o,c,p):c===t)?c=1:c=ft(c),Up(Kt(o),c)}function uO(){var o=arguments,c=Kt(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var cO=Mo(function(o,c,p){return o+(p?"_":"")+c.toLowerCase()});function fO(o,c,p){return p&&typeof p!="number"&&pn(o,c,p)&&(c=p=t),p=p===t?Ke:p>>>0,p?(o=Kt(o),o&&(typeof c=="string"||c!=null&&!o0(c))&&(c=Un(c),!c&&Ro(o))?Qa(_i(o),0,p):o.split(c,p)):[]}var dO=Mo(function(o,c,p){return o+(p?" ":"")+c0(c)});function hO(o,c,p){return o=Kt(o),p=p==null?0:Ns(ft(p),0,o.length),c=Un(c),o.slice(p,p+c.length)==c}function pO(o,c,p){var v=k.templateSettings;p&&pn(o,c,p)&&(c=t),o=Kt(o),c=Ef({},c,v,p1);var C=Ef({},c.imports,v.imports,p1),N=Ur(C),P=Ep(C,N),q,z,he=0,pe=c.interpolate||Dc,ye="__p += '",ke=bp((c.escape||Dc).source+"|"+pe.source+"|"+(pe===Py?Wk:Dc).source+"|"+(c.evaluate||Dc).source+"|$","g"),Fe="//# sourceURL="+(Wt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bI+"]")+`
`;o.replace(ke,function(ze,bt,Dt,qn,gn,Gn){return Dt||(Dt=qn),ye+=o.slice(he,Gn).replace(eI,KI),bt&&(q=!0,ye+=`' +
__e(`+bt+`) +
'`),gn&&(z=!0,ye+=`';
`+gn+`;
__p += '`),Dt&&(ye+=`' +
((__t = (`+Dt+`)) == null ? '' : __t) +
'`),he=Gn+ze.length,ze}),ye+=`';
`;var We=Wt.call(c,"variable")&&c.variable;if(!We)ye=`with (obj) {
`+ye+`
}
`;else if(Hk.test(We))throw new nt(a);ye=(z?ye.replace(cr,""):ye).replace(Rk,"$1").replace(Nk,"$1;"),ye="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ye+`return __p
}`;var ht=s_(function(){return Vt(N,Fe+"return "+ye).apply(t,P)});if(ht.source=ye,s0(ht))throw ht;return ht}function gO(o){return Kt(o).toLowerCase()}function mO(o){return Kt(o).toUpperCase()}function yO(o,c,p){if(o=Kt(o),o&&(p||c===t))return gv(o);if(!o||!(c=Un(c)))return o;var v=_i(o),C=_i(c),N=mv(v,C),P=yv(v,C)+1;return Qa(v,N,P).join("")}function vO(o,c,p){if(o=Kt(o),o&&(p||c===t))return o.slice(0,_v(o)+1);if(!o||!(c=Un(c)))return o;var v=_i(o),C=yv(v,_i(c))+1;return Qa(v,0,C).join("")}function _O(o,c,p){if(o=Kt(o),o&&(p||c===t))return o.replace(sp,"");if(!o||!(c=Un(c)))return o;var v=_i(o),C=mv(v,_i(c));return Qa(v,C).join("")}function wO(o,c){var p=G,v=U;if(mr(c)){var C="separator"in c?c.separator:C;p="length"in c?ft(c.length):p,v="omission"in c?Un(c.omission):v}o=Kt(o);var N=o.length;if(Ro(o)){var P=_i(o);N=P.length}if(p>=N)return o;var q=p-No(v);if(q<1)return v;var z=P?Qa(P,0,q).join(""):o.slice(0,q);if(C===t)return z+v;if(P&&(q+=z.length-q),o0(C)){if(o.slice(q).search(C)){var he,pe=z;for(C.global||(C=bp(C.source,Kt(My.exec(C))+"g")),C.lastIndex=0;he=C.exec(pe);)var ye=he.index;z=z.slice(0,ye===t?q:ye)}}else if(o.indexOf(Un(C),q)!=q){var ke=z.lastIndexOf(C);ke>-1&&(z=z.slice(0,ke))}return z+v}function EO(o){return o=Kt(o),o&&Bk.test(o)?o.replace(Oy,XI):o}var CO=Mo(function(o,c,p){return o+(p?" ":"")+c.toUpperCase()}),c0=o1("toUpperCase");function a_(o,c,p){return o=Kt(o),c=p?t:c,c===t?HI(o)?$I(o):PI(o):o.match(c)||[]}var s_=_t(function(o,c){try{return Pn(o,t,c)}catch(p){return s0(p)?p:new nt(p)}}),bO=ma(function(o,c){return Qn(c,function(p){p=Vi(p),pa(o,p,i0(o[p],o))}),o});function xO(o){var c=o==null?0:o.length,p=He();return o=c?fr(o,function(v){if(typeof v[1]!="function")throw new Xn(i);return[p(v[0]),v[1]]}):[],_t(function(v){for(var C=-1;++C<c;){var N=o[C];if(Pn(N[0],this,v))return Pn(N[1],this,v)}})}function SO(o){return XR(Zn(o,f))}function f0(o){return function(){return o}}function TO(o,c){return o==null||o!==o?c:o}var AO=u1(),kO=u1(!0);function In(o){return o}function d0(o){return Fv(typeof o=="function"?o:Zn(o,f))}function IO(o){return Gv(Zn(o,f))}function RO(o,c){return Vv(o,Zn(c,f))}var NO=_t(function(o,c){return function(p){return nu(p,o,c)}}),BO=_t(function(o,c){return function(p){return nu(o,p,c)}});function h0(o,c,p){var v=Ur(c),C=tf(c,v);p==null&&!(mr(c)&&(C.length||!v.length))&&(p=c,c=o,o=this,C=tf(c,Ur(c)));var N=!(mr(p)&&"chain"in p)||!!p.chain,P=va(o);return Qn(C,function(q){var z=c[q];o[q]=z,P&&(o.prototype[q]=function(){var he=this.__chain__;if(N||he){var pe=o(this.__wrapped__),ye=pe.__actions__=Tn(this.__actions__);return ye.push({func:z,args:arguments,thisArg:o}),pe.__chain__=he,pe}return z.apply(o,Va([this.value()],arguments))})}),o}function DO(){return Mr._===this&&(Mr._=aR),this}function p0(){}function OO(o){return o=ft(o),_t(function(c){return Kv(c,o)})}var LO=Hp(fr),PO=Hp(cv),MO=Hp(mp);function o_(o){return Zp(o)?yp(Vi(o)):hN(o)}function UO(o){return function(c){return o==null?t:Bs(o,c)}}var FO=f1(),qO=f1(!0);function g0(){return[]}function m0(){return!1}function GO(){return{}}function VO(){return""}function KO(){return!0}function jO(o,c){if(o=ft(o),o<1||o>Ee)return[];var p=Ke,v=on(o,Ke);c=He(c),o-=Ke;for(var C=wp(v,c);++p<o;)c(p);return C}function HO(o){return st(o)?fr(o,Vi):Fn(o)?[o]:Tn(A1(Kt(o)))}function YO(o){var c=++nR;return Kt(o)+c}var WO=lf(function(o,c){return o+c},0),zO=Yp("ceil"),QO=lf(function(o,c){return o/c},1),XO=Yp("floor");function JO(o){return o&&o.length?ef(o,In,Np):t}function ZO(o,c){return o&&o.length?ef(o,He(c,2),Np):t}function $O(o){return hv(o,In)}function eL(o,c){return hv(o,He(c,2))}function tL(o){return o&&o.length?ef(o,In,Lp):t}function rL(o,c){return o&&o.length?ef(o,He(c,2),Lp):t}var nL=lf(function(o,c){return o*c},1),iL=Yp("round"),aL=lf(function(o,c){return o-c},0);function sL(o){return o&&o.length?_p(o,In):0}function oL(o,c){return o&&o.length?_p(o,He(c,2)):0}return k.after=ID,k.ary=U1,k.assign=m3,k.assignIn=Z1,k.assignInWith=Ef,k.assignWith=y3,k.at=v3,k.before=F1,k.bind=i0,k.bindAll=bO,k.bindKey=q1,k.castArray=GD,k.chain=L1,k.chunk=XN,k.compact=JN,k.concat=ZN,k.cond=xO,k.conforms=SO,k.constant=f0,k.countBy=sD,k.create=_3,k.curry=G1,k.curryRight=V1,k.debounce=K1,k.defaults=w3,k.defaultsDeep=E3,k.defer=RD,k.delay=ND,k.difference=$N,k.differenceBy=eB,k.differenceWith=tB,k.drop=rB,k.dropRight=nB,k.dropRightWhile=iB,k.dropWhile=aB,k.fill=sB,k.filter=lD,k.flatMap=fD,k.flatMapDeep=dD,k.flatMapDepth=hD,k.flatten=N1,k.flattenDeep=oB,k.flattenDepth=lB,k.flip=BD,k.flow=AO,k.flowRight=kO,k.fromPairs=uB,k.functions=k3,k.functionsIn=I3,k.groupBy=pD,k.initial=fB,k.intersection=dB,k.intersectionBy=hB,k.intersectionWith=pB,k.invert=N3,k.invertBy=B3,k.invokeMap=mD,k.iteratee=d0,k.keyBy=yD,k.keys=Ur,k.keysIn=kn,k.map=gf,k.mapKeys=O3,k.mapValues=L3,k.matches=IO,k.matchesProperty=RO,k.memoize=yf,k.merge=P3,k.mergeWith=$1,k.method=NO,k.methodOf=BO,k.mixin=h0,k.negate=vf,k.nthArg=OO,k.omit=M3,k.omitBy=U3,k.once=DD,k.orderBy=vD,k.over=LO,k.overArgs=OD,k.overEvery=PO,k.overSome=MO,k.partial=a0,k.partialRight=j1,k.partition=_D,k.pick=F3,k.pickBy=e_,k.property=o_,k.propertyOf=UO,k.pull=vB,k.pullAll=D1,k.pullAllBy=_B,k.pullAllWith=wB,k.pullAt=EB,k.range=FO,k.rangeRight=qO,k.rearg=LD,k.reject=CD,k.remove=CB,k.rest=PD,k.reverse=r0,k.sampleSize=xD,k.set=G3,k.setWith=V3,k.shuffle=SD,k.slice=bB,k.sortBy=kD,k.sortedUniq=RB,k.sortedUniqBy=NB,k.split=fO,k.spread=MD,k.tail=BB,k.take=DB,k.takeRight=OB,k.takeRightWhile=LB,k.takeWhile=PB,k.tap=JB,k.throttle=UD,k.thru=pf,k.toArray=Q1,k.toPairs=t_,k.toPairsIn=r_,k.toPath=HO,k.toPlainObject=J1,k.transform=K3,k.unary=FD,k.union=MB,k.unionBy=UB,k.unionWith=FB,k.uniq=qB,k.uniqBy=GB,k.uniqWith=VB,k.unset=j3,k.unzip=n0,k.unzipWith=O1,k.update=H3,k.updateWith=Y3,k.values=qo,k.valuesIn=W3,k.without=KB,k.words=a_,k.wrap=qD,k.xor=jB,k.xorBy=HB,k.xorWith=YB,k.zip=WB,k.zipObject=zB,k.zipObjectDeep=QB,k.zipWith=XB,k.entries=t_,k.entriesIn=r_,k.extend=Z1,k.extendWith=Ef,h0(k,k),k.add=WO,k.attempt=s_,k.camelCase=J3,k.capitalize=n_,k.ceil=zO,k.clamp=z3,k.clone=VD,k.cloneDeep=jD,k.cloneDeepWith=HD,k.cloneWith=KD,k.conformsTo=YD,k.deburr=i_,k.defaultTo=TO,k.divide=QO,k.endsWith=Z3,k.eq=Ei,k.escape=$3,k.escapeRegExp=eO,k.every=oD,k.find=uD,k.findIndex=I1,k.findKey=C3,k.findLast=cD,k.findLastIndex=R1,k.findLastKey=b3,k.floor=XO,k.forEach=P1,k.forEachRight=M1,k.forIn=x3,k.forInRight=S3,k.forOwn=T3,k.forOwnRight=A3,k.get=l0,k.gt=WD,k.gte=zD,k.has=R3,k.hasIn=u0,k.head=B1,k.identity=In,k.includes=gD,k.indexOf=cB,k.inRange=Q3,k.invoke=D3,k.isArguments=Ls,k.isArray=st,k.isArrayBuffer=QD,k.isArrayLike=An,k.isArrayLikeObject=Cr,k.isBoolean=XD,k.isBuffer=Xa,k.isDate=JD,k.isElement=ZD,k.isEmpty=$D,k.isEqual=e3,k.isEqualWith=t3,k.isError=s0,k.isFinite=r3,k.isFunction=va,k.isInteger=H1,k.isLength=_f,k.isMap=Y1,k.isMatch=n3,k.isMatchWith=i3,k.isNaN=a3,k.isNative=s3,k.isNil=l3,k.isNull=o3,k.isNumber=W1,k.isObject=mr,k.isObjectLike=_r,k.isPlainObject=uu,k.isRegExp=o0,k.isSafeInteger=u3,k.isSet=z1,k.isString=wf,k.isSymbol=Fn,k.isTypedArray=Fo,k.isUndefined=c3,k.isWeakMap=f3,k.isWeakSet=d3,k.join=gB,k.kebabCase=tO,k.last=ei,k.lastIndexOf=mB,k.lowerCase=rO,k.lowerFirst=nO,k.lt=h3,k.lte=p3,k.max=JO,k.maxBy=ZO,k.mean=$O,k.meanBy=eL,k.min=tL,k.minBy=rL,k.stubArray=g0,k.stubFalse=m0,k.stubObject=GO,k.stubString=VO,k.stubTrue=KO,k.multiply=nL,k.nth=yB,k.noConflict=DO,k.noop=p0,k.now=mf,k.pad=iO,k.padEnd=aO,k.padStart=sO,k.parseInt=oO,k.random=X3,k.reduce=wD,k.reduceRight=ED,k.repeat=lO,k.replace=uO,k.result=q3,k.round=iL,k.runInContext=W,k.sample=bD,k.size=TD,k.snakeCase=cO,k.some=AD,k.sortedIndex=xB,k.sortedIndexBy=SB,k.sortedIndexOf=TB,k.sortedLastIndex=AB,k.sortedLastIndexBy=kB,k.sortedLastIndexOf=IB,k.startCase=dO,k.startsWith=hO,k.subtract=aL,k.sum=sL,k.sumBy=oL,k.template=pO,k.times=jO,k.toFinite=_a,k.toInteger=ft,k.toLength=X1,k.toLower=gO,k.toNumber=ti,k.toSafeInteger=g3,k.toString=Kt,k.toUpper=mO,k.trim=yO,k.trimEnd=vO,k.trimStart=_O,k.truncate=wO,k.unescape=EO,k.uniqueId=YO,k.upperCase=CO,k.upperFirst=c0,k.each=P1,k.eachRight=M1,k.first=B1,h0(k,function(){var o={};return qi(k,function(c,p){Wt.call(k.prototype,p)||(o[p]=c)}),o}(),{chain:!1}),k.VERSION=e,Qn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),Qn(["drop","take"],function(o,c){It.prototype[o]=function(p){p=p===t?1:Dr(ft(p),0);var v=this.__filtered__&&!c?new It(this):this.clone();return v.__filtered__?v.__takeCount__=on(p,v.__takeCount__):v.__views__.push({size:on(p,Ke),type:o+(v.__dir__<0?"Right":"")}),v},It.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),Qn(["filter","map","takeWhile"],function(o,c){var p=c+1,v=p==_e||p==Re;It.prototype[o]=function(C){var N=this.clone();return N.__iteratees__.push({iteratee:He(C,3),type:p}),N.__filtered__=N.__filtered__||v,N}}),Qn(["head","last"],function(o,c){var p="take"+(c?"Right":"");It.prototype[o]=function(){return this[p](1).value()[0]}}),Qn(["initial","tail"],function(o,c){var p="drop"+(c?"":"Right");It.prototype[o]=function(){return this.__filtered__?new It(this):this[p](1)}}),It.prototype.compact=function(){return this.filter(In)},It.prototype.find=function(o){return this.filter(o).head()},It.prototype.findLast=function(o){return this.reverse().find(o)},It.prototype.invokeMap=_t(function(o,c){return typeof o=="function"?new It(this):this.map(function(p){return nu(p,o,c)})}),It.prototype.reject=function(o){return this.filter(vf(He(o)))},It.prototype.slice=function(o,c){o=ft(o);var p=this;return p.__filtered__&&(o>0||c<0)?new It(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),c!==t&&(c=ft(c),p=c<0?p.dropRight(-c):p.take(c-o)),p)},It.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},It.prototype.toArray=function(){return this.take(Ke)},qi(It.prototype,function(o,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),C=k[v?"take"+(c=="last"?"Right":""):c],N=v||/^find/.test(c);!C||(k.prototype[c]=function(){var P=this.__wrapped__,q=v?[1]:arguments,z=P instanceof It,he=q[0],pe=z||st(P),ye=function(bt){var Dt=C.apply(k,Va([bt],q));return v&&ke?Dt[0]:Dt};pe&&p&&typeof he=="function"&&he.length!=1&&(z=pe=!1);var ke=this.__chain__,Fe=!!this.__actions__.length,We=N&&!ke,ht=z&&!Fe;if(!N&&pe){P=ht?P:new It(this);var ze=o.apply(P,q);return ze.__actions__.push({func:pf,args:[ye],thisArg:t}),new Jn(ze,ke)}return We&&ht?o.apply(this,q):(ze=this.thru(ye),We?v?ze.value()[0]:ze.value():ze)})}),Qn(["pop","push","shift","sort","splice","unshift"],function(o){var c=Fc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var N=this.value();return c.apply(st(N)?N:[],C)}return this[p](function(P){return c.apply(st(P)?P:[],C)})}}),qi(It.prototype,function(o,c){var p=k[c];if(p){var v=p.name+"";Wt.call(Oo,v)||(Oo[v]=[]),Oo[v].push({name:c,func:p})}}),Oo[of(t,_).name]=[{name:"wrapper",func:t}],It.prototype.clone=ER,It.prototype.reverse=CR,It.prototype.value=bR,k.prototype.at=ZB,k.prototype.chain=$B,k.prototype.commit=eD,k.prototype.next=tD,k.prototype.plant=nD,k.prototype.reverse=iD,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=aD,k.prototype.first=k.prototype.head,Xl&&(k.prototype[Xl]=rD),k},ja=eR();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Mr._=ja,define(function(){return ja})):As?((As.exports=ja)._=ja,dp._=ja):Mr._=ja}).call(Rl)});var ey=ce((yz,wh)=>{var LS,PS,MS,US,FS,qS,GS,VS,KS,vh,$m,jS,HS,YS,Ol,WS,zS,QS,XS,JS,ZS,$S,eT,_h;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof wh=="object"&&typeof wh.exports=="object"?t(r(e,r(wh.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};LS=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},PS=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},MS=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},US=function(n,i,a,s){var l=arguments.length,u=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(u=(l<3?f(u):l>3?f(i,a,u):f(i,a))||u);return l>3&&u&&Object.defineProperty(i,a,u),u},FS=function(n,i){return function(a,s){i(a,s,n)}},qS=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},GS=function(n,i,a,s){function l(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function d(m){try{g(s.next(m))}catch(y){f(y)}}function h(m){try{g(s.throw(m))}catch(y){f(y)}}function g(m){m.done?u(m.value):l(m.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},VS=function(n,i){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(m){return h([g,m])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(u=g[0]&2?l.return:g[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,g[1])).done)return u;switch(l=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){a.label=g[1];break}if(g[0]===6&&a.label<u[1]){a.label=u[1],u=g;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(g);break}u[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(m){g=[6,m],l=0}finally{s=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},KS=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&_h(i,n,a)},_h=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},vh=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},$m=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,u=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return u},jS=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat($m(arguments[i]));return n},HS=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var u=arguments[i],f=0,d=u.length;f<d;f++,l++)s[l]=u[f];return s},YS=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},Ol=function(n){return this instanceof Ol?(this.v=n,this):new Ol(n)},WS=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,u=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){s[_]&&(l[_]=function(E){return new Promise(function(w,b){u.push([_,E,w,b])>1||d(_,E)})})}function d(_,E){try{h(s[_](E))}catch(w){y(u[0][3],w)}}function h(_){_.value instanceof Ol?Promise.resolve(_.value.v).then(g,m):y(u[0][2],_)}function g(_){d("next",_)}function m(_){d("throw",_)}function y(_,E){_(E),u.shift(),u.length&&d(u[0][0],u[0][1])}},zS=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,u){i[l]=n[l]?function(f){return(a=!a)?{value:Ol(n[l](f)),done:l==="return"}:u?u(f):f}:u}},QS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof vh=="function"?vh(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(u){a[u]=n[u]&&function(f){return new Promise(function(d,h){f=n[u](f),l(d,h,f.done,f.value)})}}function l(u,f,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},f)}},XS=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};JS=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&_h(i,n,a);return r(i,n),i},ZS=function(n){return n&&n.__esModule?n:{default:n}},$S=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},eT=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},t("__extends",LS),t("__assign",PS),t("__rest",MS),t("__decorate",US),t("__param",FS),t("__metadata",qS),t("__awaiter",GS),t("__generator",VS),t("__exportStar",KS),t("__createBinding",_h),t("__values",vh),t("__read",$m),t("__spread",jS),t("__spreadArrays",HS),t("__spreadArray",YS),t("__await",Ol),t("__asyncGenerator",WS),t("__asyncDelegator",zS),t("__asyncValues",QS),t("__makeTemplateObject",XS),t("__importStar",JS),t("__importDefault",ZS),t("__classPrivateFieldGet",$S),t("__classPrivateFieldSet",eT)})});var xT=ce((yQ,Ah)=>{var iT,aT,sT,oT,lT,uT,cT,fT,dT,Th,ry,hT,pT,Ll,gT,mT,yT,vT,_T,wT,ET,CT,bT;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Ah=="object"&&typeof Ah.exports=="object"?t(r(e,r(Ah.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};iT=function(r,n){e(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},aT=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},sT=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},oT=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(l=(s<3?u(l):s>3?u(n,i,l):u(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},lT=function(r,n){return function(i,a){n(i,a,r)}},uT=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},cT=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function f(g){try{h(a.next(g))}catch(m){u(m)}}function d(g){try{h(a.throw(g))}catch(m){u(m)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},fT=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},bT=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},dT=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},Th=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ry=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],u;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return l},hT=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(ry(arguments[n]));return r},pT=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],u=0,f=l.length;u<f;u++,s++)a[s]=l[u];return a},Ll=function(r){return this instanceof Ll?(this.v=r,this):new Ll(r)},gT=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(y){a[y]&&(s[y]=function(_){return new Promise(function(E,w){l.push([y,_,E,w])>1||f(y,_)})})}function f(y,_){try{d(a[y](_))}catch(E){m(l[0][3],E)}}function d(y){y.value instanceof Ll?Promise.resolve(y.value.v).then(h,g):m(l[0][2],y)}function h(y){f("next",y)}function g(y){f("throw",y)}function m(y,_){y(_),l.shift(),l.length&&f(l[0][0],l[0][1])}},mT=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(u){return(i=!i)?{value:Ll(r[s](u)),done:s==="return"}:l?l(u):u}:l}},yT=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof Th=="function"?Th(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(u){return new Promise(function(f,d){u=r[l](u),s(f,d,u.done,u.value)})}}function s(l,u,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},u)}},vT=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},_T=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},wT=function(r){return r&&r.__esModule?r:{default:r}},ET=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},CT=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},t("__extends",iT),t("__assign",aT),t("__rest",sT),t("__decorate",oT),t("__param",lT),t("__metadata",uT),t("__awaiter",cT),t("__generator",fT),t("__exportStar",dT),t("__createBinding",bT),t("__values",Th),t("__read",ry),t("__spread",hT),t("__spreadArrays",pT),t("__await",Ll),t("__asyncGenerator",gT),t("__asyncDelegator",mT),t("__asyncValues",yT),t("__makeTemplateObject",vT),t("__importStar",_T),t("__importDefault",wT),t("__classPrivateFieldGet",ET),t("__classPrivateFieldSet",CT)})});var cy=ce(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});var vr=require("obsidian"),ly="YYYY-MM-DD",uy="gggg-[W]ww",yA="YYYY-MM",vA="YYYY-[Q]Q",_A="YYYY";function hc(t){var r,n;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r[t])==null?void 0:n.enabled)}function pc(){var t,e,r,n;try{let{internalPlugins:i,plugins:a}=window.app;if(hc("daily")){let{format:f,folder:d,template:h}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:f||ly,folder:(d==null?void 0:d.trim())||"",template:(h==null?void 0:h.trim())||""}}let{folder:s,format:l,template:u}=((n=(r=i.getPluginById("daily-notes"))==null?void 0:r.instance)==null?void 0:n.options)||{};return{format:l||ly,folder:(s==null?void 0:s.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(i){console.info("No custom daily note settings found!",i)}}function gc(){var t,e,r,n,i,a,s;try{let l=window.app.plugins,u=(t=l.getPlugin("calendar"))==null?void 0:t.options,f=(r=(e=l.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.weekly;if(hc("weekly"))return{format:f.format||uy,folder:((n=f.folder)==null?void 0:n.trim())||"",template:((i=f.template)==null?void 0:i.trim())||""};let d=u||{};return{format:d.weeklyNoteFormat||uy,folder:((a=d.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=d.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(l){console.info("No custom weekly note settings found!",l)}}function mc(){var e,r,n,i;let t=window.app.plugins;try{let a=hc("monthly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.monthly)||{};return{format:a.format||yA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function yc(){var e,r,n,i;let t=window.app.plugins;try{let a=hc("quarterly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.quarterly)||{};return{format:a.format||vA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function vc(){var e,r,n,i;let t=window.app.plugins;try{let a=hc("yearly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.yearly)||{};return{format:a.format||_A,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function wA(...t){let e=[];for(let n=0,i=t.length;n<i;n++)e=e.concat(t[n].split("/"));let r=[];for(let n=0,i=e.length;n<i;n++){let a=e[n];!a||a==="."||r.push(a)}return e[0]===""&&r.unshift(""),r.join("/")}function a9(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}function s9(t){return M(this,null,function*(){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let r=wA(...e);window.app.vault.getAbstractFileByPath(r)||(yield window.app.vault.createFolder(r))}})}function _c(t,e){return M(this,null,function*(){e.endsWith(".md")||(e+=".md");let r=vr.normalizePath(wA(t,e));return yield s9(r),r})}function ql(t){return M(this,null,function*(){let{metadataCache:e,vault:r}=window.app,n=vr.normalizePath(t);if(n==="/")return Promise.resolve(["",null]);try{let i=e.getFirstLinkpathDest(n,""),a=yield r.cachedRead(i),s=window.app.foldManager.load(i);return[a,s]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new vr.Notice("Failed to read the daily note template"),["",null]}})}function Pi(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}function EA(t){return t.replace(/\[[^\]]*\]/g,"")}function o9(t,e){if(e==="week"){let r=EA(t);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function Gl(t,e){return CA(t.basename,e)}function l9(t,e){return CA(a9(t),e)}function CA(t,e){let n={day:pc,week:gc,month:mc,quarter:yc,year:vc}[e]().format.split("/").pop(),i=window.moment(t,n,!0);if(!i.isValid())return null;if(o9(n,e)&&e==="week"){let a=EA(n);if(/w{1,2}/i.test(a))return window.moment(t,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var bA=class extends Error{};function xA(t){return M(this,null,function*(){let e=window.app,{vault:r}=e,n=window.moment,{template:i,format:a,folder:s}=pc(),[l,u]=yield ql(i),f=t.format(a),d=yield _c(s,f);try{let h=yield r.create(d,l.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,m,y,_,E,w)=>{let b=n(),I=t.clone().set({hour:b.get("hour"),minute:b.get("minute"),second:b.get("second")});return y&&I.add(parseInt(_,10),E),w?I.format(w.substring(1).trim()):I.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(h,u),h}catch(h){console.error(`Failed to create file: '${d}'`,h),new vr.Notice("Unable to create new file.")}})}function u9(t,e){var r;return(r=e[Pi(t,"day")])!=null?r:null}function c9(){let{vault:t}=window.app,{folder:e}=pc(),r=t.getAbstractFileByPath(vr.normalizePath(e));if(!r)throw new bA("Failed to find daily notes folder");let n={};return vr.Vault.recurseChildren(r,i=>{if(i instanceof vr.TFile){let a=Gl(i,"day");if(a){let s=Pi(a,"day");n[s]=i}}}),n}var SA=class extends Error{};function f9(){let{moment:t}=window,e=t.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)r.push(r.shift()),e--;return r}function d9(t){return f9().indexOf(t.toLowerCase())}function TA(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=gc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(m,10),y),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,h,g)=>{let m=d9(h);return t.weekday(m).format(g.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function h9(t,e){var r;return(r=e[Pi(t,"week")])!=null?r:null}function p9(){let t={};if(!NA())return t;let{vault:e}=window.app,{folder:r}=gc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new SA("Failed to find weekly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Gl(i,"week");if(a){let s=Pi(a,"week");t[s]=i}}}),t}var AA=class extends Error{};function kA(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=mc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(m,10),y),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function g9(t,e){var r;return(r=e[Pi(t,"month")])!=null?r:null}function m9(){let t={};if(!BA())return t;let{vault:e}=window.app,{folder:r}=mc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new AA("Failed to find monthly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Gl(i,"month");if(a){let s=Pi(a,"month");t[s]=i}}}),t}var IA=class extends Error{};function y9(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=yc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(m,10),y),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function v9(t,e){var r;return(r=e[Pi(t,"quarter")])!=null?r:null}function _9(){let t={};if(!DA())return t;let{vault:e}=window.app,{folder:r}=yc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new IA("Failed to find quarterly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Gl(i,"quarter");if(a){let s=Pi(a,"quarter");t[s]=i}}}),t}var RA=class extends Error{};function w9(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=vc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(m,10),y),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function E9(t,e){var r;return(r=e[Pi(t,"year")])!=null?r:null}function C9(){let t={};if(!OA())return t;let{vault:e}=window.app,{folder:r}=vc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new RA("Failed to find yearly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Gl(i,"year");if(a){let s=Pi(a,"year");t[s]=i}}}),t}function b9(){var n,i;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let r=t.plugins.getPlugin("periodic-notes");return r&&((i=(n=r.settings)==null?void 0:n.daily)==null?void 0:i.enabled)}function NA(){var r,n;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.weekly)==null?void 0:n.enabled)}function BA(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.monthly)==null?void 0:n.enabled)}function DA(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.quarterly)==null?void 0:n.enabled)}function OA(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.yearly)==null?void 0:n.enabled)}function x9(t){return{day:pc,week:gc,month:mc,quarter:yc,year:vc}[t]()}function S9(t,e){return{day:xA,month:kA,week:TA}[t](e)}wt.DEFAULT_DAILY_NOTE_FORMAT=ly;wt.DEFAULT_MONTHLY_NOTE_FORMAT=yA;wt.DEFAULT_QUARTERLY_NOTE_FORMAT=vA;wt.DEFAULT_WEEKLY_NOTE_FORMAT=uy;wt.DEFAULT_YEARLY_NOTE_FORMAT=_A;wt.appHasDailyNotesPluginLoaded=b9;wt.appHasMonthlyNotesPluginLoaded=BA;wt.appHasQuarterlyNotesPluginLoaded=DA;wt.appHasWeeklyNotesPluginLoaded=NA;wt.appHasYearlyNotesPluginLoaded=OA;wt.createDailyNote=xA;wt.createMonthlyNote=kA;wt.createPeriodicNote=S9;wt.createQuarterlyNote=y9;wt.createWeeklyNote=TA;wt.createYearlyNote=w9;wt.getAllDailyNotes=c9;wt.getAllMonthlyNotes=m9;wt.getAllQuarterlyNotes=_9;wt.getAllWeeklyNotes=p9;wt.getAllYearlyNotes=C9;wt.getDailyNote=u9;wt.getDailyNoteSettings=pc;wt.getDateFromFile=Gl;wt.getDateFromPath=l9;wt.getDateUID=Pi;wt.getMonthlyNote=g9;wt.getMonthlyNoteSettings=mc;wt.getPeriodicNoteSettings=x9;wt.getQuarterlyNote=v9;wt.getQuarterlyNoteSettings=yc;wt.getTemplateInfo=ql;wt.getWeeklyNote=h9;wt.getWeeklyNoteSettings=gc;wt.getYearlyNote=E9;wt.getYearlyNoteSettings=vc});var FA=ce(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.isDate=Es.isComparable=Es.isIterable=void 0;Es.isIterable=t=>!(t==null||t[Symbol.iterator]==null);Es.isComparable=t=>{let e=Object.prototype.toString,r=t;return r.compare!=null&&e.call(r.compare).endsWith("Function]")};Es.isDate=t=>Object.prototype.toString.call(t).endsWith("Date]")});var GA=ce(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0})});var VA=ce(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});var A9=ey(),fy=FA(),k9=(t,e)=>t-e,I9=(t,e)=>Number(t-e),R9=(t,e)=>t.localeCompare(e),N9=(t,e)=>t.getTime()-e.getTime(),Vl={number:k9,string:R9,Date:N9,bigInt:I9,none:()=>0},B9=t=>{if(typeof t=="number")return Vl.number;if(typeof t=="string")return Vl.string;if(typeof t=="bigint")return Vl.bigInt;if(fy.isDate(t))return Vl.Date;if(fy.isComparable(t))return(e,r)=>e.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},Co=class extends Map{constructor(e,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=Vl.none,this.sortedKeys=[],fy.isIterable(e)&&this._constructor(e,r),this.isCompareFn(e)&&this._constructor(null,e),e==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(e,r){return Math.sign(this.compareFn(e,r))}_constructor(e,r){if(this.compareFn=r==null?Vl.none:r,this.specifiedCompareFn=r!=null,e!=null)for(let n of e)this.set(...n)}static fromMap(e,r){let n=new Co(r);return n.setAll(e),n}duplicate(){return Co.fromMap(this,this.compareFn)}toMap(){let e=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{e.set(n,i)}),e}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(e){let r=this.sortedKeys.find(n=>this.comparator(n,e)===0);if(r!=null)return super.get(r)}set(e,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=B9(e),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,e)===0);return n==null?(this.sortedKeys.push(e),super.set(e,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(e){return e.forEach((r,n)=>{this.set(n,r)}),this}delete(e){return super.delete(e)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,e)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(e=>super.get(e)).values()}entries(){return this.toMap().entries()}firstEntry(){let e=this.firstKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let e=this.lastKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let e=this.firstEntry();if(e!=null)return this.delete(e[0]),e}popEntry(){let e=this.lastEntry();if(e!=null)return this.delete(e[0]),e}floorEntry(e){let r=this.floorKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<=0).reverse()[0]}ceilingEntry(e){let r=this.ceilingKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>=0)[0]}lowerEntry(e){let r=this.lowerKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<0).reverse()[0]}higherEntry(e){let r=this.higherKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>0)[0]}splitLower(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)<0;return r?a||this.compare(i[0],e)===0:a});return new Co(n,this.compareFn)}splitHigher(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)>0;return r?a||this.compare(i[0],e)===0:a});return new Co(n,this.compareFn)}forEach(e,r){Array.from(this.entries()).forEach(([n,i])=>{e(i,n,this)},r)}};Lh.default=Co;A9.__exportStar(GA(),Lh)});gL(exports,{default:()=>pt});var zl=xt(require("obsidian"));var y0=xt(require("obsidian")),Cf=new Map;function Ot(t,e=!1){let r=window.moment();Cf.has(t)?(Cf.get(t).isBefore(r)||e)&&(new y0.Notice(t),Cf.set(t,r.add(1,"minute"))):(console.log(`[Google Calendar] ${t}`),new y0.Notice(t),Cf.set(t,r.add(0,"minute")))}var Ht=xt(require("obsidian"));var bf=()=>{var t;return(t=window.localStorage.getItem("googleCalendarAccessToken"))!=null?t:""},Ea=()=>{var t;return(t=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?t:""},xf=()=>{var e;let t=(e=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?e:"0";return parseInt(t,10)},Ps=()=>{var t;return(t=window.localStorage.getItem("googleCalendarUserId"))!=null?t:""},Ja=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",t)},Sf=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarUserId",t)},fu=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",t)},Za=t=>{isNaN(t)||window.localStorage.setItem("googleCalendarExpirationTime",t+"")};var ih=xt(require("obsidian"));var h_=xt(require("obsidian")),Xr=(t,e,r,n=!1)=>M(void 0,null,function*(){let i=pt.getInstance(),a={"Content-Type":"application/json"};if(n==!1){let l=yield p_(i);if(!l)return;a.Authorization="Bearer "+l}if(i.settings.debugMode){console.log(`New Request ${e}:${t}`);let l=Fr({},a);l.Authorization&&(l.Authorization=l.Authorization.substring(0,15)+"..."),console.log({body:r,headers:l});let u=yield fetch(t,{method:e,body:r?JSON.stringify(r):null,headers:a});return u.status>=400?void 0:yield u.json()}let s=yield(0,h_.requestUrl)({method:e,url:t,body:r?JSON.stringify(r):null,headers:a});if(!(s.status>=400))return yield s.json});var Rm=42813;function _F(){return!(!bf()||bf()==""||!xf()||isNaN(xf())||xf()<+new Date)}var wF=t=>M(void 0,null,function*(){let e={client_id:t.settings.googleClientId,client_secret:t.settings.googleClientSecret.trim(),grant_type:"refresh_token",refresh_token:Ea()},r=yield Xr("https://oauth2.googleapis.com/token","POST",e,!0);return r?(Ja(r.access_token),Za(+new Date+r.expires_in*1e3),!0):(Ot("Error while refreshing authentication"),!1)}),Jx=t=>M(void 0,null,function*(){let e={uid:Ps()},r=yield Xr(`${t.settings.googleOAuthServer}/api/google/refresh`,"POST",e,!0);return r?(Ja(r.access_token),Za(+new Date+r.expires_in*1e3),!0):(Ot("Error while refreshing authentication"),!1)});function p_(t){return M(this,null,function*(){if(!zt())return"";let e=!1;return _F()==!1&&(Ea()!=""||Ps()!="")&&(t.settings.useCustomClient?(e=yield wF(t),e==!1&&(e=yield Jx(t))):e=yield Jx(t)),bf()})}function Zx(){return M(this,null,function*(){let t=pt.getInstance();if(ih.Platform.isDesktop){if(!$x())return;let{OAuth2Client:e}=Ox(),r=require("http"),n=zx(),i=require("url"),a=Xx(),s=new e(t.settings.googleClientId,t.settings.googleClientSecret.trim(),`http://127.0.0.1:${Rm}/callback`),l=s.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),u=r.createServer((f,d)=>M(this,null,function*(){try{if(f.url.indexOf("/callback")>-1){let g=new i.URL(f.url,`http://localhost:${Rm}`).searchParams.get("code");d.end("Authentication successful! Please return to obsidian."),u.destroy();let m=yield s.getToken(g);fu(m.tokens.refresh_token),Ja(m.tokens.access_token),Za(m.tokens.expiry_date),console.info("Tokens acquired."),t.settingsTab.display()}}catch(h){console.log("Auth failed")}})).listen(Rm,()=>M(this,null,function*(){(yield n(l,{wait:!1})).unref()}));a(u)}else new ih.Notice("Can't use OAuth on this device")})}var Nm=new Map,Bm=new Map;function eS(){return M(this,null,function*(){var e,r;if(!zt())return;let t=yield Xr("https://www.googleapis.com/calendar/v3/colors","GET",null);if(!t){Ot("Error fetching color data from google");return}for(let n=1;;n++){let i=(e=t.calendar[n+""])==null?void 0:e.background;if(!i)break;Nm.set(n+"",i)}for(let n=1;;n++){let i=(r=t.event[n+""])==null?void 0:r.background;if(!i)break;Bm.set(n+"",i)}})}function ju(t){return t.colorId&&Bm.has(t.colorId)?Bm.get(t.colorId):t.parent.colorId&&Nm.has(t.parent.colorId)?Nm.get(t.parent.colorId):"#a4bdfc"}var Dm=[];function tS(t,e){return e.filter(n=>t.settings.calendarBlackList.findIndex(a=>a[0]==n.id)==-1)}function en(){return M(this,null,function*(){if(!zt())return[];let t=pt.getInstance();if(Dm.length)return tS(t,Dm);yield eS();let e=yield Xr("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",null);return e?(Dm=e.items,tS(t,e.items)):(Ot("Could not list Google Calendars"),[])})}var Di=xt(require("obsidian"));var bS=xt(require("obsidian"));var Er="top",Or="bottom",Ir="right",xr="left",ah="auto",ps=[Er,Or,Ir,xr],Ra="start",to="end",rS="clippingParents",sh="viewport",Sl="popper",nS="reference",Om=ps.reduce(function(t,e){return t.concat([e+"-"+Ra,e+"-"+to])},[]),oh=[].concat(ps,[ah]).reduce(function(t,e){return t.concat([e,e+"-"+Ra,e+"-"+to])},[]),EF="beforeRead",CF="read",bF="afterRead",xF="beforeMain",SF="main",TF="afterMain",AF="beforeWrite",kF="write",IF="afterWrite",iS=[EF,CF,bF,xF,SF,TF,AF,kF,IF];function Hr(t){return t?(t.nodeName||"").toLowerCase():null}function yr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ui(t){var e=yr(t).Element;return t instanceof e||t instanceof Element}function Lr(t){var e=yr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Tl(t){if(typeof ShadowRoot=="undefined")return!1;var e=yr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function RF(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!Lr(a)||!Hr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function NF(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=s.reduce(function(u,f){return u[f]="",u},{});!Lr(i)||!Hr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}var aS={name:"applyStyles",enabled:!0,phase:"write",fn:RF,effect:NF,requires:["computeStyles"]};function Yr(t){return t.split("-")[0]}var Ri=Math.max,ro=Math.min,Na=Math.round;function Al(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Hu(){return!/^((?!chrome|android).)*safari/i.test(Al())}function ci(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&Lr(t)&&(i=t.offsetWidth>0&&Na(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Na(n.height)/t.offsetHeight||1);var s=ui(t)?yr(t):window,l=s.visualViewport,u=!Hu()&&r,f=(n.left+(u&&l?l.offsetLeft:0))/i,d=(n.top+(u&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function no(t){var e=ci(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function Yu(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Tl(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function En(t){return yr(t).getComputedStyle(t)}function Lm(t){return["table","td","th"].indexOf(Hr(t))>=0}function tn(t){return((ui(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ba(t){return Hr(t)==="html"?t:t.assignedSlot||t.parentNode||(Tl(t)?t.host:null)||tn(t)}function sS(t){return!Lr(t)||En(t).position==="fixed"?null:t.offsetParent}function BF(t){var e=/firefox/i.test(Al()),r=/Trident/i.test(Al());if(r&&Lr(t)){var n=En(t);if(n.position==="fixed")return null}var i=Ba(t);for(Tl(i)&&(i=i.host);Lr(i)&&["html","body"].indexOf(Hr(i))<0;){var a=En(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Ni(t){for(var e=yr(t),r=sS(t);r&&Lm(r)&&En(r).position==="static";)r=sS(r);return r&&(Hr(r)==="html"||Hr(r)==="body"&&En(r).position==="static")?e:r||BF(t)||e}function io(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ao(t,e,r){return Ri(t,ro(e,r))}function oS(t,e,r){var n=ao(t,e,r);return n>r?r:n}function Wu(){return{top:0,right:0,bottom:0,left:0}}function zu(t){return Object.assign({},Wu(),t)}function Qu(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var DF=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,zu(typeof e!="number"?e:Qu(e,ps))};function OF(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Yr(r.placement),u=io(l),f=[xr,Ir].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=DF(i.padding,r),g=no(a),m=u==="y"?Er:xr,y=u==="y"?Or:Ir,_=r.rects.reference[d]+r.rects.reference[u]-s[u]-r.rects.popper[d],E=s[u]-r.rects.reference[u],w=Ni(a),b=w?u==="y"?w.clientHeight||0:w.clientWidth||0:0,I=_/2-E/2,R=h[m],D=b-g[d]-h[y],O=b/2-g[d]/2+I,ee=ao(R,O,D),G=u;r.modifiersData[n]=(e={},e[G]=ee,e.centerOffset=ee-O,e)}}function LF(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Yu(e.elements.popper,i)||(e.elements.arrow=i))}var lS={name:"arrow",enabled:!0,phase:"main",fn:OF,effect:LF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fi(t){return t.split("-")[1]}var PF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MF(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Na(e*i)/i||0,y:Na(r*i)/i||0}}function uS(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,l=t.position,u=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,g=s.x,m=g===void 0?0:g,y=s.y,_=y===void 0?0:y,E=typeof d=="function"?d({x:m,y:_}):{x:m,y:_};m=E.x,_=E.y;var w=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),I=xr,R=Er,D=window;if(f){var O=Ni(r),ee="clientHeight",G="clientWidth";if(O===yr(r)&&(O=tn(r),En(O).position!=="static"&&l==="absolute"&&(ee="scrollHeight",G="scrollWidth")),O=O,i===Er||(i===xr||i===Ir)&&a===to){R=Or;var U=h&&O===D&&D.visualViewport?D.visualViewport.height:O[ee];_-=U-n.height,_*=u?1:-1}if(i===xr||(i===Er||i===Or)&&a===to){I=Ir;var le=h&&O===D&&D.visualViewport?D.visualViewport.width:O[G];m-=le-n.width,m*=u?1:-1}}var se=Object.assign({position:l},f&&PF),_e=d===!0?MF({x:m,y:_}):{x:m,y:_};if(m=_e.x,_=_e.y,u){var Oe;return Object.assign({},se,(Oe={},Oe[R]=b?"0":"",Oe[I]=w?"0":"",Oe.transform=(D.devicePixelRatio||1)<=1?"translate("+m+"px, "+_+"px)":"translate3d("+m+"px, "+_+"px, 0)",Oe))}return Object.assign({},se,(e={},e[R]=b?_+"px":"",e[I]=w?m+"px":"",e.transform="",e))}function UF(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,u=l===void 0?!0:l;if(!1)var f;var d={placement:Yr(e.placement),variation:fi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,uS(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,uS(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var cS={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:UF,data:{}};var lh={passive:!0};function FF(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,u=yr(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,lh)}),l&&u.addEventListener("resize",r.update,lh),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,lh)}),l&&u.removeEventListener("resize",r.update,lh)}}var fS={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FF,data:{}};var qF={left:"right",right:"left",bottom:"top",top:"bottom"};function kl(t){return t.replace(/left|right|bottom|top/g,function(e){return qF[e]})}var GF={start:"end",end:"start"};function uh(t){return t.replace(/start|end/g,function(e){return GF[e]})}function so(t){var e=yr(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function oo(t){return ci(tn(t)).left+so(t).scrollLeft}function Pm(t,e){var r=yr(t),n=tn(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,u=0;if(i){a=i.width,s=i.height;var f=Hu();(f||!f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:l+oo(t),y:u}}function Mm(t){var e,r=tn(t),n=so(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=Ri(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Ri(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+oo(t),u=-n.scrollTop;return En(i||r).direction==="rtl"&&(l+=Ri(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:u}}function lo(t){var e=En(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function ch(t){return["html","body","#document"].indexOf(Hr(t))>=0?t.ownerDocument.body:Lr(t)&&lo(t)?t:ch(Ba(t))}function gs(t,e){var r;e===void 0&&(e=[]);var n=ch(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=yr(n),s=i?[a].concat(a.visualViewport||[],lo(n)?n:[]):n,l=e.concat(s);return i?l:l.concat(gs(Ba(s)))}function Il(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function VF(t,e){var r=ci(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function dS(t,e,r){return e===sh?Il(Pm(t,r)):ui(e)?VF(e,r):Il(Mm(tn(t)))}function KF(t){var e=gs(Ba(t)),r=["absolute","fixed"].indexOf(En(t).position)>=0,n=r&&Lr(t)?Ni(t):t;return ui(n)?e.filter(function(i){return ui(i)&&Yu(i,n)&&Hr(i)!=="body"}):[]}function Um(t,e,r,n){var i=e==="clippingParents"?KF(t):[].concat(e),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(u,f){var d=dS(t,f,n);return u.top=Ri(d.top,u.top),u.right=ro(d.right,u.right),u.bottom=ro(d.bottom,u.bottom),u.left=Ri(d.left,u.left),u},dS(t,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Xu(t){var e=t.reference,r=t.element,n=t.placement,i=n?Yr(n):null,a=n?fi(n):null,s=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,u;switch(i){case Er:u={x:s,y:e.y-r.height};break;case Or:u={x:s,y:e.y+e.height};break;case Ir:u={x:e.x+e.width,y:l};break;case xr:u={x:e.x-r.width,y:l};break;default:u={x:e.x,y:e.y}}var f=i?io(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case Ra:u[f]=u[f]-(e[d]/2-r[d]/2);break;case to:u[f]=u[f]+(e[d]/2-r[d]/2);break;default:}}return u}function Bi(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,l=r.boundary,u=l===void 0?rS:l,f=r.rootBoundary,d=f===void 0?sh:f,h=r.elementContext,g=h===void 0?Sl:h,m=r.altBoundary,y=m===void 0?!1:m,_=r.padding,E=_===void 0?0:_,w=zu(typeof E!="number"?E:Qu(E,ps)),b=g===Sl?nS:Sl,I=t.rects.popper,R=t.elements[y?b:g],D=Um(ui(R)?R:R.contextElement||tn(t.elements.popper),u,d,s),O=ci(t.elements.reference),ee=Xu({reference:O,element:I,strategy:"absolute",placement:i}),G=Il(Object.assign({},I,ee)),U=g===Sl?G:O,le={top:D.top-U.top+w.top,bottom:U.bottom-D.bottom+w.bottom,left:D.left-U.left+w.left,right:U.right-D.right+w.right},se=t.modifiersData.offset;if(g===Sl&&se){var _e=se[i];Object.keys(le).forEach(function(Oe){var Re=[Ir,Or].indexOf(Oe)>=0?1:-1,Se=[Er,Or].indexOf(Oe)>=0?"y":"x";le[Oe]+=_e[Se]*Re})}return le}function Fm(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,u=r.allowedAutoPlacements,f=u===void 0?oh:u,d=fi(n),h=d?l?Om:Om.filter(function(y){return fi(y)===d}):ps,g=h.filter(function(y){return f.indexOf(y)>=0});g.length===0&&(g=h);var m=g.reduce(function(y,_){return y[_]=Bi(t,{placement:_,boundary:i,rootBoundary:a,padding:s})[Yr(_)],y},{});return Object.keys(m).sort(function(y,_){return m[y]-m[_]})}function jF(t){if(Yr(t)===ah)return[];var e=kl(t);return[uh(t),e,uh(e)]}function HF(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,u=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,m=r.flipVariations,y=m===void 0?!0:m,_=r.allowedAutoPlacements,E=e.options.placement,w=Yr(E),b=w===E,I=u||(b||!y?[kl(E)]:jF(E)),R=[E].concat(I).reduce(function(vt,it){return vt.concat(Yr(it)===ah?Fm(e,{placement:it,boundary:d,rootBoundary:h,padding:f,flipVariations:y,allowedAutoPlacements:_}):it)},[]),D=e.rects.reference,O=e.rects.popper,ee=new Map,G=!0,U=R[0],le=0;le<R.length;le++){var se=R[le],_e=Yr(se),Oe=fi(se)===Ra,Re=[Er,Or].indexOf(_e)>=0,Se=Re?"width":"height",Ee=Bi(e,{placement:se,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),ve=Re?Oe?Ir:xr:Oe?Or:Er;D[Se]>O[Se]&&(ve=kl(ve));var Je=kl(ve),Ke=[];if(a&&Ke.push(Ee[_e]<=0),l&&Ke.push(Ee[ve]<=0,Ee[Je]<=0),Ke.every(function(vt){return vt})){U=se,G=!1;break}ee.set(se,Ke)}if(G)for(var Et=y?3:1,yt=function(it){var Ct=R.find(function(tt){var Ce=ee.get(tt);if(Ce)return Ce.slice(0,it).every(function(A){return A})});if(Ct)return U=Ct,"break"},Ze=Et;Ze>0;Ze--){var fe=yt(Ze);if(fe==="break")break}e.placement!==U&&(e.modifiersData[n]._skip=!0,e.placement=U,e.reset=!0)}}var hS={name:"flip",enabled:!0,phase:"main",fn:HF,requiresIfExists:["offset"],data:{_skip:!1}};function pS(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function gS(t){return[Er,Ir,Or,xr].some(function(e){return t[e]>=0})}function YF(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=Bi(e,{elementContext:"reference"}),l=Bi(e,{altBoundary:!0}),u=pS(s,n),f=pS(l,i,a),d=gS(u),h=gS(f);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var mS={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:YF};function WF(t,e,r){var n=Yr(t),i=[xr,Er].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[xr,Ir].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function zF(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=oh.reduce(function(d,h){return d[h]=WF(h,e.rects,a),d},{}),l=s[e.placement],u=l.x,f=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[n]=s}var yS={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:zF};function QF(t){var e=t.state,r=t.name;e.modifiersData[r]=Xu({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var vS={name:"popperOffsets",enabled:!0,phase:"read",fn:QF,data:{}};function qm(t){return t==="x"?"y":"x"}function XF(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,u=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,m=g===void 0?!0:g,y=r.tetherOffset,_=y===void 0?0:y,E=Bi(e,{boundary:u,rootBoundary:f,padding:h,altBoundary:d}),w=Yr(e.placement),b=fi(e.placement),I=!b,R=io(w),D=qm(R),O=e.modifiersData.popperOffsets,ee=e.rects.reference,G=e.rects.popper,U=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,le=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),se=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,_e={x:0,y:0};if(!!O){if(a){var Oe,Re=R==="y"?Er:xr,Se=R==="y"?Or:Ir,Ee=R==="y"?"height":"width",ve=O[R],Je=ve+E[Re],Ke=ve-E[Se],Et=m?-G[Ee]/2:0,yt=b===Ra?ee[Ee]:G[Ee],Ze=b===Ra?-G[Ee]:-ee[Ee],fe=e.elements.arrow,vt=m&&fe?no(fe):{width:0,height:0},it=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Wu(),Ct=it[Re],tt=it[Se],Ce=ao(0,ee[Ee],vt[Ee]),A=I?ee[Ee]/2-Et-Ce-Ct-le.mainAxis:yt-Ce-Ct-le.mainAxis,B=I?-ee[Ee]/2+Et+Ce+tt+le.mainAxis:Ze+Ce+tt+le.mainAxis,L=e.elements.arrow&&Ni(e.elements.arrow),Y=L?R==="y"?L.clientTop||0:L.clientLeft||0:0,V=(Oe=se==null?void 0:se[R])!=null?Oe:0,Q=ve+A-V-Y,J=ve+B-V,H=ao(m?ro(Je,Q):Je,ve,m?Ri(Ke,J):Ke);O[R]=H,_e[R]=H-ve}if(l){var X,ne=R==="x"?Er:xr,Z=R==="x"?Or:Ir,de=O[D],Ue=D==="y"?"height":"width",qe=de+E[ne],ct=de-E[Z],Qt=[Er,xr].indexOf(w)!==-1,Xt=(X=se==null?void 0:se[D])!=null?X:0,at=Qt?qe:de-ee[Ue]-G[Ue]-Xt+le.altAxis,Bt=Qt?de+ee[Ue]+G[Ue]-Xt-le.altAxis:ct,gr=m&&Qt?oS(at,de,Bt):ao(m?at:qe,de,m?Bt:ct);O[D]=gr,_e[D]=gr-de}e.modifiersData[n]=_e}}var _S={name:"preventOverflow",enabled:!0,phase:"main",fn:XF,requiresIfExists:["offset"]};function Gm(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Vm(t){return t===yr(t)||!Lr(t)?so(t):Gm(t)}function JF(t){var e=t.getBoundingClientRect(),r=Na(e.width)/t.offsetWidth||1,n=Na(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Km(t,e,r){r===void 0&&(r=!1);var n=Lr(e),i=Lr(e)&&JF(e),a=tn(e),s=ci(t,i,r),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((Hr(e)!=="body"||lo(a))&&(l=Vm(e)),Lr(e)?(u=ci(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=oo(a))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function ZF(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var u=e.get(l);u&&i(u)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function jm(t){var e=ZF(t);return iS.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function Hm(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Ym(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var wS={placement:"bottom",modifiers:[],strategy:"absolute"};function ES(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function CS(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?wS:i;return function(l,u,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},wS,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},h=[],g=!1,m={state:d,setOptions:function(w){var b=typeof w=="function"?w(d.options):w;_(),d.options=Object.assign({},a,d.options,b),d.scrollParents={reference:ui(l)?gs(l):l.contextElement?gs(l.contextElement):[],popper:gs(u)};var I=jm(Ym([].concat(n,d.options.modifiers)));if(d.orderedModifiers=I.filter(function(se){return se.enabled}),!1){var R;if(getBasePlacement(d.options.placement)===auto)var D;var O,ee,G,U,le}return y(),m.update()},forceUpdate:function(){if(!g){var w=d.elements,b=w.reference,I=w.popper;if(!!ES(b,I)){d.rects={reference:Km(b,Ni(I),d.options.strategy==="fixed"),popper:no(I)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(se){return d.modifiersData[se.name]=Object.assign({},se.data)});for(var R=0,D=0;D<d.orderedModifiers.length;D++){if(d.reset===!0){d.reset=!1,D=-1;continue}var O=d.orderedModifiers[D],ee=O.fn,G=O.options,U=G===void 0?{}:G,le=O.name;typeof ee=="function"&&(d=ee({state:d,options:U,name:le,instance:m})||d)}}}},update:Hm(function(){return new Promise(function(E){m.forceUpdate(),E(d)})}),destroy:function(){_(),g=!0}};if(!ES(l,u))return m;m.setOptions(f).then(function(E){!g&&f.onFirstUpdate&&f.onFirstUpdate(E)});function y(){d.orderedModifiers.forEach(function(E){var w=E.name,b=E.options,I=b===void 0?{}:b,R=E.effect;if(typeof R=="function"){var D=R({state:d,name:w,instance:m,options:I}),O=function(){};h.push(D||O)}})}function _(){h.forEach(function(E){return E()}),h=[]}return m}}var $F=[fS,vS,cS,aS,yS,hS,_S,lS,mS],Wm=CS({defaultModifiers:$F});var eq=(t,e)=>(t%e+e)%e,xS=class{constructor(e,r,n){this.owner=e,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(e,r){e.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(e){this.containerEl.empty();let r=[];e.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=e,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(e){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,e)}setSelectedItem(e,r){let n=eq(e,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},Ju=class{constructor(e){this.inputEl=e,this.scope=new bS.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new xS(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,r=this.getSuggestions(e);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,r){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Wm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function tq(t){t=(0,Di.normalizePath)(t);let e=app.vault.getAbstractFileByPath(t);return!e||!(e instanceof Di.TFolder)?null:e}function SS(t){let e=tq(t),r=[];return Di.Vault.recurseChildren(e,n=>{n instanceof Di.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var TS;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(TS||(TS={}));var Zu=class extends Ju{constructor(e,r){super(e);this.inputEl=e;this.plugin=r}getSuggestions(e){var s,l,u,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let m=(0,Di.normalizePath)((u=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:u.templates_folder),y=SS(m);r=[...r,...y]}if(this.plugin.coreTemplatePlugin){let m=(0,Di.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),y=SS(m);r=[...r,...y]}if(!r)return[];let n=new Set(r),i=[],a=e.toLowerCase();return n.forEach(m=>{m instanceof Di.TFile&&m.extension==="md"&&m.path.toLowerCase().contains(a)&&i.push(m)}),i}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var AS=xt(require("obsidian"));var $u=class extends Ju{getSuggestions(e){let r=app.vault.getAllLoadedFiles(),n=[],i=e.toLowerCase();return r.forEach(a=>{a instanceof AS.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var zm=class extends Ht.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this,r=Ea()||Ps();e.empty(),e.createEl("h2",{text:"Settings for Google Calendar"}),e.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Ht.Setting(e).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(i=>i.setValue(this.plugin.settings.useCustomClient).onChange(a=>M(this,null,function*(){this.plugin.settings.useCustomClient=a,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Ht.Setting(e).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(a=>M(this,null,function*(){this.plugin.settings.googleClientId=a.trim(),yield this.plugin.saveSettings()}))),new Ht.Setting(e).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(a=>M(this,null,function*(){this.plugin.settings.googleClientSecret=a.trim(),yield this.plugin.saveSettings()}))),Ht.Platform.isMobileApp&&new Ht.Setting(e).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(a=>M(this,null,function*(){this.plugin.settings.googleRefreshToken=a.trim(),fu(a)})))):new Ht.Setting(e).setName("Server url").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.googleOAuthServer).onChange(a=>M(this,null,function*(){this.plugin.settings.googleOAuthServer=a.trim(),yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Login with google").addButton(i=>{i.setButtonText(r?"Logout":"Login").onClick(()=>{r?(fu(""),Sf(""),Ja(""),Za(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?Zx():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new Ht.Setting(e).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(i=>{i.setValue(this.plugin.settings.refreshInterval),i.setLimits(10,360,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){this.plugin.settings.refreshInterval=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Default webview theme").addDropdown(i=>M(this,null,function*(){i.addOption("auto","Auto"),i.addOption("dark","Dark"),i.addOption("light","Light"),i.setValue(this.plugin.settings.webViewDefaultColorMode),i.onChange(a=>M(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Ht.Setting(e).setName("Show daily notes").setDesc("Will display daily notes and allow to open and create daily notes").addToggle(i=>{i.setValue(this.plugin.settings.activateDailyNoteAddon),i.onChange(a=>M(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&new Ht.Setting(e).setName("Daily dot color").setDesc("Color for daily note dots in month view").addText(i=>{i.inputEl.type="color",i.setValue(this.plugin.settings.dailyNoteDotColor),i.onChange(a=>M(this,null,function*(){this.plugin.settings.dailyNoteDotColor=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventNotes),i.onChange(a=>M(this,null,function*(){this.plugin.settings.autoCreateEventNotes=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ht.Setting(e).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventKeepOpen),i.onChange(a=>M(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ht.Setting(e).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importStartOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){i.showTooltip(),this.plugin.settings.importStartOffset=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importEndOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){this.plugin.settings.importEndOffset=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Debug Mode").setDesc("Enable if something is not working").addToggle(i=>{i.setValue(this.plugin.settings.debugMode),i.onChange(a=>M(this,null,function*(){this.plugin.settings.debugMode=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexible").addToggle(i=>{i.setValue(this.plugin.settings.useDefaultTemplate),i.onChange(a=>M(this,null,function*(){this.plugin.settings.useDefaultTemplate=a,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Ht.Setting(e).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(i=>{new Zu(i.inputEl,this.plugin),i.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(a=>M(this,null,function*(){this.plugin.settings.defaultTemplate=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}),new Ht.Setting(e).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(i=>{new $u(i.inputEl),i.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(a=>M(this,null,function*(){this.plugin.settings.defaultFolder=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}));let n=this.plugin.settings.insertTemplates;if(n.length&&(new Ht.Setting(e).setName("Saved Templates"),n.forEach(i=>{let a=new Ht.Setting(e).setClass("SubSettings").setName(i.name).addButton(s=>{s.setButtonText("Remove"),s.onClick(()=>M(this,null,function*(){this.plugin.settings.insertTemplates.remove(i),a.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),zt()){new Ht.Setting(e).setName("Default Calendar").addDropdown(a=>M(this,null,function*(){a.addOption("Default","Select a calendar"),(yield en()).forEach(l=>{a.addOption(l.id,l.summary)}),a.setValue(this.plugin.settings.defaultCalendar),a.onChange(l=>M(this,null,function*(){this.plugin.settings.defaultCalendar=l,yield this.plugin.saveSettings()}))})),e.createEl("h3","Calendar Blacklist");let i=this.plugin.settings.calendarBlackList;new Ht.Setting(e).setName("Add Item to BlackList").addDropdown(a=>M(this,null,function*(){a.addOption("Default","Select Option to add"),(yield en()).forEach(l=>{a.addOption(l.id+"_=_"+l.summary,l.summary)}),a.onChange(l=>M(this,null,function*(){let[u,f]=l.split("_=_");i.contains([u,f])||(this.plugin.settings.calendarBlackList=[...i,[u,f]],yield this.plugin.saveSettings());let d=new Ht.Setting(e).setClass("SubSettings").setName(f).addButton(h=>{h.setButtonText("Remove"),h.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove([u,f]),d.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),i.forEach(a=>{let s=new Ht.Setting(e).setClass("SubSettings").setName(a[1]).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function $x(){let t=pt.getInstance();return t.settings.googleClientId==""||t.settings.googleClientSecret==""?(Ot("Google Calendar missing settings"),!1):!0}function zt(){return(!Ea()||Ea()=="")&&(!Ps()||Ps()=="")?(Ot("Google Calendar missing settings or not logged in"),!1):!0}var UA=xt(require("obsidian"));var kS=xt(ms());var fh=new Map;function Oi(){fh.clear()}function hr(){return M(this,arguments,function*({startDate:t,endDate:e,exclude:r,include:n}={}){let i=pt.getInstance();t||(t=window.moment()),t=t.startOf("day"),e||(e=t.clone()),e=e.endOf("day");let a=yield en();n&&n.length?a=a.filter(l=>n.contains(l.id)||n.contains(l.summary)):r&&r.length&&(a=a.filter(l=>!(r.contains(l.id)||r.contains(l.summary))));let s=[];for(let l=0;l<a.length;l++){let u=yield iq(i,a[l],t,e);s=[...s,...u]}return s=kS.default.orderBy(s,[l=>{var u;return new Date((u=l.start.date)!=null?u:l.start.dateTime)}],"asc"),s})}function rq(t,e,r){return M(this,null,function*(){if(!zt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(t.id)}/events?`;if(s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${e}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`),n=yield Xr(s,"GET",null),!n){Ot("Could not list Google Events");continue}let l=n.items.filter(u=>(u.parent=t,u.status!="cancelled"));a=[...a,...l]}while(n.items.length==i);return a})}function nq(t,e,r){let n=[];return t.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],u=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${u})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(e&&g.isBefore(e,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),t=[...t,...n],t}function iq(t,e,r,n){return M(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:e.id});if(fh.has(s)){let{events:u,updated:f}=fh.get(s);if(f.clone().add(t.settings.refreshInterval,"second").isAfter(window.moment()))return u}let l=yield rq(e,i,a);return l=nq(l,r,n),l=l.filter(u=>u.eventType!=="delete"),fh.set(s,{events:l,updated:window.moment()}),l})}var PA=xt(require("obsidian"));var mA=xt(require("obsidian"));function kt(){}function Qm(t){return t()}function IS(){return Object.create(null)}function rn(t){t.forEach(Qm)}function RS(t){return typeof t=="function"}function Dn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var dh;function tc(t,e){return dh||(dh=document.createElement("a")),dh.href=e,t===dh.href}function NS(t){return Object.keys(t).length===0}function Nl(t){return t==null?"":t}var fz=typeof window!="undefined";var dz=new Set;var BS=!1;function aq(){BS=!0}function sq(){BS=!1}function re(t,e){t.appendChild(e)}function di(t,e,r){let n=oq(t);if(!n.getElementById(e)){let i=ae("style");i.id=e,i.textContent=r,lq(n,i)}}function oq(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function lq(t,e){re(t.head||t,e)}function xe(t,e,r){t.insertBefore(e,r||null)}function be(t){t.parentNode.removeChild(t)}function un(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function ae(t){return document.createElement(t)}function ar(t){return document.createTextNode(t)}function De(){return ar(" ")}function hi(){return ar("")}function $e(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function te(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function rc(t){return t===""?null:+t}function uq(t){return Array.from(t.childNodes)}function pi(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Cn(t,e){t.value=e==null?"":e}function et(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function aa(t,e){for(let r=0;r<t.options.length;r+=1){let n=t.options[r];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function Bl(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}var hz=new Map;var nc;function ic(t){nc=t}function DS(){if(!nc)throw new Error("Function called outside component initialization");return nc}function uo(t){DS().$$.on_mount.push(t)}function co(t){DS().$$.on_destroy.push(t)}var ac=[];var On=[],hh=[],Xm=[],cq=Promise.resolve(),Jm=!1;function fq(){Jm||(Jm=!0,cq.then(OS))}function Da(t){hh.push(t)}function Oa(t){Xm.push(t)}var Zm=new Set,ph=0;function OS(){let t=nc;do{for(;ph<ac.length;){let e=ac[ph];ph++,ic(e),dq(e.$$)}for(ic(null),ac.length=0,ph=0;On.length;)On.pop()();for(let e=0;e<hh.length;e+=1){let r=hh[e];Zm.has(r)||(Zm.add(r),r())}hh.length=0}while(ac.length);for(;Xm.length;)Xm.pop()();Jm=!1,Zm.clear(),ic(t)}function dq(t){if(t.fragment!==null){t.update(),rn(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Da)}}var gh=new Set,fo;function mh(){fo={r:0,c:[],p:fo}}function yh(){fo.r||rn(fo.c),fo=fo.p}function gi(t,e){t&&t.i&&(gh.delete(t),t.i(e))}function Li(t,e,r,n){if(t&&t.o){if(gh.has(t))return;gh.add(t),fo.c.push(()=>{gh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}var pz=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var gz=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function La(t,e,r){let n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function sc(t){t&&t.c()}function Dl(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||Da(()=>{let u=a.map(Qm).filter(RS);s?s.push(...u):rn(u),t.$$.on_mount=[]}),l.forEach(Da)}function ho(t,e){let r=t.$$;r.fragment!==null&&(rn(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function hq(t,e){t.$$.dirty[0]===-1&&(ac.push(t),fq(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ln(t,e,r,n,i,a,s,l=[-1]){let u=nc;ic(t);let f=t.$$={fragment:null,ctx:null,props:a,update:kt,not_equal:i,bound:IS(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:IS(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(t,e.props||{},(h,g,...m)=>{let y=m.length?m[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),d&&hq(t,h)),g}):[],f.update(),d=!0,rn(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){aq();let h=uq(e.target);f.fragment&&f.fragment.l(h),h.forEach(be)}else f.fragment&&f.fragment.c();e.intro&&gi(t.$$.fragment),Dl(t,e.target,e.anchor,e.customElement),sq(),OS()}ic(u)}var pq;typeof HTMLElement=="function"&&(pq=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Qm).filter(RS);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){rn(this.$$.on_disconnect)}$destroy(){ho(this,1),this.$destroy=kt}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!NS(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var bn=class{$destroy(){ho(this,1),this.$destroy=kt}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!NS(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var tT=xt(ey()),{__extends:vz,__assign:_z,__rest:wz,__decorate:Ez,__param:Cz,__metadata:bz,__awaiter:Sr,__generator:xz,__exportStar:Sz,__createBinding:Tz,__values:Az,__read:kz,__spread:Iz,__spreadArrays:Rz,__spreadArray:Nz,__await:Bz,__asyncGenerator:Dz,__asyncDelegator:Oz,__asyncValues:Lz,__makeTemplateObject:Pz,__importStar:Mz,__importDefault:Uz,__classPrivateFieldGet:Fz,__classPrivateFieldSet:qz}=tT.default;function Eh(t,e=!1){return M(this,null,function*(){var i;if(!zt())return!1;let r=(i=t.recurringEventId)!=null?i:t.id;return e&&t.recurringEventId&&(r=t.id),!!(yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${t.parent.id}/events/${r}`,"DELETE",null))})}function Ch(t,e=!1){return M(this,null,function*(){var a;if(!zt())return null;let r=(a=t.recurringEventId)!=null?a:t.id;e&&t.recurringEventId&&(r=t.id);let n=t.parent.id;delete t.parent;let i=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${r}`,"PUT",t);return i?(Ot("Updated Event",!0),i):(Ot("Could not create Google Event"),null)})}function bh(t){return M(this,null,function*(){if(!zt())return null;let e=t.parent.id;t.start.timeZone=t.parent.timeZone,t.end.timeZone=t.parent.timeZone,delete t.parent;let r=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events`,"POST",t);return r?(Ot(`Google Event ${r.summary} created`,!0),r):(Ot("Could not create Google Event"),null)})}var xh=["MO","TU","WE","TH","FR","SA","SU"],Rr=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t(xh.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=xh[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}();var sr=function(t){return t!=null},Hn=function(t){return typeof t=="number"},ty=function(t){return xh.indexOf(t)>=0},nn=Array.isArray,mi=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r};var Nt=function(t,e){var r=0,n=[];if(nn(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},rT=function(t){return nn(t)?t:[t]};function po(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=Nt(r,e/r.length)),r.slice(0,e)+String(n))}var nT=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},cn=function(t,e){var r=t%e;return r*e<0?r+e:r},Sh=function(t,e){return{div:Math.floor(t/e),mod:cn(t,e)}},Yn=function(t){return!sr(t)||t.length===0},Tr=function(t){return!Yn(t)},Lt=function(t,e){return Tr(t)&&t.indexOf(e)!==-1};var ys;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var r=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((r.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,r){var n=e.getTime()-t.tzOffset(e),i=r.getTime()-t.tzOffset(r),a=n-i;return Math.round(a/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var r=e.getUTCMonth();return r===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[r]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,r){var n=new Date(Date.UTC(e,r,1));return[t.getWeekday(n),t.getMonthDays(n)]},t.combine=function(e,r){return r=r||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},t.clone=function(e){var r=new Date(e.getTime());return r},t.cloneDates=function(e){for(var r=[],n=0;n<e.length;n++)r.push(t.clone(e[n]));return r},t.sort=function(e){e.sort(function(r,n){return r.getTime()-n.getTime()})},t.timeToUntilString=function(e,r){r===void 0&&(r=!0);var n=new Date(e);return[po(n.getUTCFullYear().toString(),4,"0"),po(n.getUTCMonth()+1,2,"0"),po(n.getUTCDate(),2,"0"),"T",po(n.getUTCHours(),2,"0"),po(n.getUTCMinutes(),2,"0"),po(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},t.untilStringToDate=function(e){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(e);if(!n)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(ys||(ys={}));var Xe=ys;var gq=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),Pa=gq;var ST=xt(xT()),{__extends:Pl,__assign:xn,__rest:vQ,__decorate:_Q,__param:wQ,__metadata:EQ,__awaiter:CQ,__generator:bQ,__exportStar:xQ,__createBinding:SQ,__values:TQ,__read:AQ,__spread:kQ,__spreadArrays:go,__await:IQ,__asyncGenerator:RQ,__asyncDelegator:NQ,__asyncValues:BQ,__makeTemplateObject:DQ,__importStar:OQ,__importDefault:LQ,__classPrivateFieldGet:PQ,__classPrivateFieldSet:MQ}=ST.default;var mq=function(t){Pl(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(Pa),ny=mq;var yq={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},mo=yq;var TT=function(t,e){return t.indexOf(e)!==-1},vq=function(t){return t.toString()},_q=function(t,e,r){return e+" "+r+", "+t},wq=function(){function t(e,r,n,i){if(r===void 0&&(r=vq),n===void 0&&(n=mo),i===void 0&&(i=_q),this.text=[],this.language=n||mo,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(sr(this.origOptions.byweekday)){var l=nn(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(TT(["dtstart","wkst","freq"],n))return!0;if(!TT(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Le.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n,i=this.gettext;if(e===-1)return i("last");switch(n=Math.abs(e),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return e<0?r+" "+i("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=Hn(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!=1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){i===void 0&&(i=","),nn(e)||(e=[e]);var a=function(u,f,d){for(var h="",g=0;g<u.length;g++)g!==0&&(g===u.length-1?h+=" "+d+" ":h+=f+" "),h+=u[g];return h};r=r||function(u){return u.toString()};var s=this,l=function(u){return r&&r.call(s,u)};return n?a(e.map(l),i,n):e.map(l).join(i+" ")},t}(),sa=wq;var Eq=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,r=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function oc(t,e){e===void 0&&(e=mo);var r={},n=new Eq(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Le.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Le.WEEKLY,r.byweekday=[Le.MO,Le.TU,Le.WE,Le.TH,Le.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Le.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Le.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Le.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Le.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Le.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Le.WEEKLY;var m=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Le[m]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Le[y]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Le.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=l();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(_),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),m=n.accept("the");if(!!(g||m))do{var y=f(),_=u(),E=l();if(y)_?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Le[_].nth(y))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(y),n.accept("day(s)"));else if(_)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Le[_]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Le.MO,Le.TU,Le.WE,Le.TH,Le.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var w=n.acceptNumber();if(!w)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(w[0],10)];n.accept("comma");){if(w=n.acceptNumber(),!w)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(w[0],10))}}else if(E)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(E);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var m=n.acceptNumber();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(m[0],10)];n.accept("comma");){if(m=n.acceptNumber(),!m)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(m[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var rt;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(rt||(rt={}));function lc(t){return t<rt.HOURLY}var AT=function(t,e){return e===void 0&&(e=mo),new Le(oc(t,e)||void 0)},Ml=["count","until","interval","byweekday","bymonthday","bymonth"];sa.IMPLEMENTED=[];sa.IMPLEMENTED[rt.HOURLY]=Ml;sa.IMPLEMENTED[rt.MINUTELY]=Ml;sa.IMPLEMENTED[rt.DAILY]=["byhour"].concat(Ml);sa.IMPLEMENTED[rt.WEEKLY]=Ml;sa.IMPLEMENTED[rt.MONTHLY]=Ml;sa.IMPLEMENTED[rt.YEARLY]=["byweekno","byyearday"].concat(Ml);var kT=function(t,e,r,n){return new sa(t,e,r,n).toString()},IT=sa.isFullyConvertible;var Ul=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}();var RT=function(t){Pl(e,t);function e(r,n,i,a,s,l,u){var f=t.call(this,a,s,l,u)||this;return f.year=r,f.month=n,f.day=i,f}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return ys.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=cn(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Sh(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),Yn(i)||Lt(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=Sh(this.minute,60),l=s.div,u=s.mod;if(l&&(this.minute=u,this.addHours(l,!1,i)),(Yn(i)||Lt(i,this.hour))&&(Yn(a)||Lt(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=Sh(this.second,60),u=l.div,f=l.mod;if(u&&(this.second=f,this.addMinutes(u,!1,i,a)),(Yn(i)||Lt(i,this.hour))&&(Yn(a)||Lt(a,this.minute))&&(Yn(s)||Lt(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=ys.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>ys.MAXYEAR))return;r=ys.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,u=r.byminute,f=r.bysecond;switch(i){case rt.YEARLY:return this.addYears(a);case rt.MONTHLY:return this.addMonths(a);case rt.WEEKLY:return this.addWeekly(a,s);case rt.DAILY:return this.addDaily(a);case rt.HOURLY:return this.addHours(a,n,l);case rt.MINUTELY:return this.addMinutes(a,n,l,u);case rt.SECONDLY:return this.addSeconds(a,n,l,u,f)}},e}(Ul);function iy(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];Lt(DT,a)||e.push(a),Xe.isDate(t[a])&&!Xe.isValidDate(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return xn({},t)}function NT(t){var e=xn(xn({},uc),iy(t));if(sr(e.byeaster)&&(e.freq=Le.YEARLY),!(sr(e.freq)&&Le.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),sr(e.wkst)?Hn(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Le.MO.weekday,sr(e.bysetpos)){Hn(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Tr(e.byweekno)||Tr(e.byyearday)||Boolean(e.bymonthday)||Tr(e.bymonthday)||sr(e.byweekday)||sr(e.byeaster)))switch(e.freq){case Le.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Le.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Le.WEEKLY:e.byweekday=[Xe.getWeekday(e.dtstart)];break}if(sr(e.bymonth)&&!nn(e.bymonth)&&(e.bymonth=[e.bymonth]),sr(e.byyearday)&&!nn(e.byyearday)&&Hn(e.byyearday)&&(e.byyearday=[e.byyearday]),!sr(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(nn(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(sr(e.byweekno)&&!nn(e.byweekno)&&(e.byweekno=[e.byweekno]),!sr(e.byweekday))e.bynweekday=null;else if(Hn(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(ty(e.byweekday))e.byweekday=[Rr.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Rr)!e.byweekday.n||e.freq>Le.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],l=[],r=0;r<e.byweekday.length;r++){var u=e.byweekday[r];if(Hn(u)){s.push(u);continue}else if(ty(u)){s.push(Rr.fromStr(u).weekday);continue}!u.n||e.freq>Le.MONTHLY?s.push(u.weekday):l.push([u.weekday,u.n])}e.byweekday=Tr(s)?s:null,e.bynweekday=Tr(l)?l:null}return sr(e.byhour)?Hn(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Le.HOURLY?[e.dtstart.getUTCHours()]:null,sr(e.byminute)?Hn(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Le.MINUTELY?[e.dtstart.getUTCMinutes()]:null,sr(e.bysecond)?Hn(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Le.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function BT(t){var e=t.dtstart.getTime()%1e3;if(!lc(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new Ul(n,i,a,e))})})}),r}function cc(t){var e=t.split(`
`).map(Cq).filter(function(r){return r!==null});return xn(xn({},e[0]),e[1])}function fc(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[0],i=r[1],a=r[2];return i&&(e.tzid=i),e.dtstart=Xe.untilStringToDate(a),e}function Cq(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return OT(t);var r=e[0],n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return OT(t);case"DTSTART":return fc(t);default:throw new Error("Unsupported RFC prop "+n+" in "+t)}}function OT(t){var e=t.replace(/^RRULE:/i,""),r=fc(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=rt[l.toUpperCase()];break;case"WKST":r.wkst=yi[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=bq(l),f=s.toLowerCase();r[f]=u;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=xq(l);break;case"DTSTART":case"TZID":var d=fc(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=Xe.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function bq(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(LT)}return LT(t)}function LT(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function xq(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return yi[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=yi[a].weekday;return new Rr(s,i)})}var yo=function(){function t(e,r){this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=Xe.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+e:";TZID="+this.tzid+":"+e},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid,e!=null?e:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},t}();function dc(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(uc),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Lt(i,n[a])){var s=n[a].toUpperCase(),l=t[n[a]],u="";if(!(!sr(l)||nn(l)&&!l.length)){switch(s){case"FREQ":u=Le.FREQUENCIES[t.freq];break;case"WKST":Hn(l)?u=new Rr(l).toString():u=l.toString();break;case"BYWEEKDAY":s="BYDAY",u=rT(l).map(function(m){return m instanceof Rr?m:nn(m)?new Rr(m[0],m[1]):new Rr(m)}).toString();break;case"DTSTART":r=Sq(l,t.tzid);break;case"UNTIL":u=Xe.timeToUntilString(l,!t.tzid);break;default:if(nn(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);u=f.toString()}else u=String(l)}u&&e.push([s,u])}}var h=e.map(function(m){var y=m[0],_=m[1];return y+"="+_.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(m){return!!m}).join(`
`)}function Sq(t,e){return t?"DTSTART"+new yo(new Date(t),e).toString():""}function Tq(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var PT=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?Xe.clone(r):Xe.cloneDates(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!Tq(r[g],d[g]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(nn(s))for(var l=0;l<s.length;l++){var u=s[l];if(!(i.length&&a(u))){n=u._value;break}}if(!n&&this.all){for(var f=new Pa(e,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(e,n,r)}return nn(n)?Xe.cloneDates(n):n instanceof Date?Xe.clone(n):n},t}();var MT=go(Nt(1,31),Nt(2,28),Nt(3,31),Nt(4,30),Nt(5,31),Nt(6,30),Nt(7,31),Nt(8,31),Nt(9,30),Nt(10,31),Nt(11,30),Nt(12,31),Nt(1,7)),UT=go(Nt(1,31),Nt(2,29),Nt(3,31),Nt(4,30),Nt(5,31),Nt(6,30),Nt(7,31),Nt(8,31),Nt(9,30),Nt(10,31),Nt(11,30),Nt(12,31),Nt(1,7)),Aq=mi(1,29),kq=mi(1,30),vs=mi(1,31),fn=mi(1,32),FT=go(fn,kq,fn,vs,fn,vs,fn,fn,vs,fn,vs,fn,fn.slice(0,7)),qT=go(fn,Aq,fn,vs,fn,vs,fn,fn,vs,fn,vs,fn,fn.slice(0,7)),Iq=mi(-28,0),Rq=mi(-29,0),_s=mi(-30,0),dn=mi(-31,0),GT=go(dn,Rq,dn,_s,dn,_s,dn,dn,_s,dn,_s,dn,dn.slice(0,7)),VT=go(dn,Iq,dn,_s,dn,_s,dn,dn,_s,dn,_s,dn,dn.slice(0,7)),KT=[0,31,60,91,121,152,182,213,244,274,305,335,366],jT=[0,31,59,90,120,151,181,212,243,273,304,334,365],ay=function(){for(var t=[],e=0;e<55;e++)t=t.concat(mi(7));return t}();function HT(t,e){var r=new Date(Date.UTC(t,0,1)),n=Xe.isLeapYear(t)?366:365,i=Xe.isLeapYear(t+1)?366:365,a=Xe.toOrdinal(r),s=Xe.getWeekday(r),l=xn(xn({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},Nq(t)),{wnomask:null});if(Yn(e.byweekno))return l;l.wnomask=Nt(0,n+7);var u,f,d=u=cn(7-s+e.wkst,7);d>=4?(d=0,f=l.yearlen+cn(s-e.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=cn(f,7),m=Math.floor(h+g/4),y=0;y<e.byweekno.length;y++){var _=e.byweekno[y];if(_<0&&(_+=m+1),_>0&&_<=m){var E=void 0;_>1?(E=d+(_-1)*7,d!==u&&(E-=7-u)):E=d;for(var w=0;w<7&&(l.wnomask[E]=1,E++,l.wdaymask[E]!==e.wkst);w++);}}if(Lt(e.byweekno,1)){var E=d+m*7;if(d!==u&&(E-=7-u),E<n)for(var y=0;y<7&&(l.wnomask[E]=1,E+=1,l.wdaymask[E]!==e.wkst);y++);}if(d){var b=void 0;if(Lt(e.byweekno,-1))b=-1;else{var I=Xe.getWeekday(new Date(Date.UTC(t-1,0,1))),R=cn(7-I.valueOf()+e.wkst,7),D=Xe.isLeapYear(t-1)?366:365,O=void 0;R>=4?(R=0,O=D+cn(I-e.wkst,7)):O=n-d,b=Math.floor(52+cn(O,7)/4)}if(Lt(e.byweekno,b))for(var E=0;E<d;E++)l.wnomask[E]=1}return l}function Nq(t){var e=Xe.isLeapYear(t)?366:365,r=new Date(Date.UTC(t,0,1)),n=Xe.getWeekday(r);return e===365?{mmask:MT,mdaymask:qT,nmdaymask:VT,wdaymask:ay.slice(n),mrange:jT}:{mmask:UT,mdaymask:FT,nmdaymask:GT,wdaymask:ay.slice(n),mrange:KT}}function YT(t,e,r,n,i,a){var s={lastyear:t,lastmonth:e,nwdaymask:[]},l=[];if(a.freq===Le.YEARLY)if(Yn(a.bymonth))l=[[0,r]];else for(var u=0;u<a.bymonth.length;u++)e=a.bymonth[u],l.push(n.slice(e-1,e+1));else a.freq===Le.MONTHLY&&(l=[n.slice(e-1,e+1)]);if(Yn(l))return s;s.nwdaymask=Nt(0,r);for(var u=0;u<l.length;u++)for(var f=l[u],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var m=void 0,y=a.bynweekday[g],_=y[0],E=y[1];E<0?(m=h+(E+1)*7,m-=cn(i[m]-_,7)):(m=d+(E-1)*7,m+=cn(7-i[m]+_,7)),d<=m&&m<=h&&(s.nwdaymask[m]=1)}return s}function WT(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),u=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-u+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,m=Math.floor((r+11*f+22*g)/451),y=Math.floor((f+g-7*m+114)/31),_=(f+g-7*m+114)%31+1,E=Date.UTC(t,y-1,_+e),w=Date.UTC(t,0,1);return[Math.ceil((E-w)/(1e3*60*60*24))]}var Bq=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=HT(e,n)),Tr(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=YT(e,r,a,s,l,n)}sr(n.byeaster)&&(this.eastermask=WT(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),t.prototype.ydayset=function(){return[mi(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=Nt(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},t.prototype.wdayset=function(e,r,n){for(var i=Nt(null,this.yearlen+7),a=Xe.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},t.prototype.ddayset=function(e,r,n){var i=Nt(null,this.yearlen),a=Xe.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(e,l,n,i))}),Xe.sort(s),s},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(s){return new Ul(e,r,s,i)});return Xe.sort(a),a},t.prototype.stimeset=function(e,r,n,i){return[new Ul(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case rt.YEARLY:return this.ydayset.bind(this);case rt.MONTHLY:return this.mdayset.bind(this);case rt.WEEKLY:return this.wdayset.bind(this);case rt.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case rt.HOURLY:return this.htimeset.bind(this);case rt.MINUTELY:return this.mtimeset.bind(this);case rt.SECONDLY:return this.stimeset.bind(this)}},t}(),zT=Bq;function QT(t,e,r,n,i,a){for(var s=[],l=0;l<t.length;l++){var u=void 0,f=void 0,d=t[l];d<0?(u=Math.floor(d/e.length),f=cn(d,e.length)):(u=Math.floor((d-1)/e.length),f=cn(d-1,e.length));for(var h=[],g=r;g<n;g++){var m=a[g];!sr(m)||h.push(m)}var y=void 0;u<0?y=h.slice(u)[0]:y=h[u];var _=e[f],E=Xe.fromOrdinal(i.yearordinal+y),w=Xe.combine(E,_);Lt(s,w)||s.push(w)}return Xe.sort(s),s}function kh(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,s=e.bysetpos,l=e.count;if(l===0||i===0)return Ma(t);var u=RT.fromDate(r),f=new zT(e);f.rebuild(u.year,u.month);for(var d=Lq(f,u,e);;){var h=f.getdayset(n)(u.year,u.month,u.day),g=h[0],m=h[1],y=h[2],_=Oq(g,m,y,f,e);if(Tr(s))for(var E=QT(s,d,m,y,f,g),w=0;w<E.length;w++){var b=E[w];if(a&&b>a)return Ma(t);if(b>=r){var I=XT(b,e);if(!t.accept(I)||l&&(--l,!l))return Ma(t)}}else for(var w=m;w<y;w++){var R=g[w];if(!!sr(R))for(var D=Xe.fromOrdinal(f.yearordinal+R),O=0;O<d.length;O++){var ee=d[O],b=Xe.combine(D,ee);if(a&&b>a)return Ma(t);if(b>=r){var I=XT(b,e);if(!t.accept(I)||l&&(--l,!l))return Ma(t)}}}if(e.interval===0||(u.add(e,_),u.year>Xe.MAXYEAR))return Ma(t);lc(n)||(d=f.gettimeset(n)(u.hour,u.minute,u.second,0)),f.rebuild(u.year,u.month)}}function Dq(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,u=r.bynmonthday,f=r.byyearday;return Tr(n)&&!Lt(n,t.mmask[e])||Tr(i)&&!t.wnomask[e]||Tr(a)&&!Lt(a,t.wdaymask[e])||Tr(t.nwdaymask)&&!t.nwdaymask[e]||s!==null&&!Lt(t.eastermask,e)||(Tr(l)||Tr(u))&&!Lt(l,t.mdaymask[e])&&!Lt(u,t.nmdaymask[e])||Tr(f)&&(e<t.yearlen&&!Lt(f,e+1)&&!Lt(f,-t.yearlen+e)||e>=t.yearlen&&!Lt(f,e+1-t.yearlen)&&!Lt(f,-t.nextyearlen+e-t.yearlen))}function XT(t,e){return new yo(t,e.tzid).rezonedDate()}function Ma(t){return t.getValue()}function Oq(t,e,r,n,i){for(var a=!1,s=e;s<r;s++){var l=t[s];a=Dq(n,l,i),a&&(t[l]=null)}return a}function Lq(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return lc(n)?BT(r):n>=Le.HOURLY&&Tr(i)&&!Lt(i,e.hour)||n>=Le.MINUTELY&&Tr(a)&&!Lt(a,e.minute)||n>=Le.SECONDLY&&Tr(s)&&!Lt(s,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var yi={MO:new Rr(0),TU:new Rr(1),WE:new Rr(2),TH:new Rr(3),FR:new Rr(4),SA:new Rr(5),SU:new Rr(6)},uc={freq:rt.YEARLY,dtstart:null,interval:1,wkst:yi.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},DT=Object.keys(uc),Le=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new PT,this.origOptions=iy(e);var n=NT(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return oc(e,r)},t.fromText=function(e,r){return AT(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return kh(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(!!this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new ny("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Pa("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!Xe.isValidDate(e)||!Xe.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new ny("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new Pa("between",a)),this._cacheAdd("between",s,a)),s},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!Xe.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Pa("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!Xe.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Pa("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return dc(this.origOptions)},t.prototype.toText=function(e,r,n){return kT(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return IT(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=rt.YEARLY,t.MONTHLY=rt.MONTHLY,t.WEEKLY=rt.WEEKLY,t.DAILY=rt.DAILY,t.HOURLY=rt.HOURLY,t.MINUTELY=rt.MINUTELY,t.SECONDLY=rt.SECONDLY,t.MO=yi.MO,t.TU=yi.TU,t.WE=yi.WE,t.TH=yi.TH,t.FR=yi.FR,t.SA=yi.SA,t.SU=yi.SU,t.parseString=cc,t.optionsToString=dc,t}();function JT(t,e,r,n,i,a){var s={},l=t.accept;function u(g,m){r.forEach(function(y){y.between(g,m,!0).forEach(function(_){s[Number(_)]=!0})})}i.forEach(function(g){var m=new yo(g,a).rezonedDate();s[Number(m)]=!0}),t.accept=function(g){var m=Number(g);return isNaN(m)?l.call(this,g):!s[m]&&(u(new Date(m-1),new Date(m+1)),!s[m])?(s[m]=!0,l.call(this,g)):!0},t.method==="between"&&(u(t.args.after,t.args.before),t.accept=function(g){var m=Number(g);return s[m]?!0:(s[m]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new yo(n[f],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(g){kh(t,g.options)});var h=t._result;switch(Xe.sort(h),t.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var ZT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Pq(t,e){var r=[],n=[],i=[],a=[],s=fc(t),l=s.dtstart,u=s.tzid,f=Gq(t,e.unfold);return f.forEach(function(d){if(!!d){var h=qq(d),g=h.name,m=h.parms,y=h.value;switch(g.toUpperCase()){case"RRULE":if(m.length)throw new Error("unsupported RRULE parm: "+m.join(","));r.push(cc(d));break;case"RDATE":var _=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),E=_[0],w=_[1];w&&!u&&(u=w),n=n.concat($T(y,m));break;case"EXRULE":if(m.length)throw new Error("unsupported EXRULE parm: "+m.join(","));i.push(cc(y));break;case"EXDATE":a=a.concat($T(y,m));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:u,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function Mq(t,e){var r=Pq(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,u=r.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||s.length){var d=new vo(f);return d.dtstart(l),d.tzid(u||void 0),n.forEach(function(g){d.rrule(new Le(sy(g,l,u),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Le(sy(g,l,u),f))}),s.forEach(function(g){d.exdate(g)}),e.compatible&&e.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Le(sy(h,h.dtstart||e.dtstart||l,h.tzid||e.tzid||u),f)}function Ih(t,e){return e===void 0&&(e={}),Mq(t,Uq(e))}function sy(t,e,r){return xn(xn({},t),{dtstart:e,tzid:r})}function Uq(t){var e=[],r=Object.keys(t),n=Object.keys(ZT);if(r.forEach(function(i){Lt(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return xn(xn({},ZT),t)}function Fq(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=nT(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function qq(t){var e=Fq(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Gq(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function Vq(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function $T(t,e){return Vq(e),t.split(",").map(function(r){return Xe.untilStringToDate(r)})}function eA(t){var e=this;return function(r){if(r!==void 0&&(e["_"+t]=r),e["_"+t]!==void 0)return e["_"+t];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var vo=function(t){Pl(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=eA.apply(n,["dtstart"]),n.tzid=eA.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return JT(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){tA(r,this._rrule)},e.prototype.exrule=function(r){tA(r,this._exrule)},e.prototype.rdate=function(r){rA(r,this._rdate)},e.prototype.exdate=function(r){rA(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return Ih(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return Ih(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(dc({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(nA("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(nA("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(Le);function tA(t,e){if(!(t instanceof Le))throw new TypeError(String(t)+" is not RRule instance");Lt(e.map(String),String(t))||e.push(t)}function rA(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Lt(e.map(Number),Number(t))||(e.push(t),Xe.sort(e))}function nA(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?t+":":t+";TZID="+r+":",a=e.map(function(s){return Xe.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var iA=Le;var Fl=xt(require("obsidian"));var _o=xt(require("obsidian"));var Rh=xt(ms()),oy=t=>M(void 0,null,function*(){var s,l;if(!t.settings.autoCreateEventNotes||!zt())return;let e=Math.abs(t.settings.importStartOffset),r=Math.abs(t.settings.importEndOffset),n=window.moment().local().subtract(e,"day"),i=window.moment().local().add(r,"day"),a=yield hr({startDate:n,endDate:i});for(let u=0;u<a.length;u++){let f=(l=(s=a[u].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield wo(a[u],f[1],f[2]))}}),Kq=(t,e)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(e),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=Rh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].displayName?s+=`- [[@${l[u].displayName}]]
`:s+=`- [[@${l[u].email}]]
`}else if(a[1]=="attachments"){let l=Rh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].title?s+=`- [${l[u].title}](${l[u].fileUrl})
`:s+=`- [${l[u].fileUrl}](${l[u].fileUrl})
`}else s=Rh.default.get(t,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),e=e.replace(a[0],s!=null?s:"")}}),e},wo=(t,e,r)=>M(void 0,null,function*(){let n=pt.getInstance(),{vault:i}=app,{adapter:a}=i,s=app.fileManager.getNewFileParent("").path;e&&(e.endsWith("-")&&(e=e.slice(0,-1)),e="/"+e.split(/[/\\]/).join("/"),(yield a.exists(e))&&(s=e));let l=t.summary.trim().replace("<","lt").replace(">","gt").replace('"',"''").replace("\\","-").replace("/","-").replace(":","-").replace("|","-").replace("*","").replace("?",""),u=(0,_o.normalizePath)(`${s}/${l}.md`);if(yield a.exists(u))return i.getAbstractFileByPath(u);let f=yield i.create(u,"");if(Ot(`EventNote ${t.summary} created.`),!n.coreTemplatePlugin&&!n.templaterPlugin||!r)return i.getAbstractFileByPath(u);r.match(/.*\.md/)||(r=r+".md");let d={state:{mode:"source"},active:!0},h=yield app.workspace.getLeaf(!0);return yield h.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(h,!1,!0),yield h.openFile(f,d),n.templaterPlugin&&n.coreTemplatePlugin?(yield g(!0))||(yield g(!1))||Ot("Template not compatible"):n.templaterPlugin?(yield g(!0))||Ot("Template not compatible"):n.coreTemplatePlugin&&((yield g(!1))||Ot("Template not compatible")),n.settings.autoCreateEventKeepOpen||h.detach(),i.getAbstractFileByPath(u);function g(m){return M(this,null,function*(){var D,O,ee,G,U;let y;m?y=(0,_o.normalizePath)((O=(D=n==null?void 0:n.templaterPlugin)==null?void 0:D.settings)==null?void 0:O.templates_folder):y=(0,_o.normalizePath)((U=(G=(ee=n==null?void 0:n.coreTemplatePlugin)==null?void 0:ee.instance)==null?void 0:G.options)==null?void 0:U.folder);let _;if((yield a.exists(r))?_=r:(_=`${y}/${r}`,y==="/"&&(_=r)),!(yield a.exists(_)))return Ot(`Template: ${r} doesn't exit.`),!1;let E=i.getAbstractFileByPath(_);if(!(E instanceof _o.TFile))return!1;let w=yield i.cachedRead(E),b=Kq(t,w);if(m&&b.contains("{{")&&b.contains("}}"))return!1;if(!m&&b.contains("<%")&&b.contains("%>"))return!1;let I=E.path+".tmp";yield a.write(I,b);let R=app.vault.getAbstractFileByPath(I);if(!(R instanceof _o.TFile))return!1;try{return m?yield n.templaterPlugin.templater.append_template_to_active_file(R):yield n.coreTemplatePlugin.instance.insertTemplate(R),a.remove(I),!0}catch(le){return a.remove(I),!1}})}});var Eo=class extends Fl.Modal{constructor(e,r){super(window.app);this.template=null;this.folder=null;this.plugin=pt.getInstance();this.event=e,this.onSumbit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"You can now select a template to use"}),new Fl.Setting(e).setName("Template").addSearch(r=>{new Zu(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Fl.Setting(e).setName("Folder").addSearch(r=>{new $u(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Fl.Setting(e).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(n=>M(this,null,function*(){let i=yield wo(this.event,this.folder,this.template);this.onSumbit(i),this.close()}))})}onClose(){let{contentEl:e}=this;e.empty()}};function jq(t){di(t,"svelte-1wq45u1",".weekActive.svelte-1wq45u1.svelte-1wq45u1{background-color:rgb(61, 102, 214) !important}.weekInActive.svelte-1wq45u1.svelte-1wq45u1{background-color:#2a2a2a !important}.buttonRow.svelte-1wq45u1.svelte-1wq45u1{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-1wq45u1.svelte-1wq45u1{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}.disabled.svelte-1wq45u1.svelte-1wq45u1{opacity:0.2}label.svelte-1wq45u1.svelte-1wq45u1{margin-top:5px}.googleFullDayContainer.svelte-1wq45u1.svelte-1wq45u1{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-1wq45u1.svelte-1wq45u1{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-1wq45u1 button.svelte-1wq45u1{width:40%}")}function aA(t,e,r){let n=t.slice();return n[41]=e[r],n[42]=e,n[43]=r,n}function sA(t,e,r){let n=t.slice();return n[44]=e[r],n}function Hq(t){let e,r,n,i,a,s,l=t[3],u=[];for(let f=0;f<l.length;f+=1)u[f]=oA(sA(t,l,f));return{c(){e=ae("label"),e.textContent="Calendar",r=De(),n=ae("select");for(let f=0;f<u.length;f+=1)u[f].c();te(e,"for","calendar"),te(e,"class","svelte-1wq45u1"),te(n,"name","calendar"),te(n,"class","dropdown"),n.disabled=i=t[0].id!==void 0},m(f,d){xe(f,e,d),xe(f,r,d),xe(f,n,d);for(let h=0;h<u.length;h+=1)u[h].m(n,null);a||(s=$e(n,"change",t[17]),a=!0)},p(f,d){if(d[0]&9){l=f[3];let h;for(h=0;h<l.length;h+=1){let g=sA(f,l,h);u[h]?u[h].p(g,d):(u[h]=oA(g),u[h].c(),u[h].m(n,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}d[0]&1&&i!==(i=f[0].id!==void 0)&&(n.disabled=i)},d(f){f&&be(e),f&&be(r),f&&be(n),un(u,f),a=!1,s()}}}function Yq(t){let e;return{c(){e=ae("span"),e.textContent="Loading"},m(r,n){xe(r,e,n)},p:kt,d(r){r&&be(e)}}}function oA(t){let e,r=t[44].summary+"",n,i,a,s;return{c(){e=ae("option"),n=ar(r),te(e,"id",i=t[44].id),e.__value=a=t[44].id,e.value=e.__value,e.selected=s=t[44].id==t[0].parent.id},m(l,u){xe(l,e,u),re(e,n)},p(l,u){u[0]&8&&r!==(r=l[44].summary+"")&&pi(n,r),u[0]&8&&i!==(i=l[44].id)&&te(e,"id",i),u[0]&8&&a!==(a=l[44].id)&&(e.__value=a,e.value=e.__value),u[0]&9&&s!==(s=l[44].id==l[0].parent.id)&&(e.selected=s)},d(l){l&&be(e)}}}function Wq(t){let e,r,n,i,a,s,l,u,f,d;return{c(){e=ae("label"),e.textContent="Start Date",r=De(),n=ae("input"),i=De(),a=ae("label"),a.textContent="End Date",s=De(),l=ae("input"),te(e,"for","eventStartDate"),te(e,"class","svelte-1wq45u1"),te(n,"type","datetime-local"),te(n,"name","eventStartDate"),te(a,"for","eventEndDate"),te(a,"class","svelte-1wq45u1"),te(l,"type","datetime-local"),te(l,"name","eventEndDate"),te(l,"min",u=window.moment(t[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){xe(h,e,g),xe(h,r,g),xe(h,n,g),Cn(n,t[1]),xe(h,i,g),xe(h,a,g),xe(h,s,g),xe(h,l,g),Cn(l,t[2]),f||(d=[$e(n,"input",t[30]),$e(l,"input",t[31])],f=!0)},p(h,g){g[0]&2&&Cn(n,h[1]),g[0]&2&&u!==(u=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&te(l,"min",u),g[0]&4&&Cn(l,h[2])},d(h){h&&be(e),h&&be(r),h&&be(n),h&&be(i),h&&be(a),h&&be(s),h&&be(l),f=!1,rn(d)}}}function zq(t){let e,r,n,i,a;return{c(){e=ae("label"),e.textContent="Date",r=De(),n=ae("input"),te(e,"for","eventDate"),te(e,"class","svelte-1wq45u1"),te(n,"type","date"),te(n,"name","eventDate")},m(s,l){xe(s,e,l),xe(s,r,l),xe(s,n,l),Cn(n,t[12]),i||(a=$e(n,"input",t[29]),i=!0)},p(s,l){l[0]&4096&&Cn(n,s[12])},d(s){s&&be(e),s&&be(r),s&&be(n),i=!1,a()}}}function lA(t){let e,r,n,i,a,s,l,u,f=t[6]&&uA(t);return{c(){e=ae("div"),r=ae("label"),r.textContent="Reccuring",n=De(),i=ae("input"),a=De(),f&&f.c(),s=hi(),te(r,"for","reaccuring"),te(r,"class","svelte-1wq45u1"),te(i,"type","checkbox"),te(i,"name","reaccuring"),te(e,"class","googleFullDayContainer svelte-1wq45u1")},m(d,h){xe(d,e,h),re(e,r),re(e,n),re(e,i),i.checked=t[6],xe(d,a,h),f&&f.m(d,h),xe(d,s,h),l||(u=$e(i,"change",t[32]),l=!0)},p(d,h){h[0]&64&&(i.checked=d[6]),d[6]?f?f.p(d,h):(f=uA(d),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},d(d){d&&be(e),d&&be(a),f&&f.d(d),d&&be(s),l=!1,u()}}}function uA(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,E,w,b,I,R,D,O,ee,G,U,le,se,_e,Oe;function Re(Je,Ke){if(Je[9]=="Until")return Xq;if(Je[9]=="For")return Qq}let Se=Re(t,[-1,-1]),Ee=Se&&Se(t),ve=t[7]===rt.WEEKLY&&cA(t);return{c(){e=ae("div"),r=ae("span"),r.textContent="Repeat every",n=De(),i=ae("input"),a=De(),s=ae("select"),l=ae("option"),u=ar("Days"),d=ae("option"),h=ar("Weeks"),m=ae("option"),y=ar("Months"),E=ae("option"),w=ar("Years"),I=De(),R=ae("select"),D=ae("option"),D.textContent="Forever",O=ae("option"),O.textContent="Until",ee=ae("option"),ee.textContent="For",G=De(),Ee&&Ee.c(),U=De(),le=ae("br"),se=De(),ve&&ve.c(),te(i,"type","number"),te(i,"name","recurringInterval"),te(i,"step","1"),te(i,"min","1"),et(i,"width","90px",!1),l.__value=f=rt.DAILY,l.value=l.__value,te(d,"default",""),d.__value=g=rt.WEEKLY,d.value=d.__value,m.__value=_=rt.MONTHLY,m.value=m.__value,E.__value=b=rt.YEARLY,E.value=E.__value,te(s,"class","dropdown"),t[7]===void 0&&Da(()=>t[34].call(s)),te(D,"default",""),D.__value="Forever",D.value=D.__value,O.__value="Until",O.value=O.__value,ee.__value="For",ee.value=ee.__value,te(R,"class","dropdown"),t[9]===void 0&&Da(()=>t[35].call(R))},m(Je,Ke){xe(Je,e,Ke),re(e,r),re(e,n),re(e,i),Cn(i,t[8]),re(e,a),re(e,s),re(s,l),re(l,u),re(s,d),re(d,h),re(s,m),re(m,y),re(s,E),re(E,w),aa(s,t[7]),re(e,I),re(e,R),re(R,D),re(R,O),re(R,ee),aa(R,t[9]),re(e,G),Ee&&Ee.m(e,null),re(e,U),re(e,le),re(e,se),ve&&ve.m(e,null),_e||(Oe=[$e(i,"input",t[33]),$e(s,"change",t[34]),$e(R,"change",t[35])],_e=!0)},p(Je,Ke){Ke[0]&256&&rc(i.value)!==Je[8]&&Cn(i,Je[8]),Ke[0]&128&&aa(s,Je[7]),Ke[0]&512&&aa(R,Je[9]),Se===(Se=Re(Je,Ke))&&Ee?Ee.p(Je,Ke):(Ee&&Ee.d(1),Ee=Se&&Se(Je),Ee&&(Ee.c(),Ee.m(e,U))),Je[7]===rt.WEEKLY?ve?ve.p(Je,Ke):(ve=cA(Je),ve.c(),ve.m(e,null)):ve&&(ve.d(1),ve=null)},d(Je){Je&&be(e),Ee&&Ee.d(),ve&&ve.d(),_e=!1,rn(Oe)}}}function Qq(t){let e,r,n,i,a;return{c(){e=ae("input"),r=De(),n=ae("span"),n.textContent="times",te(e,"type","number"),te(e,"name","recurringCount"),te(e,"step","1"),te(e,"min","1"),e.required=!0,et(e,"width","90px",!1)},m(s,l){xe(s,e,l),Cn(e,t[10]),xe(s,r,l),xe(s,n,l),i||(a=$e(e,"input",t[37]),i=!0)},p(s,l){l[0]&1024&&rc(e.value)!==s[10]&&Cn(e,s[10])},d(s){s&&be(e),s&&be(r),s&&be(n),i=!1,a()}}}function Xq(t){let e,r,n;return{c(){e=ae("input"),te(e,"type","date"),te(e,"name","recurringEndDate"),e.required=!0},m(i,a){xe(i,e,a),Cn(e,t[11]),r||(n=$e(e,"input",t[36]),r=!0)},p(i,a){a[0]&2048&&Cn(e,i[11])},d(i){i&&be(e),r=!1,n()}}}function cA(t){let e,r=t[14],n=[];for(let i=0;i<r.length;i+=1)n[i]=fA(aA(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=hi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&16384){r=i[14];let s;for(s=0;s<r.length;s+=1){let l=aA(i,r,s);n[s]?n[s].p(l,a):(n[s]=fA(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){un(n,i),i&&be(e)}}}function fA(t){let e,r=t[41][0].toString()+"",n,i,a,s,l;function u(){return t[38](t[41],t[42],t[43])}return{c(){e=ae("button"),n=ar(r),i=De(),te(e,"class",a=""+(Nl(t[41][1]?"weekActive":"weekInActive")+" svelte-1wq45u1"))},m(f,d){xe(f,e,d),re(e,n),re(e,i),s||(l=$e(e,"click",u),s=!0)},p(f,d){t=f,d[0]&16384&&r!==(r=t[41][0].toString()+"")&&pi(n,r),d[0]&16384&&a!==(a=""+(Nl(t[41][1]?"weekActive":"weekInActive")+" svelte-1wq45u1"))&&te(e,"class",a)},d(f){f&&be(e),s=!1,l()}}}function Jq(t){let e,r,n,i;return{c(){e=ae("div"),r=ae("button"),r.textContent="Create",te(r,"class","svelte-1wq45u1"),te(e,"class","buttonRow svelte-1wq45u1")},m(a,s){xe(a,e,s),re(e,r),n||(i=$e(r,"click",t[18]),n=!0)},p:kt,d(a){a&&be(e),n=!1,i()}}}function Zq(t){let e,r,n,i,a,s,l,u,f,d,h;function g(I,R){return I[6]?e9:$q}let m=g(t,[-1,-1]),y=m(t);function _(I,R){return I[13]?r9:t9}let E=_(t,[-1,-1]),w=E(t),b=t[6]&&dA(t);return{c(){e=ae("div"),y.c(),r=De(),w.c(),n=De(),i=ae("div"),a=ae("button"),a.textContent="Update",s=De(),l=ae("button"),l.textContent="Delete",u=De(),b&&b.c(),f=hi(),te(e,"class","buttonRow svelte-1wq45u1"),te(a,"class","svelte-1wq45u1"),te(l,"class","svelte-1wq45u1"),te(i,"class","buttonRow svelte-1wq45u1")},m(I,R){xe(I,e,R),y.m(e,null),re(e,r),w.m(e,null),xe(I,n,R),xe(I,i,R),re(i,a),re(i,s),re(i,l),xe(I,u,R),b&&b.m(I,R),xe(I,f,R),d||(h=[$e(a,"click",t[21]),$e(l,"click",t[19])],d=!0)},p(I,R){m===(m=g(I,R))&&y?y.p(I,R):(y.d(1),y=m(I),y&&(y.c(),y.m(e,r))),E===(E=_(I,R))&&w?w.p(I,R):(w.d(1),w=E(I),w&&(w.c(),w.m(e,null))),I[6]?b?b.p(I,R):(b=dA(I),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},d(I){I&&be(e),y.d(),w.d(),I&&be(n),I&&be(i),I&&be(u),b&&b.d(I),I&&be(f),d=!1,rn(h)}}}function $q(t){let e,r,n;return{c(){e=ae("button"),e.textContent="Show Single Event",te(e,"class","svelte-1wq45u1")},m(i,a){xe(i,e,a),r||(n=$e(e,"click",t[25]),r=!0)},p:kt,d(i){i&&be(e),r=!1,n()}}}function e9(t){let e,r,n;return{c(){e=ae("button"),e.textContent="Show Recurring Event",te(e,"class","svelte-1wq45u1")},m(i,a){xe(i,e,a),r||(n=$e(e,"click",t[25]),r=!0)},p:kt,d(i){i&&be(e),r=!1,n()}}}function t9(t){let e,r,n;return{c(){e=ae("button"),e.textContent="Create Event Note",te(e,"class","svelte-1wq45u1")},m(i,a){xe(i,e,a),r||(n=$e(e,"click",t[24]),r=!0)},p:kt,d(i){i&&be(e),r=!1,n()}}}function r9(t){let e,r,n;return{c(){e=ae("button"),e.textContent="Open Event Note",te(e,"class","svelte-1wq45u1")},m(i,a){xe(i,e,a),r||(n=$e(e,"click",t[23]),r=!0)},p:kt,d(i){i&&be(e),r=!1,n()}}}function dA(t){let e,r,n,i,a,s;return{c(){e=ae("div"),r=ae("button"),r.textContent="Update All",n=De(),i=ae("button"),i.textContent="Delete All",r.disabled=!0,te(r,"class","disabled svelte-1wq45u1"),te(i,"class","svelte-1wq45u1"),te(e,"class","buttonRow svelte-1wq45u1")},m(l,u){xe(l,e,u),re(e,r),re(e,n),re(e,i),a||(s=[$e(r,"click",t[22]),$e(i,"click",t[20])],a=!0)},p:kt,d(l){l&&be(e),a=!1,rn(s)}}}function n9(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,E,w,b,I;function R(Re,Se){return Re[4]?Yq:Hq}let D=R(t,[-1,-1]),O=D(t);function ee(Re,Se){return Re[5]?zq:Wq}let G=ee(t,[-1,-1]),U=G(t),le=!t[0].id&&lA(t);function se(Re,Se){return Re[0].id?Zq:Jq}let _e=se(t,[-1,-1]),Oe=_e(t);return{c(){e=ae("div"),r=ae("input"),n=De(),i=ae("label"),i.textContent="Description",a=De(),s=ae("textarea"),u=De(),O.c(),f=De(),d=ae("div"),h=ae("label"),h.textContent="Full Day",g=De(),m=ae("input"),y=De(),U.c(),_=De(),le&&le.c(),E=De(),w=ae("div"),Oe.c(),te(r,"class","summaryInput svelte-1wq45u1"),te(r,"name","summary"),te(r,"type","text"),te(r,"placeholder","Summary"),te(i,"for","description"),te(i,"class","svelte-1wq45u1"),te(s,"name","description"),s.value=l=t[15](),te(h,"for","fullDay"),te(h,"class","svelte-1wq45u1"),te(m,"type","checkbox"),te(m,"name","fullDay"),te(d,"class","googleFullDayContainer svelte-1wq45u1"),te(w,"class","googleEventButtonContainer svelte-1wq45u1"),te(e,"class","googleEventDetails")},m(Re,Se){xe(Re,e,Se),re(e,r),Cn(r,t[0].summary),re(e,n),re(e,i),re(e,a),re(e,s),re(e,u),O.m(e,null),re(e,f),re(e,d),re(d,h),re(d,g),re(d,m),m.checked=t[5],re(e,y),U.m(e,null),re(e,_),le&&le.m(e,null),re(e,E),re(e,w),Oe.m(w,null),b||(I=[$e(r,"input",t[27]),$e(s,"change",t[16]),$e(m,"change",t[28])],b=!0)},p(Re,Se){Se[0]&1&&r.value!==Re[0].summary&&Cn(r,Re[0].summary),D===(D=R(Re,Se))&&O?O.p(Re,Se):(O.d(1),O=D(Re),O&&(O.c(),O.m(e,f))),Se[0]&32&&(m.checked=Re[5]),G===(G=ee(Re,Se))&&U?U.p(Re,Se):(U.d(1),U=G(Re),U&&(U.c(),U.m(e,_))),Re[0].id?le&&(le.d(1),le=null):le?le.p(Re,Se):(le=lA(Re),le.c(),le.m(e,E)),_e===(_e=se(Re,Se))&&Oe?Oe.p(Re,Se):(Oe.d(1),Oe=_e(Re),Oe&&(Oe.c(),Oe.m(w,null)))},i:kt,o:kt,d(Re){Re&&be(e),O.d(),U.d(),le&&le.d(),Oe.d(),b=!1,rn(I)}}}function hA(){let t=15,e=1e3*60*t;return window.moment(new Date(Math.round(new Date().getTime()/e)*e))}function i9(t,e,r){let{event:n}=e,{closeFunction:i}=e,a,s=!0,l,u,f,d=1,h,g,m,y=pt.getInstance(),_,E,w,b=app.vault.getFiles().find(Ce=>Ce.basename==n.summary),I=[[Le.MO,!0],[Le.TU,!0],[Le.WE,!0],[Le.TH,!0],[Le.FR,!0],[Le.SA,!0],[Le.SU,!0]];function R(Ce){return l?(Ce.start.date=window.moment(w).format("YYYY-MM-DD"),Ce.end.date=window.moment(w).format("YYYY-MM-DD"),delete Ce.start.dateTime,delete Ce.end.dateTime):(Ce.start.dateTime=window.moment(_).format(),Ce.end.dateTime=window.moment(E).format(),delete Ce.start.date,delete Ce.end.date),Ce}uo(()=>Sr(void 0,void 0,void 0,function*(){var Ce,A,B,L;if(r(3,a=yield en()),r(4,s=!1),r(5,l=((Ce=n==null?void 0:n.start)===null||Ce===void 0?void 0:Ce.dateTime)==null&&((A=n==null?void 0:n.start)===null||A===void 0?void 0:A.date)!==void 0),r(6,u=(n==null?void 0:n.recurringEventId)!==void 0),n.id==null){r(0,n.summary=(B=n.summary)!==null&&B!==void 0?B:"",n),r(0,n.description=(L=n.description)!==null&&L!==void 0?L:"",n),r(0,n.parent=a.find(V=>V.id===y.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(6,u=!1);let Y=hA();r(1,_=Y.format("YYYY-MM-DDTHH:mm")),r(2,E=Y.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(12,w=Y.format("YYYY-MM-DD")),n.start.date&&r(12,w=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,_=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,E=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else if(l){let Y=hA();r(1,_=Y.format("YYYY-MM-DDTHH:mm")),r(2,E=Y.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(12,w=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,_=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,E=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(12,w=window.moment().format("YYYY-MM-DD"))}));let D=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",O=Ce=>{Ce.target instanceof HTMLTextAreaElement&&r(0,n.description=Ce.target.value,n)},ee=Ce=>{let A=Ce.target;if(A instanceof HTMLSelectElement){let B=A.value;r(0,n.parent.id=B,n)}},G=()=>Sr(void 0,void 0,void 0,function*(){if(u){let A=I.map(V=>{if(V[1])return V[0]});A=A.filter(V=>V!==void 0);let B=new vo,L={freq:f,interval:d};h==="For"?L.count=g:h==="Until"&&(L.until=new Date(m)),f===Le.WEEKLY&&A.length&&(L.byweekday=A);let Y=new Le(L);B.rrule(Y),r(0,n.recurrence=B.valueOf(),n)}(yield bh(R(n))).id&&i()}),U=Ce=>Sr(void 0,void 0,void 0,function*(){let A=!1;n.recurringEventId?A=yield Eh(n,!0):A=yield Eh(n),A&&i()}),le=()=>Sr(void 0,void 0,void 0,function*(){(yield Eh(R(n)))&&i()}),se=()=>Sr(void 0,void 0,void 0,function*(){let Ce=R(n),A;Ce.recurringEventId?A=yield Ch(Ce,!0):A=yield Ch(Ce),A.id&&i()}),_e=()=>Sr(void 0,void 0,void 0,function*(){(yield Ch(R(n))).id&&i()}),Oe=()=>Sr(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(b),i()}),Re=()=>Sr(void 0,void 0,void 0,function*(){new Eo(n,Ce=>r(13,b=Ce)).open()}),Se=()=>{window.open(n.htmlLink)};function Ee(){n.summary=this.value,r(0,n)}function ve(){l=this.checked,r(5,l)}function Je(){w=this.value,r(12,w)}function Ke(){_=this.value,r(1,_)}function Et(){E=this.value,r(2,E),r(1,_)}function yt(){u=this.checked,r(6,u)}function Ze(){d=rc(this.value),r(8,d)}function fe(){f=Bl(this),r(7,f)}function vt(){h=Bl(this),r(9,h)}function it(){m=this.value,r(11,m)}function Ct(){g=rc(this.value),r(10,g)}let tt=(Ce,A,B)=>{r(14,A[B][1]=!Ce[1],I)};return t.$$set=Ce=>{"event"in Ce&&r(0,n=Ce.event),"closeFunction"in Ce&&r(26,i=Ce.closeFunction)},t.$$.update=()=>{if(t.$$.dirty[0]&6){e:{let Ce=window.moment(_);window.moment(E).isBefore(Ce)&&r(2,E=Ce.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,_,E,a,s,l,u,f,d,h,g,m,w,b,I,D,O,ee,G,U,le,se,_e,Oe,Re,Se,i,Ee,ve,Je,Ke,Et,yt,Ze,fe,vt,it,Ct,tt]}var pA=class extends bn{constructor(e){super();Ln(this,e,i9,n9,Dn,{event:0,closeFunction:26},jq,[-1,-1])}},gA=pA;var vi=class extends mA.Modal{constructor(e,r){super(pt.getInstance().app);this.selectedEvent=e,r&&(this.closeFunction=r)}onOpen(){return M(this,null,function*(){let{contentEl:e}=this;new gA({target:e,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:e}=this;e.empty()}};var MA=xt(cy());var Nh=xt(cy()),LA=xt(ms()),Bh={},T9=new Event("dailyNoteUpdate",{bubbles:!0,cancelable:!1,composed:!1}),wc=t=>M(void 0,null,function*(){if(app.workspace.layoutReady&&t.settings.activateDailyNoteAddon){let e={};try{e=(0,Nh.getAllDailyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}LA.default.isEqual(Bh,e)==!1&&(Bh=e),document.dispatchEvent(T9)}}),Dh=()=>Bh,Ec=t=>(0,Nh.getDailyNote)(t,Bh);var Mi=class extends PA.FuzzySuggestModal{constructor(e,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=pt.getInstance();this.eventList=[...e],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>M(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new vi({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield hr({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(e){return e.id=="xxx"?Ec(this.currentDate)?"Open daily note":"Create daily note":e.start.date?`${e.start.date}		 | ${e.summary}	`:`${window.moment(e.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${e.summary}	`}onChooseItem(e){return M(this,null,function*(){if(e.id=="xxx"){let r=Ec(this.currentDate);r||(r=yield(0,MA.createDailyNote)(this.currentDate)),app.workspace.getLeaf(!0).openFile(r);return}this.modalSelectMode=="details"?(this.open(),new vi(e,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?wo(e,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new Eo(e,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var Oh=class extends UA.FuzzySuggestModal{constructor(e){super(pt.getInstance().app);this.calendarList=e,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return M(this,null,function*(){let r=yield hr({include:[e.id]});new Mi(r,"details").open()})}};var ws;(function(i){i.web="web",i.month="month",i.day="day",i.schedule="schedule"})(ws||(ws={}));var Zh=xt(require("obsidian"));var HA=xt(VA());function Cc(t){return t.getHours()/24+t.getMinutes()/(60*24)}function KA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 0;let r=Cc(new Date(t.start.dateTime));return e*r}function jA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 25;let r=Cc(new Date(t.start.dateTime)),n=Cc(new Date(t.end.dateTime));return e*(n-r)}var Ph=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark";function D9(t){di(t,"svelte-10n616",'.event.svelte-10n616{display:flex;padding:10px;padding-top:0;position:absolute;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-10n616::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourText.svelte-10n616{display:block;font-family:"consolas"}.timeline.svelte-10n616,.hourText.svelte-10n616,.hourTextContainer.svelte-10n616{overflow:hidden}.timeDisplay.svelte-10n616{position:absolute;height:3px;background:red;overflow:visible}.timeline.svelte-10n616{position:relative;display:flex;flex-direction:row;overflow:visible}')}function YA(t,e,r){let n=t.slice();return n[15]=e[r],n[17]=r,n}function WA(t,e,r){let n=t.slice();return n[18]=e[r],n[17]=r,n}function zA(t,e,r){let n=t.slice();return n[18]=e[r],n[17]=r,n}function O9(t){let e,r,n,i,a=`-${t[1]/52}px`,s,l=window.moment().isSame(t[0],"day"),u,f=`${t[1]}px`,d=`${t[2]}px`,h={length:24},g=[];for(let b=0;b<h.length;b+=1)g[b]=QA(zA(t,h,b));let m={length:24},y=[];for(let b=0;b<m.length;b+=1)y[b]=XA(WA(t,m,b));let _=l&&JA(t),E=t[5],w=[];for(let b=0;b<E.length;b+=1)w[b]=ZA(YA(t,E,b));return{c(){e=ae("div"),r=ae("div");for(let b=0;b<g.length;b+=1)g[b].c();n=De(),i=ae("div");for(let b=0;b<y.length;b+=1)y[b].c();s=De(),_&&_.c(),u=De();for(let b=0;b<w.length;b+=1)w[b].c();te(r,"class","hourLineContainer"),te(i,"class","hourTextContainer svelte-10n616"),et(i,"margin-top",a,!1),te(e,"class","timeline svelte-10n616"),et(e,"height",f,!1),et(e,"width",d,!1)},m(b,I){xe(b,e,I),re(e,r);for(let R=0;R<g.length;R+=1)g[R].m(r,null);re(e,n),re(e,i);for(let R=0;R<y.length;R+=1)y[R].m(i,null);re(e,s),_&&_.m(e,null),re(e,u);for(let R=0;R<w.length;R+=1)w[R].m(e,null)},p(b,I){if(I&2){h={length:24};let R;for(R=0;R<h.length;R+=1){let D=zA(b,h,R);g[R]?g[R].p(D,I):(g[R]=QA(D),g[R].c(),g[R].m(r,null))}for(;R<g.length;R+=1)g[R].d(1);g.length=h.length}if(I&2){m={length:24};let R;for(R=0;R<m.length;R+=1){let D=WA(b,m,R);y[R]?y[R].p(D,I):(y[R]=XA(D),y[R].c(),y[R].m(i,null))}for(;R<y.length;R+=1)y[R].d(1);y.length=m.length}if(I&2&&a!==(a=`-${b[1]/52}px`)&&et(i,"margin-top",a,!1),I&1&&(l=window.moment().isSame(b[0],"day")),l?_?_.p(b,I):(_=JA(b),_.c(),_.m(e,u)):_&&(_.d(1),_=null),I&96){E=b[5];let R;for(R=0;R<E.length;R+=1){let D=YA(b,E,R);w[R]?w[R].p(D,I):(w[R]=ZA(D),w[R].c(),w[R].m(e,null))}for(;R<w.length;R+=1)w[R].d(1);w.length=E.length}I&2&&f!==(f=`${b[1]}px`)&&et(e,"height",f,!1),I&4&&d!==(d=`${b[2]}px`)&&et(e,"width",d,!1)},d(b){b&&be(e),un(g,b),un(y,b),_&&_.d(),un(w,b)}}}function L9(t){let e;return{c(){e=ae("p"),e.textContent="Loading"},m(r,n){xe(r,e,n)},p:kt,d(r){r&&be(e)}}}function QA(t){let e,r=`${t[1]/24}px`;return{c(){e=ae("div"),te(e,"class","hourLine svelte-10n616"),et(e,"height",r,!1)},m(n,i){xe(n,e,i)},p(n,i){i&2&&r!==(r=`${n[1]/24}px`)&&et(e,"height",r,!1)},d(n){n&&be(e)}}}function XA(t){let e,r,n=`${t[1]/24}px`,i=`${t[1]/50}px`;return{c(){e=ae("span"),r=ar(t[17]),te(e,"class","hourText svelte-10n616"),et(e,"height",n,!1),et(e,"font-size",i,!1)},m(a,s){xe(a,e,s),re(e,r)},p(a,s){s&2&&n!==(n=`${a[1]/24}px`)&&et(e,"height",n,!1),s&2&&i!==(i=`${a[1]/50}px`)&&et(e,"font-size",i,!1)},d(a){a&&be(e)}}}function JA(t){let e,r=`${t[4]}px`,n=`${t[2]}px`;return{c(){e=ae("div"),te(e,"class","timeDisplay svelte-10n616"),et(e,"top",r,!1),et(e,"width",n,!1)},m(i,a){xe(i,e,a)},p(i,a){a&16&&r!==(r=`${i[4]}px`)&&et(e,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&et(e,"width",n,!1)},d(i){i&&be(e)}}}function ZA(t){let e,r=t[15].event.summary+"",n,i,a=`${t[15].y}px`,s=`${t[15].x}px`,l=`${t[15].width}px`,u=`${t[15].height}px`,f,d;function h(...g){return t[10](t[15],...g)}return{c(){e=ae("div"),n=ar(r),te(e,"class","event svelte-10n616"),te(e,"id",i=t[15].event.id),et(e,"top",a,!1),et(e,"left",s,!1),et(e,"width",l,!1),et(e,"height",u,!1),et(e,"background",ju(t[15].event),!1)},m(g,m){xe(g,e,m),re(e,n),f||(d=$e(e,"click",h),f=!0)},p(g,m){t=g,m&32&&r!==(r=t[15].event.summary+"")&&pi(n,r),m&32&&i!==(i=t[15].event.id)&&te(e,"id",i),m&32&&a!==(a=`${t[15].y}px`)&&et(e,"top",a,!1),m&32&&s!==(s=`${t[15].x}px`)&&et(e,"left",s,!1),m&32&&l!==(l=`${t[15].width}px`)&&et(e,"width",l,!1),m&32&&u!==(u=`${t[15].height}px`)&&et(e,"height",u,!1),m&32&&et(e,"background",ju(t[15].event),!1)},d(g){g&&be(e),f=!1,d()}}}function P9(t){let e;function r(a,s){return a[3]?L9:O9}let n=r(t,-1),i=n(t);return{c(){i.c(),e=hi()},m(a,s){i.m(a,s),xe(a,e,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:kt,o:kt,d(a){i.d(a),a&&be(e)}}}function M9(t,e,r){let{height:n=700}=e,{width:i=300}=e,{date:a=window.moment()}=e,{include:s}=e,{exclude:l}=e,u=!0,f=0,d=[],h=[],g,m=()=>Sr(void 0,void 0,void 0,function*(){yield _();let b=Cc(new Date);r(4,f=Math.floor(n*b))}),y=()=>{let b=new HA.default;d.forEach(D=>{let O=D.start.date||D.start.dateTime;b.has(O)?b.get(O).push(D):b.set(O,[D])});let I=0,R=null;for(let D of b.values()){if(D[0].start.dateTime){let O=window.moment(D[0].start.dateTime);R&&O.isBefore(R,"minutes")?I++:I=0,R=window.moment(D[0].end.dateTime)}D.forEach((O,ee)=>{let G=30+I*10,U=(i-G)/D.length;r(5,h=[...h,{event:O,x:G+U*ee,y:KA(O,n),width:U,height:jA(O,n),fullDay:O.start.date!=null}])})}},_=()=>Sr(void 0,void 0,void 0,function*(){if(!a.isValid())return;let b=yield hr({startDate:a,include:s,exclude:l});JSON.stringify(b)!=JSON.stringify(d)&&(d=b,r(5,h=[]),y()),r(3,u=!1)}),E=(b,I)=>{I.shiftKey?window.open(b.htmlLink):new vi(b,()=>{Oi(),r(0,a),r(9,g)}).open()};co(()=>{clearInterval(g)});let w=(b,I)=>E(b.event,I);return t.$$set=b=>{"height"in b&&r(1,n=b.height),"width"in b&&r(2,i=b.width),"date"in b&&r(0,a=b.date),"include"in b&&r(7,s=b.include),"exclude"in b&&r(8,l=b.exclude)},t.$$.update=()=>{if(t.$$.dirty&513){e:r(0,a),r(9,g),g&&clearInterval(g),r(3,u=!0),r(9,g=setInterval(m,5e3)),m()}},[a,n,i,u,f,h,E,s,l,g,w]}var $A=class extends bn{constructor(e){super();Ln(this,e,M9,P9,Dn,{height:1,width:2,date:0,include:7,exclude:8},D9)}},e2=$A;function U9(t){di(t,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function t2(t){let e,r,n,i,a,s=t[0].format("YYYY-MM-DD")+"",l,u,f,d,h,g,m,y,_,E,w,b,I,R;return{c(){e=ae("div"),r=ae("button"),r.textContent="+",n=De(),i=ae("h3"),a=ar("Google Calendar "),l=ar(s),u=De(),f=ae("div"),d=ae("button"),d.textContent="<<",h=De(),g=ae("button"),g.textContent="<",m=De(),y=ae("button"),y.textContent="Today",_=De(),E=ae("button"),E.textContent=">",w=De(),b=ae("button"),b.textContent=">>",te(r,"aria-label","Create Event"),te(e,"class","titleContainer svelte-169s007"),te(d,"class","fixedSizeButton svelte-169s007"),te(d,"aria-label","Back 1 week"),te(g,"class","fixedSizeButton svelte-169s007"),te(g,"aria-label","Back 1 day"),te(y,"class","fixedSizeButton svelte-169s007"),te(y,"aria-label","Jump to today"),te(E,"class","fixedSizeButton svelte-169s007"),te(E,"aria-label","Forward 1 day"),te(b,"class","fixedSizeButton svelte-169s007"),te(b,"aria-label","Forward 1 week"),te(f,"class","navigationContainer svelte-169s007")},m(D,O){xe(D,e,O),re(e,r),re(e,n),re(e,i),re(i,a),re(i,l),xe(D,u,O),xe(D,f,O),re(f,d),re(f,h),re(f,g),re(f,m),re(f,y),re(f,_),re(f,E),re(f,w),re(f,b),I||(R=[$e(r,"click",t[11]),$e(d,"click",t[6]),$e(g,"click",t[7]),$e(y,"click",t[8]),$e(E,"click",t[10]),$e(b,"click",t[9])],I=!0)},p(D,O){O&1&&s!==(s=D[0].format("YYYY-MM-DD")+"")&&pi(l,s)},d(D){D&&be(e),D&&be(u),D&&be(f),I=!1,rn(R)}}}function F9(t){let e,r,n,i,a,s=t[3]&&t[0]&&t2(t);function l(f){t[13](f)}let u={height:t[1],width:t[2],include:t[4],exclude:t[5]};return t[0]!==void 0&&(u.date=t[0]),n=new e2({props:u}),On.push(()=>La(n,"date",l)),{c(){e=ae("div"),s&&s.c(),r=De(),sc(n.$$.fragment),et(e,"padding-left","10px")},m(f,d){xe(f,e,d),s&&s.m(e,null),re(e,r),Dl(n,e,null),a=!0},p(f,[d]){f[3]&&f[0]?s?s.p(f,d):(s=t2(f),s.c(),s.m(e,r)):s&&(s.d(1),s=null);let h={};d&2&&(h.height=f[1]),d&4&&(h.width=f[2]),d&16&&(h.include=f[4]),d&32&&(h.exclude=f[5]),!i&&d&1&&(i=!0,h.date=f[0],Oa(()=>i=!1)),n.$set(h)},i(f){a||(gi(n.$$.fragment,f),a=!0)},o(f){Li(n.$$.fragment,f),a=!1},d(f){f&&be(e),s&&s.d(),ho(n)}}}function q9(t,e,r){let{height:n=void 0}=e,{width:i=void 0}=e,{date:a=void 0}=e,{navigation:s=!1}=e,{include:l}=e,{exclude:u}=e,f=0,d=()=>r(12,f-=7),h=()=>r(12,f-=1),g=()=>r(12,f=0),m=()=>r(12,f+=7),y=()=>r(12,f+=1),_=w=>{new vi({start:{},end:{}},()=>{Oi(),r(0,a),r(3,s),r(12,f)}).open()};function E(w){a=w,r(0,a),r(3,s),r(12,f)}return t.$$set=w=>{"height"in w&&r(1,n=w.height),"width"in w&&r(2,i=w.width),"date"in w&&r(0,a=w.date),"navigation"in w&&r(3,s=w.navigation),"include"in w&&r(4,l=w.include),"exclude"in w&&r(5,u=w.exclude)},t.$$.update=()=>{if(t.$$.dirty&4105){e:r(0,a=s?window.moment().local().add(f,"days"):a)}},[a,n,i,s,l,u,d,h,g,m,y,_,f,E]}var r2=class extends bn{constructor(e){super();Ln(this,e,q9,F9,Dn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5},U9)}},Mh=r2;function G9(t){di(t,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function V9(t){let e,r,n=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=ae("webview"),tc(e.src,r=t[3])||te(e,"src",r),te(e,"allowpopups",""),et(e,"width",n,!1),et(e,"height",i,!1)},m(a,s){xe(a,e,s),t[7](e)},p(a,s){s&8&&!tc(e.src,r=a[3])&&te(e,"src",r),s&1&&n!==(n=`${a[0]}px`)&&et(e,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&et(e,"height",i,!1)},d(a){a&&be(e),t[7](null)}}}function K9(t){let e,r;return{c(){e=ae("webview"),tc(e.src,r=t[3])||te(e,"src",r),te(e,"allowpopups",""),te(e,"class","fullSize svelte-1ficnkj")},m(n,i){xe(n,e,i),t[6](e)},p(n,i){i&8&&!tc(e.src,r=n[3])&&te(e,"src",r)},d(n){n&&be(e),t[6](null)}}}function j9(t){let e,r;function n(s,l){return s[0]==0?K9:V9}let i=n(t,-1),a=i(t);return{c(){e=ae("div"),r=ae("div"),a.c(),te(r,"class","content svelte-1ficnkj"),te(e,"class","box svelte-1ficnkj")},m(s,l){xe(s,e,l),re(e,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:kt,o:kt,d(s){s&&be(e),a.d()}}}function H9(t,e,r){let n=pt.getInstance(),{date:i=window.moment()}=e,{width:a=0}=e,{height:s=0}=e,{theme:l=n.settings.webViewDefaultColorMode}=e,u,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",uo(()=>{l=="auto"&&r(4,l=Ph()),l=="dark"&&u.addEventListener("dom-ready",()=>{u.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){On[g?"unshift":"push"](()=>{u=g,r(2,u)})}function h(g){On[g?"unshift":"push"](()=>{u=g,r(2,u)})}return t.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,u,f,l,i,d,h]}var n2=class extends bn{constructor(e){super();Ln(this,e,H9,j9,Dn,{date:5,width:0,height:1,theme:4},G9)}},Uh=n2;var o$=xt(require("obsidian"));function Wr(){}function bc(t,e){for(let r in e)t[r]=e[r];return t}function Y9(t){return t&&typeof t=="object"&&typeof t.then=="function"}function i2(t){return t()}function a2(){return Object.create(null)}function Cs(t){t.forEach(i2)}function oa(t){return typeof t=="function"}function dy(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Fh(t,e){return t!=t?e==e:t!==e}function W9(t){return Object.keys(t).length===0}function s2(t,e,r,n){if(t){let i=o2(t,e,r,n);return t[0](i)}}function o2(t,e,r,n){return t[1]&&n?bc(r.ctx.slice(),t[1](n(e))):r.ctx}function z9(t,e,r,n){if(t[2]&&n){let i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(e.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function l2(t,e,r,n,i,a,s){let l=z9(e,n,i,a);if(l){let u=o2(e,r,n,s);t.p(u,l)}}function Kl(t){return t==null?"":t}function mt(t,e){t.appendChild(e)}function zr(t,e,r){t.insertBefore(e,r||null)}function Pr(t){t.parentNode.removeChild(t)}function qh(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function Yt(t){return document.createElement(t)}function jl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function bo(t){return document.createTextNode(t)}function Wn(){return bo(" ")}function Gh(){return bo("")}function Ua(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ut(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function u2(t,e){let r=Object.getOwnPropertyDescriptors(t.__proto__);for(let n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:ut(t,n,e[n])}function Q9(t){return Array.from(t.childNodes)}function xc(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ar(t,e,r){t.classList[r?"add":"remove"](e)}var Vh;function bs(t){Vh=t}function X9(){if(!Vh)throw new Error("Function called outside component initialization");return Vh}var Sc=[],c2=[],Kh=[],f2=[],J9=Promise.resolve(),hy=!1;function Z9(){hy||(hy=!0,J9.then(yy))}function py(t){Kh.push(t)}var gy=!1,my=new Set;function yy(){if(!gy){gy=!0;do{for(let t=0;t<Sc.length;t+=1){let e=Sc[t];bs(e),$9(e.$$)}for(bs(null),Sc.length=0;c2.length;)c2.pop()();for(let t=0;t<Kh.length;t+=1){let e=Kh[t];my.has(e)||(my.add(e),e())}Kh.length=0}while(Sc.length);for(;f2.length;)f2.pop()();hy=!1,gy=!1,my.clear()}}function $9(t){if(t.fragment!==null){t.update(),Cs(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(py)}}var jh=new Set,xo;function So(){xo={r:0,c:[],p:xo}}function To(){xo.r||Cs(xo.c),xo=xo.p}function Jt(t,e){t&&t.i&&(jh.delete(t),t.i(e))}function pr(t,e,r,n){if(t&&t.o){if(jh.has(t))return;jh.add(t),xo.c.push(()=>{jh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function d2(t,e){let r=e.token={};function n(i,a,s,l){if(e.token!==r)return;e.resolved=l;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=l);let f=i&&(e.current=i)(u),d=!1;e.block&&(e.blocks?e.blocks.forEach((h,g)=>{g!==a&&h&&(So(),pr(h,1,1,()=>{e.blocks[g]===h&&(e.blocks[g]=null)}),To())}):e.block.d(1),f.c(),Jt(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[a]=f),d&&yy()}if(Y9(t)){let i=X9();if(t.then(a=>{bs(i),n(e.then,1,e.value,a),bs(null)},a=>{if(bs(i),n(e.catch,2,e.error,a),bs(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function h2(t,e){pr(t,1,1,()=>{e.delete(t.key)})}function p2(t,e,r,n,i,a,s,l,u,f,d,h){let g=t.length,m=a.length,y=g,_={};for(;y--;)_[t[y].key]=y;let E=[],w=new Map,b=new Map;for(y=m;y--;){let O=h(i,a,y),ee=r(O),G=s.get(ee);G?n&&G.p(O,e):(G=f(ee,O),G.c()),w.set(ee,E[y]=G),ee in _&&b.set(ee,Math.abs(y-_[ee]))}let I=new Set,R=new Set;function D(O){Jt(O,1),O.m(l,d),s.set(O.key,O),d=O.first,m--}for(;g&&m;){let O=E[m-1],ee=t[g-1],G=O.key,U=ee.key;O===ee?(d=O.first,g--,m--):w.has(U)?!s.has(G)||I.has(G)?D(O):R.has(U)?g--:b.get(G)>b.get(U)?(R.add(G),D(O)):(I.add(U),g--):(u(ee,s),g--)}for(;g--;){let O=t[g];w.has(O.key)||u(O,s)}for(;m;)D(E[m-1]);return E}function Hh(t,e){let r={},n={},i={$$scope:1},a=t.length;for(;a--;){let s=t[a],l=e[a];if(l){for(let u in s)u in l||(n[u]=1);for(let u in l)i[u]||(r[u]=l[u],i[u]=1);t[a]=l}else for(let u in s)i[u]=1}for(let s in n)s in r||(r[s]=void 0);return r}function vy(t){return typeof t=="object"&&t!==null?t:{}}function Fa(t){t&&t.c()}function la(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||py(()=>{let u=a.map(i2).filter(oa);s?s.push(...u):Cs(u),t.$$.on_mount=[]}),l.forEach(py)}function ua(t,e){let r=t.$$;r.fragment!==null&&(Cs(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function eG(t,e){t.$$.dirty[0]===-1&&(Sc.push(t),Z9(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ao(t,e,r,n,i,a,s=[-1]){let l=Vh;bs(t);let u=t.$$={fragment:null,ctx:null,props:a,update:Wr,not_equal:i,bound:a2(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:a2(),dirty:s,skip_bound:!1},f=!1;if(u.ctx=r?r(t,e.props||{},(d,h,...g)=>{let m=g.length?g[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),f&&eG(t,d)),h}):[],u.update(),f=!0,Cs(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){let d=Q9(e.target);u.fragment&&u.fragment.l(d),d.forEach(Pr)}else u.fragment&&u.fragment.c();e.intro&&Jt(t.$$.fragment),la(t,e.target,e.anchor,e.customElement),yy()}bs(l)}var xs=class{$destroy(){ua(this,1),this.$destroy=Wr}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!W9(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function tG(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}var Yh=tG;function rG(){var t=Yt("style");t.id="svelte-1widvzq-style",t.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",mt(document.head,t)}function nG(t){let e,r,n;return{c(){e=jl("svg"),r=jl("circle"),ut(r,"cx","3"),ut(r,"cy","3"),ut(r,"r","2"),ut(e,"class",n=""+(Kl(`hollow ${t[0]}`)+" svelte-1widvzq")),ut(e,"viewBox","0 0 6 6"),ut(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){zr(i,e,a),mt(e,r)},p(i,a){a&1&&n!==(n=""+(Kl(`hollow ${i[0]}`)+" svelte-1widvzq"))&&ut(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Pr(e)}}}function iG(t){let e,r,n;return{c(){e=jl("svg"),r=jl("circle"),ut(r,"cx","3"),ut(r,"cy","3"),ut(r,"r","2"),ut(e,"class",n=""+(Kl(`dot filled ${t[0]}`)+" svelte-1widvzq")),ut(e,"viewBox","0 0 6 6"),ut(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){zr(i,e,a),mt(e,r)},p(i,a){a&1&&n!==(n=""+(Kl(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&ut(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Pr(e)}}}function aG(t){let e;function r(a,s){return a[1]?iG:nG}let n=r(t),i=n(t);return{c(){i.c(),e=Gh()},m(a,s){i.m(a,s),zr(a,e,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Wr,o:Wr,d(a){i.d(a),a&&Pr(e)}}}function sG(t,e,r){let{className:n=""}=e,{isFilled:i}=e,{isActive:a}=e;return t.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var _y=class extends xs{constructor(e){super();document.getElementById("svelte-1widvzq-style")||rG(),Ao(this,e,sG,aG,dy,{className:0,isFilled:1,isActive:2})}},oG=t=>({}),g2=t=>({metadata:null}),lG=t=>({metadata:t&1}),m2=t=>({metadata:t[3]});function uG(t){let e,r=t[2].default,n=s2(r,t,t[1],g2);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&2&&l2(n,r,i,i[1],a,oG,g2)},i(i){e||(Jt(n,i),e=!0)},o(i){pr(n,i),e=!1},d(i){n&&n.d(i)}}}function cG(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:hG,then:dG,catch:fG,value:3,blocks:[,,,]};return d2(r=t[0],i),{c(){e=Gh(),i.block.c()},m(a,s){zr(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){if(t=a,i.ctx=t,!(s&1&&r!==(r=t[0])&&d2(r,i))){let l=t.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Jt(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];pr(l)}n=!1},d(a){a&&Pr(e),i.block.d(a),i.token=null,i=null}}}function fG(t){return{c:Wr,m:Wr,p:Wr,i:Wr,o:Wr,d:Wr}}function dG(t){let e,r=t[2].default,n=s2(r,t,t[1],m2);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&3&&l2(n,r,i,i[1],a,lG,m2)},i(i){e||(Jt(n,i),e=!0)},o(i){pr(n,i),e=!1},d(i){n&&n.d(i)}}}function hG(t){return{c:Wr,m:Wr,p:Wr,i:Wr,o:Wr,d:Wr}}function pG(t){let e,r,n,i,a=[cG,uG],s=[];function l(u,f){return u[0]?0:1}return e=l(t),r=s[e]=a[e](t),{c(){r.c(),n=Gh()},m(u,f){s[e].m(u,f),zr(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u),e===d?s[e].p(u,f):(So(),pr(s[d],1,1,()=>{s[d]=null}),To(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),Jt(r,1),r.m(n.parentNode,n))},i(u){i||(Jt(r),i=!0)},o(u){pr(r),i=!1},d(u){s[e].d(u),u&&Pr(n)}}}function gG(t,e,r){let{$$slots:n={},$$scope:i}=e,{metadata:a}=e;return t.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var wy=class extends xs{constructor(e){super();Ao(this,e,gG,pG,Fh,{metadata:0})}};function mG(){return navigator.appVersion.indexOf("Mac")!==-1}function Wh(t){return mG()?t.metaKey:t.ctrlKey}function yG(...t){return window.moment.weekdaysShort(!0)}function y2(t){return t.isoWeekday()===6||t.isoWeekday()===7}function vG(t){return t[0].weekday(0)}function _G(t,...e){let r=window.moment().locale(),n=[],i,a=t.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let u=0;u<42;u++)u%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function wG(){var t=Yt("style");t.id="svelte-q3wqg9-style",t.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",mt(document.head,t)}function v2(t,e,r){let n=t.slice();return n[11]=e[r],n}function _2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=bc(i,n[a]);return e=new _y({props:i}),{c(){Fa(e.$$.fragment)},m(a,s){la(e,a,s),r=!0},p(a,s){let l=s&128?Hh(n,[vy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){pr(e.$$.fragment,a),r=!1},d(a){ua(e,a)}}}function EG(t){let e,r=t[0].format("D")+"",n,i,a,s,l,u,f,d=t[7].dots,h=[];for(let _=0;_<d.length;_+=1)h[_]=_2(v2(t,d,_));let g=_=>pr(h[_],1,1,()=>{h[_]=null}),m=[{class:s=`day ${t[7].classes.join(" ")}`},t[7].dataAttributes||{}],y={};for(let _=0;_<m.length;_+=1)y=bc(y,m[_]);return{c(){e=Yt("div"),n=bo(r),i=Wn(),a=Yt("div");for(let _=0;_<h.length;_+=1)h[_].c();ut(a,"class","dot-container svelte-q3wqg9"),u2(e,y),Ar(e,"active",t[6]===Yh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},m(_,E){zr(_,e,E),mt(e,n),mt(e,i),mt(e,a);for(let w=0;w<h.length;w+=1)h[w].m(a,null);l=!0,u||(f=[Ua(e,"click",function(){oa(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),Ua(e,"contextmenu",function(){oa(t[3]&&t[9])&&(t[3]&&t[9]).apply(this,arguments)}),Ua(e,"pointerover",function(){oa(t[1]&&t[10])&&(t[1]&&t[10]).apply(this,arguments)})],u=!0)},p(_,E){if(t=_,(!l||E&1)&&r!==(r=t[0].format("D")+"")&&xc(n,r),E&128){d=t[7].dots;let w;for(w=0;w<d.length;w+=1){let b=v2(t,d,w);h[w]?(h[w].p(b,E),Jt(h[w],1)):(h[w]=_2(b),h[w].c(),Jt(h[w],1),h[w].m(a,null))}for(So(),w=d.length;w<h.length;w+=1)g(w);To()}u2(e,y=Hh(m,[(!l||E&128&&s!==(s=`day ${t[7].classes.join(" ")}`))&&{class:s},E&128&&(t[7].dataAttributes||{})])),Ar(e,"active",t[6]===Yh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},i(_){if(!l){for(let E=0;E<d.length;E+=1)Jt(h[E]);l=!0}},o(_){h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)pr(h[E]);l=!1},d(_){_&&Pr(e),qh(h,_),u=!1,Cs(f)}}}function CG(t){let e,r,n;return r=new wy({props:{metadata:t[7],$$slots:{default:[EG,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:t}}}),{c(){e=Yt("td"),Fa(r.$$.fragment)},m(i,a){zr(i,e,a),la(r,e,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){pr(r.$$.fragment,i),n=!1},d(i){i&&Pr(e),ua(r)}}}function bG(t,e,r){let{date:n}=e,{metadata:i}=e,{onHover:a}=e,{onClick:s}=e,{onContextMenu:l}=e,{today:u}=e,{displayedMonth:f=null}=e,{selectedId:d=null}=e,h=y=>s(n,Wh(y)),g=y=>l(n,y),m=y=>a(n,y.target,Wh(y));return t.$$set=y=>{"date"in y&&r(0,n=y.date),"metadata"in y&&r(7,i=y.metadata),"onHover"in y&&r(1,a=y.onHover),"onClick"in y&&r(2,s=y.onClick),"onContextMenu"in y&&r(3,l=y.onContextMenu),"today"in y&&r(4,u=y.today),"displayedMonth"in y&&r(5,f=y.displayedMonth),"selectedId"in y&&r(6,d=y.selectedId)},[n,a,s,l,u,f,d,i,h,g,m]}var w2=class extends xs{constructor(e){super();document.getElementById("svelte-q3wqg9-style")||wG(),Ao(this,e,bG,CG,Fh,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function xG(){var t=Yt("style");t.id="svelte-156w7na-style",t.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",mt(document.head,t)}function SG(t){let e,r,n,i,a;return{c(){e=Yt("div"),r=jl("svg"),n=jl("path"),ut(n,"fill","currentColor"),ut(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),ut(r,"focusable","false"),ut(r,"role","img"),ut(r,"xmlns","http://www.w3.org/2000/svg"),ut(r,"viewBox","0 0 320 512"),ut(r,"class","svelte-156w7na"),ut(e,"class","arrow svelte-156w7na"),ut(e,"aria-label",t[1]),Ar(e,"is-mobile",t[3]),Ar(e,"right",t[2]==="right")},m(s,l){zr(s,e,l),mt(e,r),mt(r,n),i||(a=Ua(e,"click",function(){oa(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s,l&2&&ut(e,"aria-label",t[1]),l&4&&Ar(e,"right",t[2]==="right")},i:Wr,o:Wr,d(s){s&&Pr(e),i=!1,a()}}}function TG(t,e,r){let{onClick:n}=e,{tooltip:i}=e,{direction:a}=e,s=window.app.isMobile;return t.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var Ey=class extends xs{constructor(e){super();document.getElementById("svelte-156w7na-style")||xG(),Ao(this,e,TG,SG,dy,{onClick:0,tooltip:1,direction:2})}};function AG(){var t=Yt("style");t.id="svelte-1vwr9dd-style",t.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",mt(document.head,t)}function kG(t){let e,r,n,i=t[0].format("MMM")+"",a,s,l,u=t[0].format("YYYY")+"",f,d,h,g,m,y,_,E,w,b,I;return g=new Ey({props:{direction:"left",onClick:t[3],tooltip:"Previous Month"}}),E=new Ey({props:{direction:"right",onClick:t[2],tooltip:"Next Month"}}),{c(){e=Yt("div"),r=Yt("h3"),n=Yt("span"),a=bo(i),s=Wn(),l=Yt("span"),f=bo(u),d=Wn(),h=Yt("div"),Fa(g.$$.fragment),m=Wn(),y=Yt("div"),y.textContent=`${t[4]}`,_=Wn(),Fa(E.$$.fragment),ut(n,"class","month svelte-1vwr9dd"),ut(l,"class","year svelte-1vwr9dd"),ut(r,"class","title svelte-1vwr9dd"),ut(y,"class","reset-button svelte-1vwr9dd"),ut(h,"class","right-nav svelte-1vwr9dd"),ut(e,"class","nav svelte-1vwr9dd"),Ar(e,"is-mobile",t[5])},m(R,D){zr(R,e,D),mt(e,r),mt(r,n),mt(n,a),mt(r,s),mt(r,l),mt(l,f),mt(e,d),mt(e,h),la(g,h,null),mt(h,m),mt(h,y),mt(h,_),la(E,h,null),w=!0,b||(I=[Ua(r,"click",function(){oa(t[1])&&t[1].apply(this,arguments)}),Ua(y,"click",function(){oa(t[1])&&t[1].apply(this,arguments)})],b=!0)},p(R,[D]){t=R,(!w||D&1)&&i!==(i=t[0].format("MMM")+"")&&xc(a,i),(!w||D&1)&&u!==(u=t[0].format("YYYY")+"")&&xc(f,u);let O={};D&8&&(O.onClick=t[3]),g.$set(O);let ee={};D&4&&(ee.onClick=t[2]),E.$set(ee)},i(R){w||(Jt(g.$$.fragment,R),Jt(E.$$.fragment,R),w=!0)},o(R){pr(g.$$.fragment,R),pr(E.$$.fragment,R),w=!1},d(R){R&&Pr(e),ua(g),ua(E),b=!1,Cs(I)}}}function IG(t,e,r){let{displayedMonth:n}=e,{today:i}=e,{resetDisplayedMonth:a}=e,{incrementDisplayedMonth:s}=e,{decrementDisplayedMonth:l}=e,u=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return t.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,u,f,i]}var E2=class extends xs{constructor(e){super();document.getElementById("svelte-1vwr9dd-style")||AG(),Ao(this,e,IG,kG,dy,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function RG(){var t=Yt("style");t.id="svelte-egt0yd-style",t.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",mt(document.head,t)}function C2(t,e,r){let n=t.slice();return n[11]=e[r],n}function b2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=bc(i,n[a]);return e=new _y({props:i}),{c(){Fa(e.$$.fragment)},m(a,s){la(e,a,s),r=!0},p(a,s){let l=s&64?Hh(n,[vy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){pr(e.$$.fragment,a),r=!1},d(a){ua(e,a)}}}function NG(t){let e,r,n,i,a,s,l,u,f=t[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=b2(C2(t,f,g));let h=g=>pr(d[g],1,1,()=>{d[g]=null});return{c(){e=Yt("div"),r=bo(t[0]),n=Wn(),i=Yt("div");for(let g=0;g<d.length;g+=1)d[g].c();ut(i,"class","dot-container svelte-egt0yd"),ut(e,"class",a=""+(Kl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")),Ar(e,"active",t[5]===Yh(t[1][0],"week"))},m(g,m){zr(g,e,m),mt(e,r),mt(e,n),mt(e,i);for(let y=0;y<d.length;y+=1)d[y].m(i,null);s=!0,l||(u=[Ua(e,"click",function(){oa(t[3]&&t[8])&&(t[3]&&t[8]).apply(this,arguments)}),Ua(e,"contextmenu",function(){oa(t[4]&&t[9])&&(t[4]&&t[9]).apply(this,arguments)}),Ua(e,"pointerover",function(){oa(t[2]&&t[10])&&(t[2]&&t[10]).apply(this,arguments)})],l=!0)},p(g,m){if(t=g,(!s||m&1)&&xc(r,t[0]),m&64){f=t[6].dots;let y;for(y=0;y<f.length;y+=1){let _=C2(t,f,y);d[y]?(d[y].p(_,m),Jt(d[y],1)):(d[y]=b2(_),d[y].c(),Jt(d[y],1),d[y].m(i,null))}for(So(),y=f.length;y<d.length;y+=1)h(y);To()}(!s||m&64&&a!==(a=""+(Kl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")))&&ut(e,"class",a),m&98&&Ar(e,"active",t[5]===Yh(t[1][0],"week"))},i(g){if(!s){for(let m=0;m<f.length;m+=1)Jt(d[m]);s=!0}},o(g){d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)pr(d[m]);s=!1},d(g){g&&Pr(e),qh(d,g),l=!1,Cs(u)}}}function BG(t){let e,r,n;return r=new wy({props:{metadata:t[6],$$slots:{default:[NG,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:t}}}),{c(){e=Yt("td"),Fa(r.$$.fragment),ut(e,"class","svelte-egt0yd")},m(i,a){zr(i,e,a),la(r,e,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){pr(r.$$.fragment,i),n=!1},d(i){i&&Pr(e),ua(r)}}}function DG(t,e,r){let{weekNum:n}=e,{days:i}=e,{metadata:a}=e,{onHover:s}=e,{onClick:l}=e,{onContextMenu:u}=e,{selectedId:f=null}=e,d,h=y=>l(d,Wh(y)),g=y=>u(i[0],y),m=y=>s(d,y.target,Wh(y));return t.$$set=y=>{"weekNum"in y&&r(0,n=y.weekNum),"days"in y&&r(1,i=y.days),"metadata"in y&&r(6,a=y.metadata),"onHover"in y&&r(2,s=y.onHover),"onClick"in y&&r(3,l=y.onClick),"onContextMenu"in y&&r(4,u=y.onContextMenu),"selectedId"in y&&r(5,f=y.selectedId)},t.$$.update=()=>{t.$$.dirty&2&&r(7,d=vG(i))},[n,i,s,l,u,f,a,d,h,g,m]}var x2=class extends xs{constructor(e){super();document.getElementById("svelte-egt0yd-style")||RG(),Ao(this,e,DG,BG,Fh,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function S2(t){return M(this,null,function*(){let e={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(t)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),e)})}function T2(t,e,...r){return S2(t.map(n=>n.getDailyMetadata(e)))}function A2(t,e,...r){return S2(t.map(n=>n.getWeeklyMetadata(e)))}function OG(){var t=Yt("style");t.id="svelte-pcimu8-style",t.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",mt(document.head,t)}function k2(t,e,r){let n=t.slice();return n[18]=e[r],n}function I2(t,e,r){let n=t.slice();return n[21]=e[r],n}function R2(t,e,r){let n=t.slice();return n[24]=e[r],n}function N2(t,e,r){let n=t.slice();return n[27]=e[r],n}function B2(t){let e;return{c(){e=Yt("col")},m(r,n){zr(r,e,n)},d(r){r&&Pr(e)}}}function D2(t){let e;return{c(){e=Yt("col"),ut(e,"class","svelte-pcimu8"),Ar(e,"weekend",y2(t[27]))},m(r,n){zr(r,e,n)},p(r,n){n&16384&&Ar(e,"weekend",y2(r[27]))},d(r){r&&Pr(e)}}}function O2(t){let e;return{c(){e=Yt("th"),e.textContent="W",ut(e,"class","svelte-pcimu8")},m(r,n){zr(r,e,n)},d(r){r&&Pr(e)}}}function L2(t){let e,r=t[24]+"",n;return{c(){e=Yt("th"),n=bo(r),ut(e,"class","svelte-pcimu8")},m(i,a){zr(i,e,a),mt(e,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&xc(n,r)},d(i){i&&Pr(e)}}}function P2(t){let e,r,n=[t[18],{metadata:A2(t[8],t[18].days[0],t[10])},{onClick:t[7]},{onContextMenu:t[5]},{onHover:t[3]},{selectedId:t[9]}],i={};for(let a=0;a<n.length;a+=1)i=bc(i,n[a]);return e=new x2({props:i}),{c(){Fa(e.$$.fragment)},m(a,s){la(e,a,s),r=!0},p(a,s){let l=s&18344?Hh(n,[s&16384&&vy(a[18]),s&17664&&{metadata:A2(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){pr(e.$$.fragment,a),r=!1},d(a){ua(e,a)}}}function M2(t,e){let r,n,i;return n=new w2({props:{date:e[21],today:e[10],displayedMonth:e[0],onClick:e[6],onContextMenu:e[4],onHover:e[2],metadata:T2(e[8],e[21],e[10]),selectedId:e[9]}}),{key:t,first:null,c(){r=Gh(),Fa(n.$$.fragment),this.first=r},m(a,s){zr(a,r,s),la(n,a,s),i=!0},p(a,s){e=a;let l={};s&16384&&(l.date=e[21]),s&1024&&(l.today=e[10]),s&1&&(l.displayedMonth=e[0]),s&64&&(l.onClick=e[6]),s&16&&(l.onContextMenu=e[4]),s&4&&(l.onHover=e[2]),s&17664&&(l.metadata=T2(e[8],e[21],e[10])),s&512&&(l.selectedId=e[9]),n.$set(l)},i(a){i||(Jt(n.$$.fragment,a),i=!0)},o(a){pr(n.$$.fragment,a),i=!1},d(a){a&&Pr(r),ua(n,a)}}}function U2(t,e){let r,n,i=[],a=new Map,s,l,u=e[1]&&P2(e),f=e[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=I2(e,f,h),m=d(g);a.set(m,i[h]=M2(m,g))}return{key:t,first:null,c(){r=Yt("tr"),u&&u.c(),n=Wn();for(let h=0;h<i.length;h+=1)i[h].c();s=Wn(),this.first=r},m(h,g){zr(h,r,g),u&&u.m(r,null),mt(r,n);for(let m=0;m<i.length;m+=1)i[m].m(r,null);mt(r,s),l=!0},p(h,g){e=h,e[1]?u?(u.p(e,g),g&2&&Jt(u,1)):(u=P2(e),u.c(),Jt(u,1),u.m(r,n)):u&&(So(),pr(u,1,1,()=>{u=null}),To()),g&18261&&(f=e[18].days,So(),i=p2(i,g,d,1,e,f,a,r,h2,M2,s,I2),To())},i(h){if(!l){Jt(u);for(let g=0;g<f.length;g+=1)Jt(i[g]);l=!0}},o(h){pr(u);for(let g=0;g<i.length;g+=1)pr(i[g]);l=!1},d(h){h&&Pr(r),u&&u.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function LG(t){let e,r,n,i,a,s,l,u,f,d,h,g,m=[],y=new Map,_;r=new E2({props:{today:t[10],displayedMonth:t[0],incrementDisplayedMonth:t[11],decrementDisplayedMonth:t[12],resetDisplayedMonth:t[13]}});let E=t[1]&&B2(),w=t[14][1].days,b=[];for(let G=0;G<w.length;G+=1)b[G]=D2(N2(t,w,G));let I=t[1]&&O2(),R=t[15],D=[];for(let G=0;G<R.length;G+=1)D[G]=L2(R2(t,R,G));let O=t[14],ee=G=>G[18].weekNum;for(let G=0;G<O.length;G+=1){let U=k2(t,O,G),le=ee(U);y.set(le,m[G]=U2(le,U))}return{c(){e=Yt("div"),Fa(r.$$.fragment),n=Wn(),i=Yt("table"),a=Yt("colgroup"),E&&E.c(),s=Wn();for(let G=0;G<b.length;G+=1)b[G].c();l=Wn(),u=Yt("thead"),f=Yt("tr"),I&&I.c(),d=Wn();for(let G=0;G<D.length;G+=1)D[G].c();h=Wn(),g=Yt("tbody");for(let G=0;G<m.length;G+=1)m[G].c();ut(i,"class","calendar svelte-pcimu8"),ut(e,"id","calendar-container"),ut(e,"class","container svelte-pcimu8"),Ar(e,"is-mobile",t[16])},m(G,U){zr(G,e,U),la(r,e,null),mt(e,n),mt(e,i),mt(i,a),E&&E.m(a,null),mt(a,s);for(let le=0;le<b.length;le+=1)b[le].m(a,null);mt(i,l),mt(i,u),mt(u,f),I&&I.m(f,null),mt(f,d);for(let le=0;le<D.length;le+=1)D[le].m(f,null);mt(i,h),mt(i,g);for(let le=0;le<m.length;le+=1)m[le].m(g,null);_=!0},p(G,[U]){let le={};if(U&1024&&(le.today=G[10]),U&1&&(le.displayedMonth=G[0]),r.$set(le),G[1]?E||(E=B2(),E.c(),E.m(a,s)):E&&(E.d(1),E=null),U&16384){w=G[14][1].days;let se;for(se=0;se<w.length;se+=1){let _e=N2(G,w,se);b[se]?b[se].p(_e,U):(b[se]=D2(_e),b[se].c(),b[se].m(a,null))}for(;se<b.length;se+=1)b[se].d(1);b.length=w.length}if(G[1]?I||(I=O2(),I.c(),I.m(f,d)):I&&(I.d(1),I=null),U&32768){R=G[15];let se;for(se=0;se<R.length;se+=1){let _e=R2(G,R,se);D[se]?D[se].p(_e,U):(D[se]=L2(_e),D[se].c(),D[se].m(f,null))}for(;se<D.length;se+=1)D[se].d(1);D.length=R.length}U&18431&&(O=G[14],So(),m=p2(m,U,ee,1,G,O,y,g,h2,U2,null,k2),To())},i(G){if(!_){Jt(r.$$.fragment,G);for(let U=0;U<O.length;U+=1)Jt(m[U]);_=!0}},o(G){pr(r.$$.fragment,G);for(let U=0;U<m.length;U+=1)pr(m[U]);_=!1},d(G){G&&Pr(e),ua(r),E&&E.d(),qh(b,G),I&&I.d(),qh(D,G);for(let U=0;U<m.length;U+=1)m[U].d()}}}function PG(t,e,r){let{localeData:n}=e,{showWeekNums:i=!1}=e,{onHoverDay:a}=e,{onHoverWeek:s}=e,{onContextMenuDay:l}=e,{onContextMenuWeek:u}=e,{onClickDay:f}=e,{onClickWeek:d}=e,{sources:h=[]}=e,{selectedId:g}=e,{today:m=window.moment()}=e,{displayedMonth:y=m}=e,_,E,w=window.app.isMobile;function b(){r(0,y=y.clone().add(1,"month"))}function I(){r(0,y=y.clone().subtract(1,"month"))}function R(){r(0,y=m.clone())}return t.$$set=D=>{"localeData"in D&&r(17,n=D.localeData),"showWeekNums"in D&&r(1,i=D.showWeekNums),"onHoverDay"in D&&r(2,a=D.onHoverDay),"onHoverWeek"in D&&r(3,s=D.onHoverWeek),"onContextMenuDay"in D&&r(4,l=D.onContextMenuDay),"onContextMenuWeek"in D&&r(5,u=D.onContextMenuWeek),"onClickDay"in D&&r(6,f=D.onClickDay),"onClickWeek"in D&&r(7,d=D.onClickWeek),"sources"in D&&r(8,h=D.sources),"selectedId"in D&&r(9,g=D.selectedId),"today"in D&&r(10,m=D.today),"displayedMonth"in D&&r(0,y=D.displayedMonth)},t.$$.update=()=>{t.$$.dirty&131073&&r(14,_=_G(y,n)),t.$$.dirty&132096&&r(15,E=yG(m,n))},[y,i,a,s,l,u,f,d,h,g,m,b,I,R,_,E,w,n]}var zh=class extends xs{constructor(e){super();document.getElementById("svelte-pcimu8-style")||OG(),Ao(this,e,PG,LG,Fh,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var Qh=xt(ms());function MG(t){let e,r,n,i=`${t[1]}px`,a=`${t[2]}px`,s,l=[qG,FG],u=[];function f(d,h){return d[3]?0:1}return r=f(t,-1),n=u[r]=l[r](t),{c(){e=ae("div"),n.c(),te(e,"class","calendarContainer"),et(e,"width",i,!1),et(e,"height",a,!1)},m(d,h){xe(d,e,h),u[r].m(e,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?u[r].p(d,h):(mh(),Li(u[g],1,1,()=>{u[g]=null}),yh(),n=u[r],n?n.p(d,h):(n=u[r]=l[r](d),n.c()),gi(n,1),n.m(e,null)),h&2&&i!==(i=`${d[1]}px`)&&et(e,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&et(e,"height",a,!1)},i(d){s||(gi(n),s=!0)},o(d){Li(n),s=!1},d(d){d&&be(e),u[r].d()}}}function UG(t){let e,r,n,i,a=[VG,GG],s=[];function l(u,f){return u[3]?0:1}return r=l(t,-1),n=s[r]=a[r](t),{c(){e=ae("div"),n.c(),te(e,"class","calendarContainer")},m(u,f){xe(u,e,f),s[r].m(e,null),i=!0},p(u,f){let d=r;r=l(u,f),r===d?s[r].p(u,f):(mh(),Li(s[d],1,1,()=>{s[d]=null}),yh(),n=s[r],n?n.p(u,f):(n=s[r]=a[r](u),n.c()),gi(n,1),n.m(e,null))},i(u){i||(gi(n),i=!0)},o(u){Li(n),i=!1},d(u){u&&be(e),s[r].d()}}}function FG(t){let e,r,n,i,a,s;function l(h){t[15](h)}function u(h){t[16](h)}function f(h){t[17](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new zh({props:d}),On.push(()=>La(r,"sources",l)),On.push(()=>La(r,"displayedMonth",u)),On.push(()=>La(r,"today",f)),{c(){e=ae("div"),sc(r.$$.fragment),et(e,"--theme-color",t[6].settings.dailyNoteDotColor)},m(h,g){xe(h,e,g),Dl(r,e,null),s=!0},p(h,g){let m={};!n&&g&16&&(n=!0,m.sources=h[4],Oa(()=>n=!1)),!i&&g&1&&(i=!0,m.displayedMonth=h[0],Oa(()=>i=!1)),!a&&g&32&&(a=!0,m.today=h[5],Oa(()=>a=!1)),r.$set(m),(!s||g&64)&&et(e,"--theme-color",h[6].settings.dailyNoteDotColor)},i(h){s||(gi(r.$$.fragment,h),s=!0)},o(h){Li(r.$$.fragment,h),s=!1},d(h){h&&be(e),ho(r)}}}function qG(t){let e;return{c(){e=ae("p"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:kt,i:kt,o:kt,d(r){r&&be(e)}}}function GG(t){let e,r,n,i,a,s;function l(h){t[12](h)}function u(h){t[13](h)}function f(h){t[14](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new zh({props:d}),On.push(()=>La(r,"sources",l)),On.push(()=>La(r,"displayedMonth",u)),On.push(()=>La(r,"today",f)),{c(){e=ae("div"),sc(r.$$.fragment),et(e,"--daily-dot-color",t[6].settings.dailyNoteDotColor)},m(h,g){xe(h,e,g),Dl(r,e,null),s=!0},p(h,g){let m={};!n&&g&16&&(n=!0,m.sources=h[4],Oa(()=>n=!1)),!i&&g&1&&(i=!0,m.displayedMonth=h[0],Oa(()=>i=!1)),!a&&g&32&&(a=!0,m.today=h[5],Oa(()=>a=!1)),r.$set(m),(!s||g&64)&&et(e,"--daily-dot-color",h[6].settings.dailyNoteDotColor)},i(h){s||(gi(r.$$.fragment,h),s=!0)},o(h){Li(r.$$.fragment,h),s=!1},d(h){h&&be(e),ho(r)}}}function VG(t){let e;return{c(){e=ae("p"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:kt,i:kt,o:kt,d(r){r&&be(e)}}}function KG(t){let e,r,n,i,a=[UG,MG],s=[];function l(u,f){return u[1]==0||u[2]==0?0:1}return e=l(t,-1),r=s[e]=a[e](t),{c(){r.c(),n=hi()},m(u,f){s[e].m(u,f),xe(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u,f),e===d?s[e].p(u,f):(mh(),Li(s[d],1,1,()=>{s[d]=null}),yh(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),gi(r,1),r.m(n.parentNode,n))},i(u){i||(gi(r),i=!0)},o(u){Li(r),i=!1},d(u){s[e].d(u),u&&be(n)}}}function jG(t,e,r){let{displayedMonth:n=window.moment()}=e,{width:i=0}=e,{height:a=0}=e,{include:s}=e,{exclude:l}=e,u=Dh(),f,d,h,g=!0,m,y=window.moment(),_=pt.getInstance();function E(U){return Sr(this,void 0,void 0,function*(){r(6,_);let le=U.clone().startOf("month").subtract(6,"days"),se=U.clone().endOf("month").add(12,"days"),_e=yield hr({startDate:le,endDate:se,include:s,exclude:l});if(Qh.default.isEqual(_e,h)&&Qh.default.isEqual(u,Dh()))return;u=Dh();let Oe=Qh.default.groupBy(_e,Se=>{var Ee;return window.moment((Ee=Se.start.date)!==null&&Ee!==void 0?Ee:Se.start.dateTime).startOf("day").format()});h=_e;let Re={getDailyMetadata:Se=>Sr(this,void 0,void 0,function*(){let Ee=[];_.settings.activateDailyNoteAddon&&Ec(Se)&&(Ee=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let ve=Oe[Se.startOf("day").format()];return ve?(Ee=[...Ee,...Array(ve.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:ve.length+""},dots:Ee}):{dataAttributes:{amount:Ee.length+""},dots:Ee}})};r(3,g=!1),r(4,m=null),r(4,m=[Re])})}let w=(U,le)=>U.filter(se=>se.start.date?window.moment(se.start.date).isSame(le,"day"):window.moment(se.start.dateTime).isSame(le,"day")),b=(U,le)=>{new Mi(w(h,U),"details",U,!1,()=>{Oi(),r(0,n)}).open()};co(()=>{clearInterval(f),clearInterval(d)});function I(U){m=U,r(4,m)}function R(U){n=U,r(0,n)}function D(U){y=U,r(5,y),r(10,f),r(0,n),r(11,d)}function O(U){m=U,r(4,m)}function ee(U){n=U,r(0,n)}function G(U){y=U,r(5,y),r(10,f),r(0,n),r(11,d)}return t.$$set=U=>{"displayedMonth"in U&&r(0,n=U.displayedMonth),"width"in U&&r(1,i=U.width),"height"in U&&r(2,a=U.height),"include"in U&&r(8,s=U.include),"exclude"in U&&r(9,l=U.exclude)},t.$$.update=()=>{if(t.$$.dirty&3073){e:f&&clearInterval(f),r(10,f=setInterval(()=>E(n),1e3)),d&&clearInterval(d),r(11,d=setInterval(()=>r(5,y=window.moment()),6e4)),E(n)}},[n,i,a,g,m,y,_,b,s,l,f,d,I,R,D,O,ee,G]}var F2=class extends bn{constructor(e){super();Ln(this,e,jG,KG,Dn,{displayedMonth:0,width:1,height:2,include:8,exclude:9})}},Xh=F2;function HG(t){di(t,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function q2(t,e,r){let n=t.slice();return n[15]=e[r][0],n[1]=e[r][1],n}function G2(t,e,r){let n=t.slice();return n[18]=e[r],n}function YG(t){let e,r=[...t[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=K2(q2(t,r,i));return{c(){e=ae("div");for(let i=0;i<n.length;i+=1)n[i].c();te(e,"class","scheduleContent svelte-1f1t9un")},m(i,a){xe(i,e,a);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=q2(i,r,s);n[s]?n[s].p(l,a):(n[s]=K2(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&be(e),un(n,i)}}}function WG(t){let e;return{c(){e=ae("span"),e.textContent="LOADING"},m(r,n){xe(r,e,n)},p:kt,d(r){r&&be(e)}}}function V2(t){let e,r,n,i,a,s,l,u,f=t[3](t[18])+"",d,h,g,m,y=t[18].summary+"",_,E,w,b;function I(...R){return t[13](t[18],...R)}return{c(){e=ae("div"),r=ae("div"),n=ae("div"),i=ae("div"),s=De(),l=ae("div"),u=ae("span"),d=ar(f),h=De(),g=ae("div"),m=ae("span"),_=ar(y),E=De(),te(i,"class","circle svelte-1f1t9un"),et(i,"background",ju(t[18]),!1),te(n,"class",a=""+(Nl(t[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),te(l,"class","timeContainer svelte-1f1t9un"),te(r,"class","circleTime svelte-1f1t9un"),te(g,"class","eventTitleContainer svelte-1f1t9un"),te(e,"class","dayEvent svelte-1f1t9un")},m(R,D){xe(R,e,D),re(e,r),re(r,n),re(n,i),re(r,s),re(r,l),re(l,u),re(u,d),re(e,h),re(e,g),re(g,m),re(m,_),re(e,E),w||(b=$e(e,"click",I),w=!0)},p(R,D){t=R},d(R){R&&be(e),w=!1,b()}}}function K2(t){let e,r,n,i,a=t[15].slice(0,2)+"",s,l,u,f,d=t[15].slice(2)+"",h,g,m,y,_,E;function w(){return t[12](t[1])}let b=t[1],I=[];for(let R=0;R<b.length;R+=1)I[R]=V2(G2(t,b,R));return{c(){e=ae("div"),r=ae("div"),n=ae("div"),i=ae("span"),s=ar(a),u=De(),f=ae("span"),h=ar(d),g=De(),m=ae("div");for(let R=0;R<I.length;R+=1)I[R].c();y=De(),te(n,"class",l=""+(Nl(t[6](t[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),te(f,"class","dayText svelte-1f1t9un"),te(r,"class","dateDisplay svelte-1f1t9un"),te(m,"class","dayEvents svelte-1f1t9un"),te(e,"class","dayContainer svelte-1f1t9un")},m(R,D){xe(R,e,D),re(e,r),re(r,n),re(n,i),re(i,s),re(r,u),re(r,f),re(f,h),re(e,g),re(e,m);for(let O=0;O<I.length;O+=1)I[O].m(m,null);re(e,y),_||(E=$e(n,"click",w),_=!0)},p(R,D){if(t=R,D&28){b=t[1];let O;for(O=0;O<b.length;O+=1){let ee=G2(t,b,O);I[O]?I[O].p(ee,D):(I[O]=V2(ee),I[O].c(),I[O].m(m,null))}for(;O<I.length;O+=1)I[O].d(1);I.length=b.length}},d(R){R&&be(e),un(I,R),_=!1,E()}}}function zG(t){let e;function r(a,s){return a[0]?WG:YG}let n=r(t,-1),i=n(t);return{c(){e=ae("div"),i.c(),te(e,"class","scheduleContainer svelte-1f1t9un")},m(a,s){xe(a,e,s),i.m(e,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e,null)))},i:kt,o:kt,d(a){a&&be(e),i.d()}}}function QG(t,e,r){let{timeSpan:n=7}=e,{date:i=window.moment()}=e,{include:a}=e,{exclude:s}=e,l,u=new Map,f=!1,d=[],h=()=>Sr(void 0,void 0,void 0,function*(){let b=yield hr({startDate:i,endDate:i.clone().add(n,"day"),include:a,exclude:s});if(JSON.stringify(b)==JSON.stringify(d)){r(0,f=!1);return}u.clear(),r(1,d=b),d.forEach(I=>{let R=I.start.date?window.moment(I.start.date).format("DD MMM, ddd"):window.moment(I.start.dateTime).format("DD MMM, ddd");u.has(R)?u.get(R).push(I):u.set(R,[I])}),r(0,f=!1)}),g=b=>{if(b.start.date)return"All day";{let I=window.moment(b.start.dateTime).format("hh:mma"),R=window.moment(b.end.dateTime).format("hh:mma");return`${I}-${R}`}},m=(b,I)=>{I.shiftKey?window.open(b.htmlLink):new vi(b,()=>{Oi(),r(7,i),r(11,l)}).open()},y=b=>Sr(void 0,void 0,void 0,function*(){let I=window.moment(b.start.date||b.start.dateTime),R=yield hr({startDate:I});new Mi(R,"details",I,!1,()=>{Oi(),r(7,i),r(11,l)}).open()}),_=b=>{let I=window.moment(b.start.date||b.start.dateTime);return window.moment().local().isSame(I,"day")};co(()=>{clearInterval(l)});let E=b=>y(b[0]),w=(b,I)=>m(b,I);return t.$$set=b=>{"timeSpan"in b&&r(8,n=b.timeSpan),"date"in b&&r(7,i=b.date),"include"in b&&r(9,a=b.include),"exclude"in b&&r(10,s=b.exclude)},t.$$.update=()=>{if(t.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,u,g,m,y,_,i,n,a,s,l,E,w]}var j2=class extends bn{constructor(e){super();Ln(this,e,QG,zG,Dn,{timeSpan:8,date:7,include:9,exclude:10},HG)}},Jh=j2;var H2=xt(require("obsidian")),Hl=class extends H2.MarkdownRenderChild{constructor(e,r,n){super(r);this.a=e,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function Y2(t,e,r){return M(this,null,function*(){let{type:n,height:i,width:a,date:s,navigation:l,timespan:u,exclude:f,include:d,theme:h}=(0,Zh.parseYaml)(t);n||(n=ws.day);let g=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,g,!0).isValid()){let m;s==null?m=void 0:s=="today"?m=window.moment():s=="tomorrow"?m=window.moment().add(1,"day"):s=="yesterday"?m=window.moment().subtract(1,"day"):m=window.moment(s),e.style.padding="10px",n==ws.web?Zh.Platform.isDesktopApp&&r.addChild(new Hl(Uh,e,{height:i!=null?i:500,width:a!=null?a:500,date:m,theme:h!=null?h:"auto"})):n==ws.day?r.addChild(new Hl(Mh,e,{height:i,width:a,date:m,navigation:l,include:d,exclude:f})):n==ws.month?r.addChild(new Hl(Xh,e,{height:i,width:a,displayedMonth:m,include:d,exclude:f})):n==ws.schedule&&r.addChild(new Hl(Jh,e,{timeSpan:u,date:m,include:d,exclude:f}))}})}var W2=xt(require("obsidian"));var Tc="google-calendar-view-day",Cy=class extends W2.ItemView{constructor(e){super(e)}getViewType(){return Tc}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.timeline=new Mh({target:this.contentEl,props:{navigation:!0}})})}onClose(){return M(this,null,function*(){this.timeline.$destroy()})}};var z2=xt(require("obsidian"));var Ac="google-calendar-view-month",by=class extends z2.ItemView{constructor(e){super(e)}getViewType(){return Ac}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Xh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var Q2=xt(require("obsidian"));var kc="google-calendar-view-web",xy=class extends Q2.ItemView{constructor(e){super(e)}getViewType(){return kc}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Uh({target:this.contentEl})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var X2=xt(require("obsidian"));var Ic="google-calendar-view-schedule",Sy=class extends X2.ItemView{constructor(e){super(e)}getViewType(){return Ic}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Jh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var J2=xt(require("obsidian")),Ty=class extends J2.FuzzySuggestModal{constructor(e,r,n,i,a){super(pt.getInstance().app);this.eventList=e,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return M(this,null,function*(){let r=`[${e.summary}](${e.htmlLink}&cal=${e.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function Z2(t){Rc("@today",t)||Rc("@tomorrow",t)||Rc("@yesterday",t)||Rc("@REGEX",t)||Rc("@YYYY-MM-DD",t)}function Rc(t,e){var s;let r=e.getCursor(),n=e.getCursor(),i="",a=window.moment();if(t==="@REGEX"){let l=e.getLine(r.line);if(l.length>50)return!1;let u=(s=l.match(/.*@([+,-])(\d+) /))!=null?s:[];if(u.length!=3||e.getCursor().ch!=u.index+u[0].length)return!1;if(n=mn(Fr({},r),{ch:r.ch-u[1].length-u[2].length-1}),n.ch<0)return;i=e.getRange(n,r),u[1]=="+"?a=window.moment().add(u[2],"day"):a=window.moment().subtract(u[2],"day")}else if(t==="@YYYY-MM-DD"){if(n=mn(Fr({},r),{ch:r.ch-t.length}),i=e.getRange(n,r),i.length!="@YYYY-MM-DD".length||!i.startsWith("@")||i.substring(1).length>100)return!1;let l=window.moment(i.substring(1));if(l.isValid())a=l;else return!1}else{if(n=mn(Fr({},r),{ch:r.ch-t.length}),n.ch<0||e.getRange(n,r)!=t)return!1;switch(t){case"@today":a=window.moment();break;case"@tomorrow":a=window.moment().add(1,"day");break;case"@yesterday":a=window.moment().add(-1,"day");break;default:return!1}}return hr({startDate:a}).then(l=>{new Ty(l,e,n,r,i).open()}),!0}function $h(t,e){return M(this,null,function*(){if(!zt())return null;let r=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events/${t}`,"GET",null);return r||(Ot("Could not get Google Event"),null)})}var $2=xt(ms());function XG(t){return M(this,null,function*(){let e=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=e.exec(t),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>M(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield $h(s,a[2])}}))):[]})}function ek(t){return M(this,null,function*(){let e=t.getCursor(),r=t.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield XG(r);!s.length||a.forEach(l=>M(this,null,function*(){let u=l[1]?parseInt(l[1]):0,f=t.getCursor();if(f.ch-=3,t.getRange(f,t.getCursor())!="}} ")return!1;let d=$2.default.get(s[u],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),t.setValue(r),e.ch+=d.length-l[0].length,t.setCursor(e)}))})}var tk=xt(require("obsidian"));var Yl=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var Ay=class extends tk.EditorSuggest{constructor(e){super(e)}onTrigger(e,r){let i=r.getLine(e.line).substring(0,e.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:e,start:{ch:i.index+a,line:e.line},query:i[2]}}}getSuggestions(e){return Yl.filter(r=>e.query===r.substring(0,e.query.length))}renderSuggestion(e,r){r.createEl("span",{text:e,cls:"suggestionText"})}selectSuggestion(e){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(e,this.context.start,this.context.end),Yl.filter(i=>i.startsWith(`${e}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var mk=xt(require("obsidian"));var Nc=xt(require("obsidian")),ky=class extends Nc.Modal{constructor(e,r){super(e);this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"Enter a name for the template"}),new Nc.Setting(e).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new Nc.Setting(e).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:e}=this;e.empty()}};function JG(t){di(t,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function rk(t,e,r){let n=t.slice();return n[21]=e[r],n}function nk(t,e,r){let n=t.slice();return n[21]=e[r],n}function ik(t,e,r){let n=t.slice();return n[26]=e[r],n[27]=e,n[28]=r,n}function ak(t,e,r){let n=t.slice();return n[29]=e[r],n[30]=e,n[31]=r,n}function sk(t,e,r){let n=t.slice();return n[32]=e[r],n}function ok(t){let e,r=t[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=lk(sk(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=hi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=sk(i,r,s);n[s]?n[s].p(l,a):(n[s]=lk(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){un(n,i),i&&be(e)}}}function lk(t){let e,r=t[32].name+"",n,i;return{c(){e=ae("option"),n=ar(r),e.__value=i=t[32].name,e.value=e.__value},m(a,s){xe(a,e,s),re(e,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&pi(n,r),s[0]&1&&i!==(i=a[32].name)&&(e.__value=i,e.value=e.__value)},d(a){a&&be(e)}}}function ZG(t){let e;return{c(){e=ae("span"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:kt,d(r){r&&be(e)}}}function $G(t){let e,r=t[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=uk(ak(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=hi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=ak(i,r,s);n[s]?n[s].p(l,a):(n[s]=uk(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){un(n,i),i&&be(e)}}}function uk(t){let e,r,n=t[29][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[17].call(l,t[30],t[31])}return{c(){e=ae("div"),r=ae("label"),i=ar(n),s=De(),l=ae("input"),f=De(),te(r,"for",a=t[29][0].id),te(l,"type","checkbox"),te(l,"id",u=t[29][0].id),te(e,"class","optionItem svelte-6isfqn")},m(m,y){xe(m,e,y),re(e,r),re(r,i),re(e,s),re(e,l),l.checked=t[29][1],re(e,f),d||(h=[$e(l,"change",g),$e(l,"change",t[7])],d=!0)},p(m,y){t=m,y[0]&16&&n!==(n=t[29][0].summary+"")&&pi(i,n),y[0]&16&&a!==(a=t[29][0].id)&&te(r,"for",a),y[0]&16&&u!==(u=t[29][0].id)&&te(l,"id",u),y[0]&16&&(l.checked=t[29][1])},d(m){m&&be(e),d=!1,rn(h)}}}function eV(t){let e;return{c(){e=ae("span"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:kt,d(r){r&&be(e)}}}function tV(t){let e,r=t[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=ck(ik(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=hi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=ik(i,r,s);n[s]?n[s].p(l,a):(n[s]=ck(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){un(n,i),i&&be(e)}}}function ck(t){let e,r,n=t[26][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[18].call(l,t[27],t[28])}return{c(){e=ae("div"),r=ae("label"),i=ar(n),s=De(),l=ae("input"),f=De(),te(r,"for",a=t[26][0].id),te(l,"type","checkbox"),te(l,"id",u=t[26][0].id),te(e,"class","optionItem svelte-6isfqn")},m(m,y){xe(m,e,y),re(e,r),re(r,i),re(e,s),re(e,l),l.checked=t[26][1],re(e,f),d||(h=$e(l,"change",g),d=!0)},p(m,y){t=m,y[0]&8&&n!==(n=t[26][0].summary+"")&&pi(i,n),y[0]&8&&a!==(a=t[26][0].id)&&te(r,"for",a),y[0]&8&&u!==(u=t[26][0].id)&&te(l,"id",u),y[0]&8&&(l.checked=t[26][1])},d(m){m&&be(e),d=!1,h()}}}function fk(t){let e,r,n,i,a,s,l,u=Yl,f=[];for(let g=0;g<u.length;g+=1)f[g]=dk(nk(t,u,g));let d=t[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=hk(rk(t,d,g));return{c(){e=ae("h4"),e.textContent="Table structure",r=De(),n=ae("select");for(let g=0;g<f.length;g+=1)f[g].c();i=De(),a=ae("div");for(let g=0;g<h.length;g+=1)h[g].c();te(n,"name","tableOptions"),te(n,"class","dropdown"),te(a,"class","optionList svelte-6isfqn")},m(g,m){xe(g,e,m),xe(g,r,m),xe(g,n,m);for(let y=0;y<f.length;y+=1)f[y].m(n,null);xe(g,i,m),xe(g,a,m);for(let y=0;y<h.length;y+=1)h[y].m(a,null);s||(l=$e(n,"change",t[8]),s=!0)},p(g,m){if(m&0){u=Yl;let y;for(y=0;y<u.length;y+=1){let _=nk(g,u,y);f[y]?f[y].p(_,m):(f[y]=dk(_),f[y].c(),f[y].m(n,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=u.length}if(m[0]&544){d=g[5];let y;for(y=0;y<d.length;y+=1){let _=rk(g,d,y);h[y]?h[y].p(_,m):(h[y]=hk(_),h[y].c(),h[y].m(a,null))}for(;y<h.length;y+=1)h[y].d(1);h.length=d.length}},d(g){g&&be(e),g&&be(r),g&&be(n),un(f,g),g&&be(i),g&&be(a),un(h,g),s=!1,l()}}}function dk(t){let e,r=t[21]+"",n,i;return{c(){e=ae("option"),n=ar(r),e.__value=i=t[21],e.value=e.__value},m(a,s){xe(a,e,s),re(e,n)},p:kt,d(a){a&&be(e)}}}function hk(t){let e,r,n=t[21]+"",i,a,s,l,u,f,d;function h(){return t[19](t[21])}return{c(){e=ae("div"),r=ae("span"),i=ar(n),a=De(),s=ae("input"),u=De(),te(s,"type","checkbox"),te(s,"id",l=t[21]),s.checked=!0,te(e,"class","optionItem svelte-6isfqn")},m(g,m){xe(g,e,m),re(e,r),re(r,i),re(e,a),re(e,s),re(e,u),f||(d=$e(s,"click",h),f=!0)},p(g,m){t=g,m[0]&32&&n!==(n=t[21]+"")&&pi(i,n),m[0]&32&&l!==(l=t[21])&&te(s,"id",l)},d(g){g&&be(e),f=!1,d()}}}function rV(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,E,w,b,I,R,D,O,ee,G,U,le,se,_e,Oe,Re,Se,Ee,ve,Je,Ke,Et,yt,Ze=t[0].settings.insertTemplates.length&&ok(t);function fe(B,L){return B[4]?$G:ZG}let vt=fe(t,[-1,-1]),it=vt(t);function Ct(B,L){return B[3]?tV:eV}let tt=Ct(t,[-1,-1]),Ce=tt(t),A=t[2]=="table"&&fk(t);return{c(){e=ae("div"),r=ae("div"),n=ae("select"),i=ae("option"),i.textContent="None",Ze&&Ze.c(),a=De(),s=ae("h1"),s.textContent="Insert Options",l=De(),u=ae("button"),u.textContent="Save as template",f=De(),d=ae("hr"),h=De(),g=ae("div"),m=ae("div"),y=ae("label"),y.textContent="Insert type",_=De(),E=ae("select"),w=ae("option"),w.textContent="Bullet",b=ae("option"),b.textContent="Table",I=De(),R=ae("div"),D=ae("label"),D.textContent="Insert date",O=De(),ee=ae("input"),U=De(),le=ae("h4"),le.textContent="Calendars",se=De(),_e=ae("div"),it.c(),Oe=De(),Re=ae("h4"),Re.textContent="Events",Se=De(),Ee=ae("div"),Ce.c(),ve=De(),A&&A.c(),Je=De(),Ke=ae("button"),Ke.textContent="Insert",i.__value="None",i.value=i.__value,te(n,"class","dropdown left"),t[1]===void 0&&Da(()=>t[15].call(n)),te(s,"class","center svelte-6isfqn"),te(u,"class","right svelte-6isfqn"),te(r,"class","header svelte-6isfqn"),te(y,"for","insertType"),te(w,"default",""),w.__value="bullet",w.value=w.__value,b.__value="table",b.value=b.__value,te(E,"class","dropdown"),t[2]===void 0&&Da(()=>t[16].call(E)),te(m,"class","input svelte-6isfqn"),te(D,"for","date"),te(ee,"type","date"),te(ee,"name","date"),te(ee,"id","date"),ee.value=G=window.moment().format("YYYY-MM-DD"),te(R,"class","input svelte-6isfqn"),te(g,"class","settingsContainer svelte-6isfqn"),te(_e,"class","calendarList svelte-6isfqn"),te(Ee,"class","eventList svelte-6isfqn"),te(Ke,"class","svelte-6isfqn"),te(e,"class","optionContainer svelte-6isfqn")},m(B,L){xe(B,e,L),re(e,r),re(r,n),re(n,i),Ze&&Ze.m(n,null),aa(n,t[1]),re(r,a),re(r,s),re(r,l),re(r,u),re(e,f),re(e,d),re(e,h),re(e,g),re(g,m),re(m,y),re(m,_),re(m,E),re(E,w),re(E,b),aa(E,t[2]),re(g,I),re(g,R),re(R,D),re(R,O),re(R,ee),re(e,U),re(e,le),re(e,se),re(e,_e),it.m(_e,null),re(e,Oe),re(e,Re),re(e,Se),re(e,Ee),Ce.m(Ee,null),re(e,ve),A&&A.m(e,null),re(e,Je),re(e,Ke),Et||(yt=[$e(n,"change",t[15]),$e(n,"change",t[12]),$e(u,"click",t[11]),$e(E,"change",t[16]),$e(ee,"change",t[10]),$e(Ke,"click",t[6])],Et=!0)},p(B,L){B[0].settings.insertTemplates.length?Ze?Ze.p(B,L):(Ze=ok(B),Ze.c(),Ze.m(n,null)):Ze&&(Ze.d(1),Ze=null),L[0]&3&&aa(n,B[1]),L[0]&4&&aa(E,B[2]),vt===(vt=fe(B,L))&&it?it.p(B,L):(it.d(1),it=vt(B),it&&(it.c(),it.m(_e,null))),tt===(tt=Ct(B,L))&&Ce?Ce.p(B,L):(Ce.d(1),Ce=tt(B),Ce&&(Ce.c(),Ce.m(Ee,null))),B[2]=="table"?A?A.p(B,L):(A=fk(B),A.c(),A.m(e,Je)):A&&(A.d(1),A=null)},i:kt,o:kt,d(B){B&&be(e),Ze&&Ze.d(),it.d(),Ce.d(),A&&A.d(),Et=!1,rn(yt)}}}function nV(t,e,r){let{onSubmit:n}=e,{insertEventsModal:i}=e,a=pt.getInstance(),s,l,u,f,d=[".summary",".description"];uo(()=>Sr(void 0,void 0,void 0,function*(){let G=yield en();r(4,f=G.map(le=>[le,!0]));let U=yield hr();r(3,u=U.map(le=>[le,!0]))}));let h=()=>{let G=u.filter(U=>U[1]).map(U=>U[0]);n(l,G,d,i)},g=G=>{u.forEach(U=>{U[0].parent.id==G.target.id&&(U[1]=G.target.checked)}),r(3,u)},m=G=>{let U=G.target.value;U=="on"&&(U=G.target.id),d.contains(U)?d.remove(U):d.push(U),r(5,d)},y=G=>{d.contains(G)&&d.remove(G),r(5,d)},_=G=>Sr(void 0,void 0,void 0,function*(){let U=yield en();r(4,f=U.map(se=>[se,!0]));let le=yield hr({startDate:window.moment(G.target.value).local()});r(3,u=le.map(se=>[se,!0])),r(3,u)}),E=()=>f.filter(G=>G[1]).map(G=>G[0].id),w=()=>{new ky(app,G=>{let U={name:G,insertType:l,tableOptions:d,calendarList:E()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,U],a),a.saveSettings(),Ot("Added template")}).open()},b=G=>{let U=G.target.value;if(U=="None")return;let se=a.settings.insertTemplates.find(_e=>_e.name==U);!se||(r(2,l=se.insertType),r(5,d=se.tableOptions),f.forEach(_e=>_e[1]=se.calendarList.contains(_e[0].id)),u.forEach(_e=>_e[1]=se.calendarList.contains(_e[0].parent.id)),r(4,f),r(3,u))};function I(){s=Bl(this),r(1,s),r(0,a)}function R(){l=Bl(this),r(2,l)}function D(G,U){G[U][1]=this.checked,r(4,f)}function O(G,U){G[U][1]=this.checked,r(3,u)}let ee=G=>y(G);return t.$$set=G=>{"onSubmit"in G&&r(13,n=G.onSubmit),"insertEventsModal"in G&&r(14,i=G.insertEventsModal)},[a,s,l,u,f,d,h,g,m,y,_,w,b,n,i,I,R,D,O,ee]}var pk=class extends bn{constructor(e){super();Ln(this,e,nV,rV,Dn,{onSubmit:13,insertEventsModal:14},JG,[-1,-1])}},gk=pk;var yk=xt(ms()),Iy=class extends mk.Modal{constructor(e){super(pt.getInstance().app);this.editor=e}onOpen(){return M(this,null,function*(){let{contentEl:e}=this;new gk({target:e,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:e}=this;e.empty()}onSubmit(e,r,n,i){let a="",s="",l="";e=="bullet"?(r.forEach(u=>{l+=`
- ${`[${u.summary}](${u.htmlLink}&cal=${u.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):e=="table"&&(n.forEach(u=>{u=u.split(".").join(" ").toLocaleUpperCase(),a+=`| ${u} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(u=>{n.forEach(f=>{let d=yk.default.get(u,f.substring(1),"");f==".summary"&&(d=`[${d}](${u.htmlLink}&cal=${u.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.start.date):window.moment(u.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.end.date):window.moment(u.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var Ry=class{constructor(){}make(){return{getCalendars:()=>en(),getEvent:(e,r)=>$h(e,r),getEvents:e=>hr(e)}}};var Dy=xt(require("obsidian"));var Bc=xt(ms());function vk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Wl=vk();function iV(t){Wl=t}var _k=/[&<>"']/,aV=new RegExp(_k.source,"g"),wk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,sV=new RegExp(wk.source,"g"),oV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ek=t=>oV[t];function an(t,e){if(e){if(_k.test(t))return t.replace(aV,Ek)}else if(wk.test(t))return t.replace(sV,Ek);return t}var lV=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ck(t){return t.replace(lV,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var uV=/(^|[^\[])\^/g;function er(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(n,i)=>(i=i.source||i,i=i.replace(uV,"$1"),t=t.replace(n,i),r),getRegex:()=>new RegExp(t,e)};return r}var cV=/[^\w:]/g,fV=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function bk(t,e,r){if(t){let n;try{n=decodeURIComponent(Ck(r)).replace(cV,"").toLowerCase()}catch(i){return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!fV.test(r)&&(r=gV(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(n){return null}return r}var ep={},dV=/^[^:]+:\/*[^/]*$/,hV=/^([^:]+:)[\s\S]*$/,pV=/^([^:]+:\/*[^/]*)[\s\S]*$/;function gV(t,e){ep[" "+t]||(dV.test(t)?ep[" "+t]=t+"/":ep[" "+t]=rp(t,"/",!0)),t=ep[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(hV,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(pV,"$1")+e:t+e}var tp={exec:function(){}};function Ui(t){let e=1,r,n;for(;e<arguments.length;e++){r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}function xk(t,e){let r=t.replace(/\|/g,(a,s,l)=>{let u=!1,f=s;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function rp(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let a=t.charAt(n-i-1);if(a===e&&!r)i++;else if(a!==e&&r)i++;else break}return t.slice(0,n-i)}function mV(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,n=0,i=0;for(;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function Sk(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Tk(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function Ak(t,e,r,n){let i=e.href,a=e.title?an(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let l={type:"link",raw:r,href:i,title:a,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}return{type:"image",raw:r,href:i,title:a,text:an(s)}}function yV(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let a=i.match(/^\s+/);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var np=class{constructor(e){this.options=e||Wl}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:rp(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=yV(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let i=rp(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=r[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:r[0],tokens:a,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n,i,a,s,l,u,f,d,h,g,m,y,_=r[1].trim(),E=_.length>1,w={type:"list",raw:"",ordered:E,start:E?+_.slice(0,-1):"",loose:!1,items:[]};_=E?`\\d{1,9}\\${_.slice(-1)}`:`\\${_}`,this.options.pedantic&&(_=E?_:"[*+-]");let b=new RegExp(`^( {0,3}${_})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(y=!1,!(!(r=b.exec(e))||this.rules.block.hr.test(e)));){if(n=r[0],e=e.substring(n.length),d=r[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=r[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=r[1].length),u=!1,!d&&/^ *$/.test(h)&&(n+=h+`
`,e=e.substring(h.length+1),y=!0),!y){let R=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),D=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),O=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),ee=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],d=g,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(O.test(d)||ee.test(d)||R.test(d)||D.test(e)));){if(d.search(/[^ ]/)>=s||!d.trim())m+=`
`+d.slice(s);else if(!u)m+=`
`+d;else break;!u&&!d.trim()&&(u=!0),n+=g+`
`,e=e.substring(g.length+1)}}w.loose||(f?w.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(m),i&&(a=i[0]!=="[ ] ",m=m.replace(/^\[[ xX]\] +/,""))),w.items.push({type:"list_item",raw:n,task:!!i,checked:a,loose:!1,text:m}),w.raw+=n}w.items[w.items.length-1].raw=n.trimRight(),w.items[w.items.length-1].text=m.trimRight(),w.raw=w.raw.trimRight();let I=w.items.length;for(l=0;l<I;l++)if(this.lexer.state.top=!1,w.items[l].tokens=this.lexer.blockTokens(w.items[l].text,[]),!w.loose){let R=w.items[l].tokens.filter(O=>O.type==="space"),D=R.length>0&&R.some(O=>/\n.*\n/.test(O.raw));w.loose=D}if(w.loose)for(l=0;l<I;l++)w.items[l].loose=!0;return w}}html(e){let r=this.rules.block.html.exec(e);if(r){let n={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let i=this.options.sanitizer?this.options.sanitizer(r[0]):an(r[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),i=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let n={type:"table",header:xk(r[1]).map(i=>({text:i})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=r[0];let i=n.align.length,a,s,l,u;for(a=0;a<i;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(i=n.rows.length,a=0;a<i;a++)n.rows[a]=xk(n.rows[a],n.header.length).map(f=>({text:f}));for(i=n.header.length,s=0;s<i;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(i=n.rows.length,s=0;s<i;s++)for(u=n.rows[s],l=0;l<u.length;l++)u[l].tokens=this.lexer.inline(u[l].text);return n}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:an(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):an(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let s=rp(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{let s=mV(r[2],"()");if(s>-1){let u=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let i=r[2],a="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),Ak(r,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=r[i.toLowerCase()],!i){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return Ak(n,i,n[0],this.lexer)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;let a=i[1]||i[2]||"";if(!a||a&&(n===""||this.rules.inline.punctuation.exec(n))){let s=i[0].length-1,l,u,f=s,d=0,h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(i=h.exec(r))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(u=l.length,i[3]||i[4]){f+=u;continue}else if((i[5]||i[6])&&s%3&&!((s+u)%3)){d+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+d);let g=e.slice(0,s+i.index+(i[0].length-l.length)+u);if(Math.min(s,u)%2){let y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}let m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),i=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return i&&a&&(n=n.substring(1,n.length-1)),n=an(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let n=this.rules.inline.autolink.exec(e);if(n){let i,a;return n[2]==="@"?(i=an(this.options.mangle?r(n[1]):n[1]),a="mailto:"+i):(i=an(n[1]),a=i),{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,r){let n;if(n=this.rules.inline.url.exec(e)){let i,a;if(n[2]==="@")i=an(this.options.mangle?r(n[0]):n[0]),a="mailto:"+i;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);i=an(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,r){let n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):an(n[0]):n[0]:i=an(this.options.smartypants?r(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}},je={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:tp,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};je._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;je._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;je.def=er(je.def).replace("label",je._label).replace("title",je._title).getRegex();je.bullet=/(?:[*+-]|\d{1,9}[.)])/;je.listItemStart=er(/^( *)(bull) */).replace("bull",je.bullet).getRegex();je.list=er(je.list).replace(/bull/g,je.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+je.def.source+")").getRegex();je._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";je._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;je.html=er(je.html,"i").replace("comment",je._comment).replace("tag",je._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();je.paragraph=er(je._paragraph).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",je._tag).getRegex();je.blockquote=er(je.blockquote).replace("paragraph",je.paragraph).getRegex();je.normal=Ui({},je);je.gfm=Ui({},je.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});je.gfm.table=er(je.gfm.table).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",je._tag).getRegex();je.gfm.paragraph=er(je._paragraph).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",je.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",je._tag).getRegex();je.pedantic=Ui({},je.normal,{html:er(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",je._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:tp,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:er(je.normal._paragraph).replace("hr",je.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",je.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Me={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:tp,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:tp,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Me._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Me.punctuation=er(Me.punctuation).replace(/punctuation/g,Me._punctuation).getRegex();Me.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Me.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;Me._comment=er(je._comment).replace("(?:-->|$)","-->").getRegex();Me.emStrong.lDelim=er(Me.emStrong.lDelim).replace(/punct/g,Me._punctuation).getRegex();Me.emStrong.rDelimAst=er(Me.emStrong.rDelimAst,"g").replace(/punct/g,Me._punctuation).getRegex();Me.emStrong.rDelimUnd=er(Me.emStrong.rDelimUnd,"g").replace(/punct/g,Me._punctuation).getRegex();Me._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Me._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Me._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Me.autolink=er(Me.autolink).replace("scheme",Me._scheme).replace("email",Me._email).getRegex();Me._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Me.tag=er(Me.tag).replace("comment",Me._comment).replace("attribute",Me._attribute).getRegex();Me._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Me._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Me._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Me.link=er(Me.link).replace("label",Me._label).replace("href",Me._href).replace("title",Me._title).getRegex();Me.reflink=er(Me.reflink).replace("label",Me._label).replace("ref",je._label).getRegex();Me.nolink=er(Me.nolink).replace("ref",je._label).getRegex();Me.reflinkSearch=er(Me.reflinkSearch,"g").replace("reflink",Me.reflink).replace("nolink",Me.nolink).getRegex();Me.normal=Ui({},Me);Me.pedantic=Ui({},Me.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:er(/^!?\[(label)\]\((.*?)\)/).replace("label",Me._label).getRegex(),reflink:er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Me._label).getRegex()});Me.gfm=Ui({},Me.normal,{escape:er(Me.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Me.gfm.url=er(Me.gfm.url,"i").replace("email",Me.gfm._extended_email).getRegex();Me.breaks=Ui({},Me.gfm,{br:er(Me.br).replace("{2,}","*").getRegex(),text:er(Me.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function vV(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function kk(t){let e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var ca=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Wl,this.options.tokenizer=this.options.tokenizer||new np,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:je.normal,inline:Me.normal};this.options.pedantic?(r.block=je.pedantic,r.inline=Me.pedantic):this.options.gfm&&(r.block=je.gfm,this.options.breaks?r.inline=Me.breaks:r.inline=Me.gfm),this.tokenizer.rules=r}static get rules(){return{block:je,inline:Me}}static lex(e,r){return new ca(r).lex(e)}static lexInline(e,r){return new ca(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,u,f)=>u+"    ".repeat(f.length));let n,i,a,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),f;this.options.extensions.startBlock.forEach(function(d){f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){i=r[r.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n),s=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,i,a,s=e,l,u,f;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+Tk("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+Tk("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index+l[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(n=d.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,s,f)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e,kk)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,kk))){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),g;this.options.extensions.startInline.forEach(function(m){g=m.call({lexer:this},h),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(n=this.tokenizer.inlineText(a,vV)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,i=r[r.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},ip=class{constructor(e){this.options=e||Wl}code(e,r,n){let i=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,i);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+an(i)+'">'+(n?e:an(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:an(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,n,i){if(this.options.headerIds){let a=this.options.headerPrefix+i.slug(n);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,n){let i=r?"ol":"ul",a=r&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){if(e=bk(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<a href="'+e+'"';return r&&(i+=' title="'+r+'"'),i+=">"+n+"</a>",i}image(e,r,n){if(e=bk(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i=`<img src="${e}" alt="${n}"`;return r&&(i+=` title="${r}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}},Ny=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},By=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do i++,n=e+"-"+i;while(this.seen.hasOwnProperty(n))}return r||(this.seen[e]=i,this.seen[n]=0),n}slug(e,r={}){let n=this.serialize(e);return this.getNextSafeSlug(n,r.dryrun)}},Fi=class{constructor(e){this.options=e||Wl,this.options.renderer=this.options.renderer||new ip,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ny,this.slugger=new By}static parse(e,r){return new Fi(r).parse(e)}static parseInline(e,r){return new Fi(r).parseInline(e)}parse(e,r=!0){let n="",i,a,s,l,u,f,d,h,g,m,y,_,E,w,b,I,R,D,O,ee=e.length;for(i=0;i<ee;i++){if(m=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(O=this.options.extensions.renderers[m.type].call({parser:this},m),O!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type))){n+=O||"";continue}switch(m.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(m.tokens),m.depth,Ck(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(m.text,m.lang,m.escaped);continue}case"table":{for(h="",d="",l=m.header.length,a=0;a<l;a++)d+=this.renderer.tablecell(this.parseInline(m.header[a].tokens),{header:!0,align:m.align[a]});for(h+=this.renderer.tablerow(d),g="",l=m.rows.length,a=0;a<l;a++){for(f=m.rows[a],d="",u=f.length,s=0;s<u;s++)d+=this.renderer.tablecell(this.parseInline(f[s].tokens),{header:!1,align:m.align[s]});g+=this.renderer.tablerow(d)}n+=this.renderer.table(h,g);continue}case"blockquote":{g=this.parse(m.tokens),n+=this.renderer.blockquote(g);continue}case"list":{for(y=m.ordered,_=m.start,E=m.loose,l=m.items.length,g="",a=0;a<l;a++)b=m.items[a],I=b.checked,R=b.task,w="",b.task&&(D=this.renderer.checkbox(I),E?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=D+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=D+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:D}):w+=D),w+=this.parse(b.tokens,E),g+=this.renderer.listitem(w,R,I);n+=this.renderer.list(g,y,_);continue}case"html":{n+=this.renderer.html(m.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(m.tokens));continue}case"text":{for(g=m.tokens?this.parseInline(m.tokens):m.text;i+1<ee&&e[i+1].type==="text";)m=e[++i],g+=`
`+(m.tokens?this.parseInline(m.tokens):m.text);n+=r?this.renderer.paragraph(g):g;continue}default:{let G='Token with "'+m.type+'" type was not found.';if(this.options.silent){console.error(G);return}else throw new Error(G)}}}return n}parseInline(e,r){r=r||this.renderer;let n="",i,a,s,l=e.length;for(i=0;i<l;i++){if(a=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call({parser:this},a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=s||"";continue}switch(a.type){case"escape":{n+=r.text(a.text);break}case"html":{n+=r.html(a.text);break}case"link":{n+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{n+=r.image(a.href,a.title,a.text);break}case"strong":{n+=r.strong(this.parseInline(a.tokens,r));break}case"em":{n+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{n+=r.codespan(a.text);break}case"br":{n+=r.br();break}case"del":{n+=r.del(this.parseInline(a.tokens,r));break}case"text":{n+=r.text(a.text);break}default:{let u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};function Ye(t,e,r){if(typeof t=="undefined"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(r=e,e=null),e=Ui({},Ye.defaults,e||{}),Sk(e),r){let i=e.highlight,a;try{a=ca.lex(t,e)}catch(u){return r(u)}let s=function(u){let f;if(!u)try{e.walkTokens&&Ye.walkTokens(a,e.walkTokens),f=Fi.parse(a,e)}catch(d){u=d}return e.highlight=i,u?r(u):r(null,f)};if(!i||i.length<3||(delete e.highlight,!a.length))return s();let l=0;Ye.walkTokens(a,function(u){u.type==="code"&&(l++,setTimeout(()=>{i(u.text,u.lang,function(f,d){if(f)return s(f);d!=null&&d!==u.text&&(u.text=d,u.escaped=!0),l--,l===0&&s()})},0))}),l===0&&s();return}function n(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+an(i.message+"",!0)+"</pre>";throw i}try{let i=ca.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(Ye.walkTokens(i,e.walkTokens)).then(()=>Fi.parse(i,e)).catch(n);Ye.walkTokens(i,e.walkTokens)}return Fi.parse(i,e)}catch(i){n(i)}}Ye.options=Ye.setOptions=function(t){return Ui(Ye.defaults,t),iV(Ye.defaults),Ye};Ye.getDefaults=vk;Ye.defaults=Wl;Ye.use=function(...t){let e=Ye.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let n=Ui({},r);if(n.async=Ye.defaults.async||n.async,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){let a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let l=i.renderer.apply(this,s);return l===!1&&(l=a.apply(this,s)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),r.renderer){let i=Ye.defaults.renderer||new ip;for(let a in r.renderer){let s=i[a];i[a]=(...l)=>{let u=r.renderer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.renderer=i}if(r.tokenizer){let i=Ye.defaults.tokenizer||new np;for(let a in r.tokenizer){let s=i[a];i[a]=(...l)=>{let u=r.tokenizer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.tokenizer=i}if(r.walkTokens){let i=Ye.defaults.walkTokens;n.walkTokens=function(a){let s=[];return s.push(r.walkTokens.call(this,a)),i&&(s=s.concat(i.call(this,a))),s}}Ye.setOptions(n)})};Ye.walkTokens=function(t,e){let r=[];for(let n of t)switch(r=r.concat(e.call(Ye,n)),n.type){case"table":{for(let i of n.header)r=r.concat(Ye.walkTokens(i.tokens,e));for(let i of n.rows)for(let a of i)r=r.concat(Ye.walkTokens(a.tokens,e));break}case"list":{r=r.concat(Ye.walkTokens(n.items,e));break}default:Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[n.type]?Ye.defaults.extensions.childTokens[n.type].forEach(function(i){r=r.concat(Ye.walkTokens(n[i],e))}):n.tokens&&(r=r.concat(Ye.walkTokens(n.tokens,e)))}return r};Ye.parseInline=function(t,e){if(typeof t=="undefined"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Ui({},Ye.defaults,e||{}),Sk(e);try{let r=ca.lexInline(t,e);return e.walkTokens&&Ye.walkTokens(r,e.walkTokens),Fi.parseInline(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+an(r.message+"",!0)+"</pre>";throw r}};Ye.Parser=Fi;Ye.parser=Fi.parse;Ye.Renderer=ip;Ye.TextRenderer=Ny;Ye.Lexer=ca;Ye.lexer=ca.lex;Ye.Tokenizer=np;Ye.Slugger=By;Ye.parse=Ye;var Lee=Ye.options,Pee=Ye.setOptions,Mee=Ye.use,Uee=Ye.walkTokens,Fee=Ye.parseInline;var qee=Fi.parse,Gee=ca.lex;var Ik=t=>M(void 0,null,function*(){var h,g,m,y,_,E;let e=pt.getInstance(),r=yield app.vault.adapter.read((0,Dy.normalizePath)(t.file.path)),n=(g=Bc.default.cloneDeep((h=app==null?void 0:app.metadataCache)==null?void 0:h.getFileCache(t.file).frontmatter))!=null?g:{};console.log(app.metadataCache.getFileCache(t.file));let i=/\[([^[]*)::([^[]*)\]/gm,a,s=[];do a=i.exec(r),s.push(a);while(a);if(s.forEach(w=>{w&&Bc.default.set(n,w[1].trim(),w[2].trim())}),!n){Ot("No frontmatter found in note",!0);return}let l=_V(n);for(let[w,b]of Object.entries(l)){let I=Bc.default.get(n,w,null);I&&Bc.default.set(n,b,I)}let u=yield en(),f=n.position;delete n.position;let d=u.find(w=>{var b,I;return w.id==((b=n.calendar)!=null?b:e.settings.defaultCalendar)||w.summary==((I=n.calendar)!=null?I:e.settings.defaultCalendar)});if(!d){Ot("Event not created. Calendar not defined. Set a default calendar in the settings or set the field calendar");return}if(n.parent=d,n.summary||(n.summary=t.file.basename),n.description){if(typeof n.description=="string"){if(((m=n.description)==null?void 0:m.toLowerCase())=="header"&&(n.description="",((y=app==null?void 0:app.metadataCache)==null?void 0:y.getFileCache(t.file).headings).forEach(b=>{n.description+=`<h${b.level}>${b.heading}</h${b.level}>`})),((_=n.description)==null?void 0:_.toLowerCase())=="file"){let w=Ye.parse(r.substring(f.end.offset));n.description=w}}else if(typeof n.description=="object"){let w=(E=app==null?void 0:app.metadataCache)==null?void 0:E.getFileCache(t.file).headings,b=n.description.map(R=>R>=w.length?-1:R+1<w.length?r.substring(w[R].position.start.offset,w[R+1].position.start.offset-1):r.substring(w[R].position.start.offset,r.length));if(console.log(b),b.contains(-1)){Ot("Event not created.A Header in the headerlist is out of range",!0);return}let I=Ye.parse(b.join(`
`));n.description=I}}if(!n.start&&!n.startTime&&(n.start={date:window.moment()}),!n.end&&!n.endTime&&(n.end=n.start),n.start.date?(n.start.date=window.moment(n.start.date).format("YYYY-MM-DD"),n.end.date=window.moment(n.end.date).clone().add(1,"day").format("YYYY-MM-DD")):(n.start.dateTime=window.moment(n.start.dateTime).format(),n.end.dateTime=window.moment(n.end.dateTime).format()),n.recurrence)try{let w=iA.fromText(n.recurrence),b=new vo;b.rrule(w),n.recurrence=b.valueOf()}catch(w){Ot("Event not created. Error in recurrence text.",!0);return}return n}),_V=t=>{var r;let e=new Map;if(typeof t.mapping=="string"){t.mapping.endsWith(".md")||(t.mapping+=".md");let n=(0,Dy.normalizePath)(t.mapping),i=app.vault.getAbstractFileByPath(n);if(!i)return Ot(`Mapping Error, file "${n}" not found.`),e;if(t=(r=app==null?void 0:app.metadataCache)==null?void 0:r.getFileCache(i).frontmatter,!t)return Ot(`Mapping Error, file "${n}" does not contain frontmatter.`),e}return t.mapping?t.mapping:e};var wV={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:Ph(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8",debugMode:!1},pt=class extends zl.Plugin{constructor(){super(...arguments);this.events=[];this.initView=e=>M(this,null,function*(){this.app.workspace.getLeavesOfType(e).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:e})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(e).first())});this.onLayoutReady=()=>{var n;wc(this);let e=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;e&&e.enabled&&(this.coreTemplatePlugin=e);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),oy(this)}}static getInstance(){return pt.instance}onload(){return M(this,null,function*(){pt.instance=this,this.api=new Ry().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>wc(this))),this.events.push(this.app.vault.on("delete",()=>wc(this))),this.events.push(this.app.vault.on("rename",()=>wc(this))),this.events.forEach(e=>{this.registerEvent(e)}),this.registerMarkdownCodeBlockProcessor("gEvent",(e,r,n)=>Y2(e,r,n)),this.registerEditorSuggest(new Ay(this.app)),this.registerView(Tc,e=>new Cy(e)),this.registerView(Ac,e=>new by(e)),this.registerView(kc,e=>new xy(e)),this.registerView(Ic,e=>new Sy(e)),this.registerEvent(this.app.workspace.on("editor-change",e=>{Z2(e),ek(e)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(Tc)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(Ac)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(kc)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(Ic)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=zt();if(e)return r;!r||en().then(n=>{new Oh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:e=>{let r=zt();if(e)return r;!r||new vi({start:{},end:{}},()=>{Oi()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=zt();if(e)return r;!r||en().then(n=>{new Oh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:e=>{let r=zt();if(e)return r;!r||hr().then(n=>{new Mi(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:e=>{let r=zt();if(e)return r;!r||oy(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:e=>{let r=zt();if(e)return r;!r||hr().then(n=>{new Mi(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:e=>{let r=zt();if(e)return r;!r||hr().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?wo(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new Eo(i[0],()=>{}).open():new Mi(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:e=>{e.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",e.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:e=>{e.replaceRange("{{gEvent.}}",e.getCursor());let r=e.getCursor();r.ch+="{{gEvent.".length,e.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(e,r)=>{let n=zt();if(e)return n;!n||new Iy(r).open()}}),this.addCommand({id:"create-google-calendar-event-from-frontmatter ",name:"Create Google Calendar Event from frontmatter",editorCheckCallback:(e,r,n)=>{let i=zt();if(e)return i;!i||!n.file||Ik(n).then(a=>{!a||bh(a)})}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let e=Ea();if(e==null||e==""){new zl.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(e),new zl.Notice("Token copied")}}),this.settingsTab=new zm(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",e=>M(this,null,function*(){this.settings.useCustomClient||(Sf(e.uid),Ja(e.at),Za(+new Date+36e5),new zl.Notice("Login successful!"),this.settingsTab.display())}))})}onunload(){this.app.workspace.detachLeavesOfType(Tc),this.app.workspace.detachLeavesOfType(Ac),this.app.workspace.detachLeavesOfType(kc),this.app.workspace.detachLeavesOfType(Ic);for(let e in this.events)this.app.vault.offref(e);this.events=[]}loadSettings(){return M(this,null,function*(){this.settings=Object.assign({},wV,yield this.loadData())})}saveSettings(){return M(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
